
<html>
<head>
<title>送月亮</title>
		<meta http-equiv="imagetoolbar" content="no">
        <include file="Kawahk:js"/> 
        <script type="text/javascript">
            initViewport();
        </script>
		<meta http-equiv="content-type" content="text/html; charset=utf-8">
		<meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
		 <meta name="copyright" content="版权所有，抄袭必究，（告无忧微米）">
        <meta name="format-detection" content="telephone=no">

<style type="text/css">
html {
overflow: hidden;
}
body {
	position: absolute;
	margin: 0px;
	padding: 0px;
	width: 100%;
	height: 100%;
	"overflow-x":"hidden";
}
#screen {
position: absolute;

left: 10%;
top: 10%;
width: 80%;
height: 80%;
}
#screen img {
position: absolute;
cursor: pointer;
width: 0px;
height: 0px;
-ms-interpolation-mode:nearest-neighbor;
}
#bankImages {
visibility: hidden;
}
#showImages li{
	position:absolute;
	left:0px;
	top:0px;
	width:100%;
	list-style:none;
	z-index:-1;
}
#FPS {
position: absolute;
right: 5px;
bottom: 5px;
font-size: 10px;
color: #666;
font-family: verdana;
}
#layer3{
position:absolute;
left:0px;
top:0px;
width:100%;
hight:100%
z-index:3;
}
#layer4{
position:absolute;
left:0px;
top:0px;
width:100%;
hight:100%
z-index:4;
}
div#foot{   
        position:fixed; 
		left:320px;
		bottom:10px;
    } 	
</style>
<script src="http://lib.sinaapp.com/js/jquery/1.3.2/jquery.min.js" type="text/javascript"></script>
<link rel="stylesheet" href="makecard3.css" type="text/css" media="screen" charset="utf-8">

<script type="text/javascript">

/******************************************

* Snow Effect Script- By Altan d.o.o. (http://www.altan.hr/snow/index.html)

* Visit Dynamic Drive DHTML code library (http://www.dynamicdrive.com/) for full source code

* Last updated Nov 9th, 05' by DD. This notice must stay intact for use

******************************************/

  

  //Configure below to change URL path to the snow image
 
  var snowsrc ="tpl/Wap/default/common/kawahk/6002/5.png"
  var snowsrc1 ="tpl/Wap/default/common/kawahk/6002/5.png"
  var flag =0

  // Configure below to change number of snow to render

  var no = 4;

  // Configure whether snow should disappear after x seconds (0=never):

  var hidesnowtime = 0;

  // Configure how much snow should drop down before fading ("windowheight" or "pageheight")

  var snowdistance = "pageheight";



///////////Stop Config//////////////////////////////////



  var ie4up = (document.all) ? 1 : 0;

  var ns6up = (document.getElementById&&!document.all) ? 1 : 0;



	function iecompattest(){

	return (document.compatMode && document.compatMode!="BackCompat")? document.documentElement : document.body

	}



  var dx, xp, yp;    // coordinate and position variables

  var am, stx, sty;  // amplitude and step variables

  var i, doc_width = 800, doc_height = 800; 

  

  if (ns6up) {

    doc_width = self.innerWidth;

    doc_height = 800;

  } else if (ie4up) {

    doc_width = iecompattest().clientWidth;

    doc_height = 800;

  }



  dx = new Array();

  xp = new Array();

  yp = new Array();

  am = new Array();

  stx = new Array();

  sty = new Array();

  snowsrc= flag ? snowsrc1 : snowsrc;

  for (i = 0; i < no; ++ i) {  

    dx[i] = 0;                        // set coordinate variables

    xp[i] = Math.random()*(doc_width-200);  // set position variables

    yp[i] = Math.random()*doc_height;

    am[i] = 0;         // set amplitude variables

    stx[i] = 0.8; // set step variables

    sty[i] = 0.7;     // set step variables

		if (ie4up||ns6up) {

      if (i == 0) {

        document.write("<div id=\"dot"+ i +"\" style=\"POSITION: absolute; Z-INDEX: "+ i +"; VISIBILITY: visible; TOP: 15px; LEFT: 15px;\"><img src='"+snowsrc+"' border=\"0\"><\/div>");

      } else {

        document.write("<div id=\"dot"+ i +"\" style=\"POSITION: absolute; Z-INDEX: "+ i +"; VISIBILITY: visible; TOP: 15px; LEFT: 15px;\"><img src='"+snowsrc+"' border=\"0\"><\/div>");

      }

    }

  }



  function snowIE_NS6() {  // IE and NS6 main animation function

    doc_width = ns6up?window.innerWidth-80 : iecompattest().clientWidth-80;

	doc_height = 800;

    for (i = 0; i < no; ++ i) {  // iterate for every dot

      yp[i] += sty[i];
	  xp[i] += stx[i];
	  
      if ((yp[i] > doc_height-150) || (xp[i] > doc_width-100)){

        xp[i] = Math.random()*(doc_width-am[i]-30);

        yp[i] = Math.random()*10;

        stx[i] = 0.2;

        sty[i] = 0.7;

      }

      dx[i] += stx[i];

      document.getElementById("dot"+i).style.top=yp[i]+"px";
	  
      document.getElementById("dot"+i).style.left=xp[i] + am[i]+"px";  

    }
	
    snowtimer = setTimeout("snowIE_NS6()", 5);

  }



	function hidesnow(){

		if (window.snowtimer) clearTimeout(snowtimer)

		for (i=0; i<no; i++) document.getElementById("dot"+i).style.visibility="hidden"

	}

		



if (ie4up||ns6up){

    snowIE_NS6();

		if (hidesnowtime>0)

		setTimeout("hidesnow()", hidesnowtime*1000)

		}



/* ==== fadein ==== */


/* ==== Easing function ==== */
var Library = {};
Library.ease = function () {
this.target = 0;
this.position = 0;
this.move = function (target, speed) {
this.position += (target - this.position) * speed;
}
}

var n = 8;
var tv = {
/* ==== variables ==== */
O : [],
fps : 0,
screen : {},
angle : {
x : new Library.ease(),
y : new Library.ease()
},
camera : {
x : new Library.ease(),
y : new Library.ease()
},
create3DHTML : function (i, x, y, z, sw, sh) {
/* ==== create HTML image element ==== */
var o = document.createElement('img');
o.src = i.src;
tv.screen.obj.appendChild(o);
/* ==== 3D coordinates ==== */
o.point3D = {
x : x,
y : y,
z : new Library.ease(),
sw : sw,
sh : sh,
w : i.width,
h : i.height
};
o.point3D.z.target = z;
/* ==== push object ==== */
o.point2D = {};
tv.O.push(o);

/* ==== on mouse over event ==== */
o.onclick = function () {
if (this != tv.o) {
this.point3D.z.target = tv.mouseZ;
tv.camera.x.target = this.point3D.x;
tv.camera.y.target = this.point3D.y;
if (tv.o) tv.o.point3D.z.target = 0;
tv.o = this;
}
return false;
}

/* ==== on mousedown event ==== */

o.onmousedown = function () {
	if (n == 9)
	{
		for (var i =0; i<=8; i++)
				$("#showImages li").eq(i).fadeIn(10);
	}
	if( n == 8 )
	{
		hidesnow();
	}
	
	document.getElementById("layer3").style.visibility="hidden"
	
	
	if(! $("#showImages li").eq(n).is(":hidden")){
	
		if ( n==1 )
		{
			n--;
		}
		else
		{
			$("#showImages li").eq(n).fadeOut(2000);
		}
		}
		
	else
	{		
		 $("#showImages li").eq(n).fadeIn("slow");
	}
	
	n--;
	if ((n == 0) || (n == -1))
	{
			n = 9;
	};
	
	
	
if (this == tv.o) {
if (this.point3D.z.target == tv.mouseZ) this.point3D.z.target = 0;
else {
tv.o = false;
this.onclick();
}
}
}

/* ==== main 3D function ==== */
o.animate = function () {
/* ==== 3D coordinates ==== */
var x = this.point3D.x - tv.camera.x.position;
var y = this.point3D.y - tv.camera.y.position;
this.point3D.z.move(this.point3D.z.target, this.point3D.z.target ? .15 : .08);
/* ==== rotations ==== */
var xy = tv.angle.cx * y - tv.angle.sx * this.point3D.z.position;
var xz = tv.angle.sx * y + tv.angle.cx * this.point3D.z.position;
var yz = tv.angle.cy * xz - tv.angle.sy * x;
var yx = tv.angle.sy * xz + tv.angle.cy * x;
/* ==== 2D transform ==== */
var scale = tv.camera.focalLength / (tv.camera.focalLength + yz);
x = yx * scale;
y = xy * scale;
var w = Math.round(Math.max(0, this.point3D.w * scale * this.point3D.sw));
var h = Math.round(Math.max(0, this.point3D.h * scale * this.point3D.sh));
/* ==== HTML rendering ==== */
var o = this.style;

o.left = Math.round(x + tv.screen.w - w * .5) + 'px';
o.top = Math.round(y + tv.screen.h - h * .5) + 'px';
o.width = w + 'px';
o.height = h + 'px';
o.zIndex = 10000 + Math.round(scale * 1000);
}
},

/* ==== init script ==== */
init : function (structure, FL, mouseZ, rx, ry) {
this.screen.obj = document.getElementById('screen');
this.screen.obj.onselectstart = function () { return false; }
this.screen.obj.ondrag = function () { return false; }
this.mouseZ = mouseZ;
this.camera.focalLength = FL;
this.angle.rx = rx;
this.angle.ry = ry;
/* ==== create objects ==== */
var i = 0, o;
while( o = structure[i++] )
this.create3DHTML(o.img, o.x, o.y, o.z, o.sw, o.sh);
/* ==== start script ==== */
this.resize();
mouse.y = this.screen.y + this.screen.h;
mouse.x = this.screen.x + this.screen.w;
/* ==== loop ==== */
setInterval(tv.run, 16);
setInterval(tv.dFPS, 1000);
},

/* ==== resize window ==== */
resize : function () {
var o = tv.screen.obj;
if (o) {
tv.screen.w = o.offsetWidth / 2;
tv.screen.h = o.offsetHeight / 2;
for (tv.screen.x = 0, tv.screen.y = 0; o != null; o = o.offsetParent) {
tv.screen.x += o.offsetLeft;
tv.screen.y += o.offsetTop;
}
}
},

/* ==== main loop ==== */
run : function () {
tv.fps++;
/* ==== motion ease ==== */
tv.angle.x.move(-(mouse.y - tv.screen.h - tv.screen.y) * tv.angle.rx, .1);
tv.angle.y.move( (mouse.x - tv.screen.w - tv.screen.x) * tv.angle.ry, .1);
tv.camera.x.move(tv.camera.x.target, .025);
tv.camera.y.move(tv.camera.y.target, .025);
/* ==== angles sin and cos ==== */
tv.angle.cx = Math.cos(tv.angle.x.position);
tv.angle.sx = Math.sin(tv.angle.x.position);
tv.angle.cy = Math.cos(tv.angle.y.position);
tv.angle.sy = Math.sin(tv.angle.y.position);
/* ==== loop through images ==== */
var i = 0, o;
while( o = tv.O[i++] ) o.animate();
},

/* ==== trace frames per seconds ==== */
dFPS : function () {
//document.getElementById('FPS').innerHTML = tv.fps + ' FPS';
tv.fps = 0;
}
}

/* ==== global mouse position ==== */
var mouse = {
x : 0,
y : 0
}
document.onmousemove = function(e) {
if (window.event) e = window.event;
mouse.x = e.clientX;
mouse.y = e.clientY;
return false;
}

/* ==== starting script ==== */
onload = function() {
onresize = tv.resize;
/* ==== build grid ==== */
var img = document.getElementById('bankImages').getElementsByTagName('img');
var structure = [];
/*
for (var i = -300; i <= 300; i += 120)
for (var j = -300; j <= 300; j += 120)
      if((i == -60 && j == -300) || (i == 180 && j == -300) || ( i == -180 && j == -180) ||( i == 60 && j == -180) || (i == 300 && j == -180) 
	    ||(i == -60 && j == -60) || (i == 180 && j == -60) || (i == 60 && j == 60))
	  {
	  	   structure.push({ img:img[0], x:i, y:j, z:0, sw:.5, sh:.5 });
	  }
*/
 structure.push({ img:img[0], x:0, y:-100, z:0, sw:.5, sh:.5 });
 structure.push({ img:img[0], x:-60, y:-140, z:0, sw:.5, sh:.5 });
 structure.push({ img:img[0], x:60, y:-140, z:0, sw:.5, sh:.5 });
 structure.push({ img:img[0], x:-120, y:-70, z:0, sw:.5, sh:.5 });
 structure.push({ img:img[0], x:120, y:-70, z:0, sw:.5, sh:.5 });
 structure.push({ img:img[0], x:-80, y:-20, z:0, sw:.5, sh:.5 });
 structure.push({ img:img[0], x:80, y:-20, z:0, sw:.5, sh:.5 });
 structure.push({ img:img[0], x:0, y:60, z:0, sw:.5, sh:.5 });
/* ==== let's go ==== */
tv.init(structure, 350, -200, .005, .0025);

kawa_init();
}

</script>

<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

</head>

<body>
<script>
        	words = '',
            kawa_data = {
                words 			   : words,
                  <if condition=" $words eq ''">
				replace_words      : '',
				<else/>
                replace_words      : '{weimicms:$words}',</if>
                text_box           : '260 240 450 66', // 左 上 宽 高，空格分隔，只写数字，单位强制为px
                mode               : 'up',     // up, left
                speed              : 40,     // 每秒移动的像素
                text_color         : '#000099', // rgb(1,2,3) 'black'
                font_size          : '20pt',
                line_height        : '40pt',
                music              : 'http://sound.kagirl.net/sound/woyuanyi.mp3',     // url
               <if condition=" $music eq ''">
				replace_music      : 'http://sound.kagirl.net/sound/woyuanyi.mp3', 
				<else/> 
				 replace_music      : '{weimicms:$music}',</if>
                music_name         : '',
                replace_music_name : '#replace_music_name#',
                icon               : '{weimicms:$f_siteUrl}/tpl/Wap/default/common/kawahk/fengmian/x6002.jpg',
                title              : '卡娃微卡',
                desc               : words,
                modify             : 'no',
                replace_modify     : 'yes',
                cardid             : '6002',
                share_url          : window.location.href,  // 当分享的是微信页面时才需要改这里
                font_ip            : '114.215.157.155:8000',
                modify_optfile     : 'aiqing',
                modify_optwords    : '#modify_optwords#',
                show_words         : 'no',
                write_param_1      : 'inputtype=singleline&showsel=no&prompt=' + encodeURIComponent('输入对方的名字：')
            };
        </script>	


<div id="screen"></div>

<div id="bankImages">
<img alt="" src="tpl/Wap/default/common/kawahk/6002/3.png">
</div>
<div id="showImages">	
	<li><img src="tpl/Wap/default/common/kawahk/6002/6002_8.jpg" width="100%"></li>	

	<li><img src="tpl/Wap/default/common/kawahk/6002/6002_7.jpg" width="100%"></li>
	<li><img src="tpl/Wap/default/common/kawahk/6002/6002_6.jpg" width="100%"></li>
	<li><img src="tpl/Wap/default/common/kawahk/6002/6002_5.jpg" width="100%"></li>
	<li><img src="tpl/Wap/default/common/kawahk/6002/6002_4.jpg" width="100%"></li>
	<li><img src="tpl/Wap/default/common/kawahk/6002/6002_3.jpg" width="100%"></li>
	<li><img src="tpl/Wap/default/common/kawahk/6002/6002_2.jpg" width="100%"></li>
	<li><img src="tpl/Wap/default/common/kawahk/6002/6002_1.jpg" width="100%"></li>
</div>


 <div id="layer3">

	<img src="tpl/Wap/default/common/kawahk/6002/6001_10.gif" width="100%">

</div>

</body>
</html>