(function(b,c){var a;c(function(){var p=b.WBPage;p.PageData={};var m=p.Loader.append();p.Property_CID=c.getUrlParam("cid");p.Property_DID=c.getUrlParam("did");if(b.localStorage&&b.localStorage.getItem("")){p.Property_WXID=c.getUrlParam("wxid")}p.hide();c(b).bind("rendercomplete",function(){p.show()});var i=b.WBPage.getWBData("type");var q=!!(b.WBPage.getWBData("noweb")==="true");if(q){WBPage.Loader.remove(m);if(i){c.getScript(p.PATH_TYPE_PROCESSOR+i+".js").fail(function(){c(b).trigger("rendercomplete");c("html").addClass("RENDERCOMPLETE")})}else{c(b).trigger("rendercomplete");c("html").addClass("RENDERCOMPLETE")}return}var j=c("body");var l=c(".weiba-page",j);var e=c(".weiba-content",l);if(i!="home"){var r='<div class="weiba-navbar tpl-navbar">';r+='<a class="weiba-navbar-item tpl-navbar-item back"><div class="icon"></div><div class="seg"></div></a>';r+='<a class="weiba-navbar-item tpl-navbar-item home"><div class="icon"></div><div class="seg"></div></a>';r+='<a class="weiba-navbar-item tpl-navbar-item quick"><div class="icon"></div><div class="seg"></div></a>';r+="</div>";l.prepend(r)}var d='<div class="weiba-footer">';d+='<div class="weiba-copyright tpl-copyright">&copy;公司名称</div>';d+='<a class="weiba-support tpl-support" href="">技术支持</a>';d+="</div>";l.append(d);var k='<div class="weiba-quickpanel">';k+='<div class="weiba-list tpl-quickpanel">';k+='<a class="weiba-list-item tpl-catelist-item" href="#">';k+='<div class="weiba-list-item-line">';k+='<div class="weiba-list-item-title tpl-cate-title">快捷链接</div>';k+="</div>";k+='<div class="weiba-list-item-icon icon-arrow-r"></div>';k+="</a>";k+="</div>";k+="</div>";j.append(k);function h(u){var v="";v+='<div class="weiba-easycall round" style="z-index: 9999999;">';v+='<div class="weiba-easycall-show">';for(var t in u.assists){var s=u.assists[t];if(s.type==0){v+='<a class="weiba-easycall-item " href="tel:'+c.translateTel(s.content)+'">'}else{v+='<a class="weiba-easycall-item " href="'+s.content+'">'}if(u.position==0){v+='<span class="icon icon-left" style="background-image:url('+s.icon+')"></span>'}else{if(u.position==2){v+='<span class="icon icon-right" style="background-image:url('+s.icon+')"></span>'}}v+='<span class="text">'+s.title+"</span>";v+="</a>"}v+="</div>";v+='<a class="weiba-easycall-but">';v+="</a></div>";j.append(v);j.addClass("weiba-easycallround");c(".weiba-easycall-item").each(function(y){var A=5,w=u.assists.length*A,x=2,B=u.assists.length*x;var z="-webkit-transform:rotate("+(B-(y+1)*x)+"deg);transform:rotate("+(B-(y+1)*x)+"deg);-moz-transform:rotate("+(B-(y+1)*x)+"deg);";var C="-webkit-transform:rotate(-"+(B-(y+1)*x)+"deg);transform:rotate(-"+(B-(y+1)*x)+"deg);-moz-transform:rotate(-"+(B-(y+1)*x)+"deg);";if(u.position==0){c(this).attr("style","margin-left: "+(w-(y+1)*A)+"px;"+z)}else{if(u.position==2){c(this).attr("style","margin-right: "+(w-(y+1)*A)+"px;"+C)}}});if(u.position==0){c(".weiba-easycall").addClass("left");c(".weiba-easycall-item").addClass(" padding-left");c(".weiba-easycall-but").addClass("left")}else{if(u.position==2){c(".weiba-easycall").addClass("right");c(".weiba-easycall-item").addClass(" padding-right");c(".weiba-easycall-but").addClass("right")}}c(b).on("rendercomplete",function(){c(".weiba-easycall").addClass("show")})}function f(w){if(!w||!w.assists||!w.assists.length){return}var u=w.assists,t=Math.ceil((u.length/4))-1,y="";for(var x=0;x<=t;x++){y+='<div class="page '+(t>0?" padding":"")+'">';for(var v=0;v<4;v++){var A=u[x*4+v];if(A){var s=c.trim(A.content);if(A.type==0){s="tel:"+s}y+='<a class="easycall-item" href="'+s+'">';y+='<img class="icon" src="'+A.icon+'">';y+='<div class="title">'+A.title+"</div>";y+="</a>"}}y+="</div>"}y=('<div class="weiba-easycall panel"><div class="panel-box">'+y+"</div></div>");var z=c(y).appendTo("body").swipe({startSlide:0,speed:500,auto:0,continuous:true,disableScroll:(t>0?false:true),stopPropagation:false,callback:function(B,C){},transitionEnd:function(B,C){}}).on("click",".panel-ctr.left",function(){z.data("swipe").prev()}).on("click",".panel-ctr.right",function(){z.data("swipe").next()});j.addClass("weiba-easycallpanel");if(t>0){z.append('<div class="panel-ctr left"></div><div class="panel-ctr right"></div>')}}var n={info:{url:p.PATH_DATA_INFO},easycall:{url:p.PATH_DATA_EASYCALL,success:function(s){if(s){var t=s;if(t.display>0&&((t.display==1&&p.getWBData("type")=="home")||t.display==2)||(t.display==3&&p.getWBData("type")!="home")){if(t.type==1){f(s)}else{h(s)}}}}},effect:{url:p.PATH_EFFECT,success:function(s){if(s){c.each(s,function(t,u){if(c.isPlainObject(u)){if(u.enabled&&c.isArray(u.scope)){if(u.scope.indexOf(p.getWBData("type"))>-1){c.getScript(p.PATH_EFFECT_PLUG_FILE[t])}}}})}}},footer:{url:p.PATH_DATA_FOOTER},user:{url:p.PATH_USERCENTER,data:{wxid:b.localStorage.getItem("WXID")}}};var o={".tpl-copyright":{".":function(s){var t=s.context;if(t&&t.info){if(t.info["web_name"]){return"&copy;2013 "+t.info["web_name"]}else{return"&copy;2013 "+t.info["company"]}}}},".tpl-support":{".":"技术支持:#{footer.support.title}",".@href":"footer.support.href",".@style+":function(s){var t=s.context;if(!t||!t.footer||!t.footer["support"]||!t.footer["support"]["title"]){return" ;display:none;"}else{return" ;display:block;"}}}};if(i!="home"){c.extend(n,{catelist:{url:p.PATH_DATA_CATELIST}});c.extend(o,{".tpl-navbar-item.home":{".@href":"info.url"},".tpl-quickpanel":{".tpl-catelist-item":{"cate<-catelist":{".@href":"cate.url",".tpl-cate-title":"cate.cate_name"}}}})}var g=p.Loader.append();c.getMultiJSON(n,function(t,u){c.extend(p.PageData,t);var s=p.info_init(t.info);if(s!=0){return false}p.tpl_render(t,o);p.widget_init("navbar");p.widget_init("quickpanel");p.widget_init("easycall");console.log("normal",t);p.Loader.remove(g);if(i){c.getScript(p.PATH_TYPE_PROCESSOR+i+".js").fail(function(){c(b).trigger("rendercomplete");c("html").addClass("RENDERCOMPLETE")})}else{c(b).trigger("rendercomplete");c("html").addClass("RENDERCOMPLETE")}});WBPage.Loader.remove(m)})})(window,jQuery);(function(a,b){a.WBPage.TplTypeDeclare=function(d,k,c,e,j){var l=a.WBPage;var i=l.Loader.append();var g=l.getWBData("type");if(g!==d){f();a.alert("不能正确获得页面类型！\n页面类型:"+g+"\n处理器类型:"+d);return false}if(a.WBDirective){b.extend(j,a.WBDirective)}if(a.WBDataReqs){b.extend(e,a.WBDataReqs)}var h=0;if(b.isPlainObject(e)){b.each(e,function(){h++})}if(h>0){b.getMultiJSON(e,function(m,n){console.log("custom",m);b.extend(l.PageData,m);f()})}else{f()}function f(){l.tpl_render(l.PageData,j);if(b.isFunction(c)){try{c.call(this,l.PageData)}catch(m){console.error("fn_page_init",m.message)}}if(b.isArray(k)){b.each(k,function(n,o){l.widget_init(o)})}b(a).trigger("rendercomplete");b("html").addClass("RENDERCOMPLETE");l.Loader.remove(i)}}})(window,jQuery);