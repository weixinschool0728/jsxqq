/*!
	PURE Unobtrusive Rendering Engine for HTML

	Licensed under the MIT licenses.
	More information at: http://www.opensource.org

	Copyright (c) 2013 Michael Cvilic - BeeBole.com

	Thanks to Rog Peppe for the functional JS jump
	revision: 2.81
*/
;var $p=function(){var c=arguments,a=c[0],b=false;if(typeof a==="string"){b=c[1]||false}else{if(a&&!a[0]&&!a.length){a=[a]}}return $p.core(a,b)},pure=$p;$p.core=function(ad,ac,ab){function z(d){typeof console!=="undefined"&&console.log(d);throw"pure error: "+d}function j(){var f=$p.plugins,d=function(){};d.prototype=f;d.prototype.compile=f.compile||i;d.prototype.render=f.render||h;d.prototype.autoRender=f.autoRender||g;d.prototype.find=f.find||e;d.prototype._compiler=Z;d.prototype._error=z;return new d}function v(d){return d.outerHTML||function(f){var o=document.createElement("div");o.appendChild(f.cloneNode(true));return o.innerHTML}(d)}function Y(f,d){return function(o){return f(String(d.call(o.item||o.context,o)))}}function e(f,d){if(typeof f==="string"){d=f;f=false}return(f||document).querySelectorAll(d)}function t(f,d){return function(C){var E=[f[0]],A=f.length,B,x,w,D,u;try{for(u=1;u<A;u++){B=d[u].call(this,C);x=f[u];if(B===""){w=E[E.length-1];if((D=w.search(/[^\s]+=\"?$/))>-1){E[E.length-1]=w.substring(0,D);x=x.substr(1)}}E[E.length]=B;E[E.length]=x}return E.join("")}catch(o){if(console&&console.log){console.log(o.stack||o.message+" ("+o.type+(o.arguments?", "+o.arguments.join("-"):"")+"). Use Firefox or Chromium/Chrome to get a full stack of the error. ")}return""}}}function c(f){var d=f.match(/^(\w+)\s*<-\s*(\S+)?$/);d===null&&z('bad loop spec: "'+f+'"');d[1]==="item"&&z('"item<-..." is a reserved word for the current running iteration.\n\nPlease choose another name for your loop.');if(!d[2]||d[2].toLowerCase()==="context"){d[2]=function(o){return o.context}}else{if(d[2]&&d[2].indexOf("context")===0){d[2]=r(d[2].replace(/^context\.?/,""))}}return{name:d[1],sel:d[2]}}function r(o){if(typeof o==="function"){return function(C){C=o.call(C.item||C.context||C,C);return !C&&C!==0?"":C}}var d=o.match(/^[\da-zA-Z\$_\@][\w\$:\-]*(\.[\w\$:\-]*[^\.])*$/),A=false,B=o,w=[],x=[],u=0,f;if(d===null){if(/\'|\"/.test(B.charAt(0))){if(/\'|\"/.test(B.charAt(B.length-1))){f=B.substring(1,B.length-1);return function(){return f}}}else{for(;(d=B.match(/#\{([^{}]+)\}/))!==null;){A=true;w[u++]=B.slice(0,d.index);x[u]=r(d[1]);B=B.slice(d.index+d[0].length,B.length)}}if(!A){return function(){return o}}w[u]=B;return t(w,x)}d=o.split(".");return function(E){var C=E.context||E,F=E[d[0]];E=0;var D;if(F&&typeof F.item!=="undefined"){E+=1;if(d[E]==="pos"){return F.pos}C=F.item}for(F=d.length;E<F;){if(!C){break}D=C[d[E]];C=typeof D==="function"?C[d[E]].call(C):D;E++}return !C&&C!==0?"":C}}function X(F,E,B){var D,x,A,w,u,C=[],o,f,H,G,d;if(typeof E==="string"){D=E;(u=E.match(q))||z("bad selector syntax: "+E);x=u[1];A=u[2];w=u[3];u=u[4];if(A==="."||!A&&w){C[0]=F}else{C=ab.find(F,A)}if(!C||C.length===0){return z('The node "'+E+'" was not found in the template:\n'+v(F).replace(/\t/g,"  "))}}else{x=E.prepend;w=E.attr;u=E.append;C=[F]}if(x||u){if(x&&u){z("append/prepend cannot take place at the same time")}else{if(B){z("no append/prepend/replace modifiers allowed for loop target")}else{u&&B&&z("cannot append with loop (sel: "+D+")")}}}if(w){H=/^style$/i.test(w);d=(G=/^class$/i.test(w))?"className":w;o=function(I,J){I.setAttribute(p+w,J);if(I[d]&&!H){try{I[d]=""}catch(K){}}if(I.nodeType===1){I.removeAttribute(w);G&&I.removeAttribute(d)}};f=H||G?H?function(I){return I.style.cssText}:function(I){return I.className}:function(I){return I.getAttribute(w)};F=function(I){return I.replace(/\"/g,"&quot;")};x=x?function(I,J){o(I,J+f(I))}:u?function(I,J){o(I,f(I)+J)}:function(I,J){o(I,J)}}else{x=B?function(I,J){var K=I.parentNode;if(K){K.insertBefore(document.createTextNode(J),I.nextSibling);K.removeChild(I)}else{z("The template root, can't be looped.")}}:x?function(I,J){I.insertBefore(document.createTextNode(J),I.firstChild)}:u?function(I,J){I.appendChild(document.createTextNode(J))}:function(I,J){for(;I.firstChild;){I.removeChild(I.firstChild)}I.appendChild(document.createTextNode(J))};F=function(I){return I}}return{attr:w,nodes:C,set:x,sel:D,quotefn:F}}function U(f,d){var o=n+d+":",u;for(u=0;u<f.nodes.length;u++){f.set(f.nodes[u],o)}}function m(f,d,u,w,o){return function(E){var D=d(E),C=E[f],F={items:D},B=0,A,H=[],G=function(K,L,M,O){var N=E.pos,J=E.item,I=E.items;E.pos=L.pos=K;E.item=L.item=D[K];E.items=D;if(typeof O!=="undefined"){E.length=O}if(typeof M==="function"&&M.call(E.item,E)===false){B++}else{H.push(u.call(E.item,E));E.pos=N;E.item=J;E.items=I}},x;E[f]=F;if(y(D)){A=D.length||0;typeof w==="function"&&D.sort(function(I,J){return w.call(E,I,J)});for(x=0;x<A;x++){G(x,F,o,A-B)}}else{D&&typeof w!=="undefined"&&z("sort is only available on arrays, not objects");for(A in D){D.hasOwnProperty(A)&&G(A,F,o)}}if(typeof C!=="undefined"){E[f]=C}else{delete E[f]}return H.join("")}}function l(D,C,x,B){var u=false,w,o,f,A,d;for(A in x){if(x.hasOwnProperty(A)){if(A==="sort"){o=x.sort}else{if(A==="filter"){f=x.filter}else{if(u){z("cannot have more than one loop on a target")}else{w=A;u=true}}}}}w||z("Error in the selector: "+C+"\nA directive action must be a string, a function or a loop(<-)");u=x[w];if(typeof u==="string"||typeof u==="function"){x={};x[w]={root:u};return l(D,C,x,B)}x=c(w);w=r(x.sel);D=X(D,C,true);C=D.nodes;for(s=0;s<C.length;s++){A=C[s];d=Z(A,u);B[B.length]=Y(D.quotefn,m(x.name,w,d,o,f));D.nodes=[A];U(D,B.length-1)}return D}function b(F,E){function B(J,K){var L=J.match(q);L={prepend:!!L[1],prop:L[2],attr:L[3]||a[K],append:!!L[4],sel:J};var N,M,I;for(N=A.a.length-1;N>=0;N--){M=A.a[N];I=(I=M.l[0])&&I[L.prop];if(typeof I!=="undefined"){L.prop=M.p+"."+L.prop;if(A.l[L.prop]===true){I=I[0]}break}}if(typeof I==="undefined"){I=r(L.prop)(y(E)?E[0]:E);if(I===""){return false}}if(y(I)){A.a.push({l:I,p:L.prop});A.l[L.prop]=true;L.t="loop"}else{L.t="str"}return L}var D=F.getElementsByTagName("*"),x=[],A={a:[],l:{}},w,u,C,o,f,H,G,d;C=-1;for(o=D.length;C<o;C++){G=C>-1?D[C]:F;if(G.nodeType===1&&G.className!==""){d=G.className.split(" ");f=0;for(H=d.length;f<H;f++){w=d[f];w=B(w,G.tagName);if(w!==false){u=/nodevalue/i.test(w.attr);if(w.sel.indexOf("@")>-1||u){G.className=G.className.replace("@"+w.attr,"");if(u){w.attr=false}}x.push({n:G,cspec:w})}}}}return x}function Z(G,F,C,E){var A=[],B,w,u,D,o,f,I,H,d,x=[];E=E||C&&b(G,C);if(C){for(;E.length>0;){u=E[0].cspec;D=E[0].n;E.splice(0,1);if(u.t==="str"){D=X(D,u,false);U(D,A.length);A[A.length]=Y(D.quotefn,r(u.prop))}else{f=r(u.sel);D=X(D,u,true);o=D.nodes;B=0;for(w=o.length;B<w;B++){I=o[B];H=Z(I,false,C,E);A[A.length]=Y(D.quotefn,m(u.sel,f,H));D.nodes=[I];U(D,A.length-1)}}}}for(d in F){if(F.hasOwnProperty(d)){C=0;E=F[d];u=d.split(/\s*,\s*/);f=u.length;do{if(typeof E==="function"||typeof E==="string"){d=u[C];D=X(G,d,false);U(D,A.length);A[A.length]=Y(D.quotefn,r(E))}else{l(G,d,E,A)}}while(++C<f)}}G=v(G);G=G.replace(/<([^>]+)\s(value\=""|selected)\s?([^>]*)>/ig,"<$1 $3>");G=G.split(p).join("");G=G.split(n);for(C=1;C<G.length;C++){F=G[C];x[C]=A[parseInt(F,10)];G[C]=F.substring(F.indexOf(":")+1)}return t(G,x)}function i(f,d,o){var u=Z((o||this[0]).cloneNode(true),f,d);return function(w){return u({context:w})}}function h(f,d){var u=typeof d==="function"&&d,w,o;w=0;for(o=this.length;w<o;w++){this[w]=k(this[w],(u||ab.compile(d,false,this[w]))(f,false))}return this}function g(f,d){var u=ab.compile(d,f,this[0]),w,o;w=0;for(o=this.length;w<o;w++){this[w]=k(this[w],u(f,false))}return this}function k(f,d){var w,x=f.parentNode,o=0,u;if(!x){x=document.createElement("DIV");x.appendChild(f)}switch(f.tagName){case"BODY":x.removeChild(f);x.innerHTML+=d;return x.getElementsByTagName("BODY")[0];case"TBODY":case"THEAD":case"TFOOT":d="<TABLE>"+d+"</TABLE>";o=1;break;case"TR":d="<TABLE><TBODY>"+d+"</TBODY></TABLE>";o=2;break;case"TD":case"TH":d="<TABLE><TBODY><TR>"+d+"</TR></TBODY></TABLE>";o=3;break;case"OPTGROUP":case"OPTION":d="<SELECT>"+d+"</SELECT>";o=1;break}u=document.createElement("SPAN");u.style.display="none";document.body.appendChild(u);u.innerHTML=d;for(w=u.firstChild;o--;){w=w.firstChild}x.insertBefore(w,f);x.removeChild(f);document.body.removeChild(u);return f=w}var aa=[],s,n="_s"+Math.floor(Math.random()*1000000)+"_",p="_a"+Math.floor(Math.random()*1000000)+"_",q=/^(\+)?([^\@\+]+)?\@?([^\+]+)?(\+)?$/,a={IMG:"src",INPUT:"value"},y=Array.isArray?function(d){return Array.isArray(d)}:function(d){return Object.prototype.toString.call(d)==="[object Array]"};ab=ab||j();switch(typeof ad){case"string":aa=ab.find(ac||document,ad);aa.length===0&&z('The template "'+ad+'" was not found');break;case"undefined":z("The root of the template is undefined, check your selector");break;default:aa=ad}s=0;for(ad=aa.length;s<ad;s++){ab[s]=aa[s]}ab.length=ad;return ab};$p.plugins={};$p.libs={dojo:function(){return function(b,a){return dojo.query(a,b)}},domassistant:function(){DOMAssistant.attach({publicMethods:["compile","render","autoRender"],compile:function(b,a){return $p([this]).compile(b,a)},render:function(b,a){return $($p([this]).render(b,a))[0]},autoRender:function(b,a){return $($p([this]).autoRender(b,a))[0]}});return function(b,a){return $(b).cssSelect(a)}},ext:function(){return function(b,a){return Ext.query(a,b)}},jquery:function(){jQuery.fn.extend({directives:function(a){this._pure_d=a;return this},compile:function(b,a){return $p(this).compile(this._pure_d||b,a)},render:function(b,a){return jQuery($p(this).render(b,this._pure_d||a))},autoRender:function(b,a){return jQuery($p(this).autoRender(b,this._pure_d||a))}});return function(b,a){return jQuery(b).find(a)}},mootools:function(){Element.implement({compile:function(b,a){return $p(this).compile(b,a)},render:function(b,a){return $p([this]).render(b,a)},autoRender:function(b,a){return $p([this]).autoRender(b,a)}});return function(b,a){return $(b).getElements(a)}},prototype:function(){Element.addMethods({compile:function(c,a,b){return $p([c]).compile(a,b)},render:function(c,a,b){return $p([c]).render(a,b)},autoRender:function(c,a,b){return $p([c]).autoRender(a,b)}});return function(b,a){b=b===document?b.body:b;return typeof b==="string"?$$(b):$(b).select(a)}},sizzle:function(){return function(b,a){return Sizzle(a,b)}},sly:function(){return function(b,a){return Sly(a,b)}},yui:function(){typeof document.querySelector==="undefined"&&YUI().use("node",function(a){$p.plugins.find=function(b,c){return a.NodeList.getDOMNodes(a.one(b).all(c))}});YUI.add("pure-yui",function(a){a.Node.prototype.directives=function(b){this._pure_d=b;return this};a.Node.prototype.compile=function(b,c){return $p([this._node]).compile(this._pure_d||b,c)};a.Node.prototype.render=function(b,c){return a.one($p([this._node]).render(b,this._pure_d||c))};a.Node.prototype.autoRender=function(b,c){return a.one($p([this._node]).autoRender(b,this._pure_d||c))}},"0.1",{requires:["node"]});return true}};(function(){var b,a=typeof dojo!=="undefined"&&"dojo"||typeof DOMAssistant!=="undefined"&&"domassistant"||typeof Ext!=="undefined"&&"ext"||typeof jQuery!=="undefined"&&"jquery"||typeof MooTools!=="undefined"&&"mootools"||typeof Prototype!=="undefined"&&"prototype"||typeof Sizzle!=="undefined"&&"sizzle"||typeof Sly!=="undefined"&&"sly"||typeof YUI!=="undefined"&&"yui";if(a){b=$p.libs[a]()}if(typeof document.querySelector==="undefined"){if(typeof b==="function"){$p.plugins.find=b}else{if(!b){throw"you need a JS library with a CSS selector engine"}}}if(typeof exports!=="undefined"){exports.$p=$p}})();