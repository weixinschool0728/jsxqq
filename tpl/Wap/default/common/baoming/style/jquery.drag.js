var jDrag=(function(d,e){var b=function a(p){if(!p.handle){return}var o=d.extend({},p);var h=d(o.handle);var i=o.target&&d(o.target);var k=null;var j=(o.type||"").toString().toUpperCase();h[0].onselectstart=function(){return false};h.attr("unselectable","on").css("MozUserSelect","none");var l=null,n=null;var m=function(r){var q=r.pageX-n[0],t=r.pageY-n[1];if(i){var s={};if(j!=="Y"){s.left=k.left+q}if(j!=="X"){s.top=k.top+t}if(!d.isEmptyObject(s)){i.css(s)}}if(d.isFunction(o.onMove)){o.onMove(r,q,t)}};var g=function(q){d(document).unbind("mousemove",m).unbind("mouseup",g);l=false;if(d.isFunction(o.onUp)){o.onUp(q)}};var f=function(q){if(l){g()}if(d.isFunction(o.onDown)){o.onDown(q)}if(i){k={left:i[0].offsetLeft,top:i[0].offsetTop}}n=[q.pageX,q.pageY];d(document).bind("mousemove",m).bind("mouseup",g)};o.handle.bind("mousedown",f);this.remove=function(){d(document).unbind("mousemove",m);d(document).unbind("mousemove",g);d(document).unbind("mousedown",f)};this.destroy=function(){h.unbind("mousedown",f)}};var c=function(f){return new b(f)};return{init:c}})(jQuery);