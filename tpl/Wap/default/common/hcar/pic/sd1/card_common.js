var Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(a){for(var d="",b,c,h,e,f,g,i=0,a=Base64._utf8_encode(a);i<a.length;)b=a.charCodeAt(i++),c=a.charCodeAt(i++),h=a.charCodeAt(i++),e=b>>2,b=(b&3)<<4|c>>4,f=(c&15)<<2|h>>6,g=h&63,isNaN(c)?f=g=64:isNaN(h)&&(g=64),d=d+this._keyStr.charAt(e)+this._keyStr.charAt(b)+this._keyStr.charAt(f)+this._keyStr.charAt(g);return d},decode:function(a){for(var d="",b,c,h,e,f,g=0,a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");g<
a.length;)b=this._keyStr.indexOf(a.charAt(g++)),c=this._keyStr.indexOf(a.charAt(g++)),e=this._keyStr.indexOf(a.charAt(g++)),f=this._keyStr.indexOf(a.charAt(g++)),b=b<<2|c>>4,c=(c&15)<<4|e>>2,h=(e&3)<<6|f,d+=String.fromCharCode(b),e!=64&&(d+=String.fromCharCode(c)),f!=64&&(d+=String.fromCharCode(h));return d=Base64._utf8_decode(d)},_utf8_encode:function(a){for(var a=a.replace(/\r\n/g,"\n"),d="",b=0;b<a.length;b++){var c=a.charCodeAt(b);c<128?d+=String.fromCharCode(c):(c>127&&c<2048?d+=String.fromCharCode(c>>
6|192):(d+=String.fromCharCode(c>>12|224),d+=String.fromCharCode(c>>6&63|128)),d+=String.fromCharCode(c&63|128))}return d},_utf8_decode:function(a){for(var d="",b=0,c=c1=c2=0;b<a.length;)c=a.charCodeAt(b),c<128?(d+=String.fromCharCode(c),b++):c>191&&c<224?(c2=a.charCodeAt(b+1),d+=String.fromCharCode((c&31)<<6|c2&63),b+=2):(c2=a.charCodeAt(b+1),c3=a.charCodeAt(b+2),d+=String.fromCharCode((c&15)<<12|(c2&63)<<6|c3&63),b+=3);return d}},AniObj=window.AniObj||function(a){a&&a.fatherDom&&this.bindEvent(a.fatherDom)};
AniObj.prototype.createProperty=function(a,d,b,c){var h=this,e=b,f=d||function(){};Object.defineProperty(h,a,{set:function(a){if(e!=a||c)e=a,f.call(h,a)},get:function(){return e}})};
AniObj.prototype.bindEvent=function(a){for(var d=document.querySelectorAll(a+" [on-click]"),b=this,c=navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i),h=0,a=d.length;h<a;h++)(function(){var a=function(a){a.preventDefault();with(b)eval(f)},f=d[h].getAttribute("on-click");c?d[h].addEventListener("touchend",
a):d[h].addEventListener("mouseup",a)})()};window.AniObj=AniObj;AniObj.getMyGaTrackId=function(){var a=0;window._gaq&&window._gaq.push&&_gaq.push(function(){a=_gat._getTrackers()[0]._visitCode()});return a};
var customImage=function(a,d,b){if(window.mucard==null)return b(a);var c=[],h=0;for(id in MugedaCard.data)for(var e=MugedaCard.data[id].obj,f=0;f<e.length;f++){var g=e[f];(g.cardRefParam==="image"||g.cardRefParam==="signature"||g.cardRefParam==="masked")&&function(){h++;var a=new Image;a.src=g.oriSrc||g.dom.src;var d={id:id,name:g.name,defaultUrl:g.oriSrc||g.src,url:null};a.onload=function(){h--;d.width=a.width;d.height=a.height;c.push(d);h==0&&i()}}()}h==0?b(a):d.cancel=true;var i=function(){if(c.length>
0)if(MugedaCard.picSelectForm)MugedaCard.picSelectForm.visible=true;else{var f=document.createElement("div");f.id="mpopupForm";f.innerHTML='    <style>        body a{ -webkit-tap-highlight-color: transparent;}        #mpopupForm { font-family: Tahoma,"\u5fae\u8f6f\u96c5\u9ed1",Arial, SimHei; }        #mpopupForm .highlight {color: #d60;}        #mpopupFormFrame { position: absolute; border-radius: 4px; background-color: rgba(255,255,255, 1); width: 300px; height: 360px; margin: auto; top: 50%; margin-top: -180px; left: 50%; margin-left: -150px; }        #mpopupFormFrame div.title { text-align: center; border-bottom: 1px solid; padding: 5px 0; }        #mpopupFormFrame div.mcontent { height: 283px; text-align: center; }        #mpopupFormFrame div.image-frame { height: 218px; position: absolute; left: 0; right: 0}        #mpopupFormFrame #img_t {border: 0; position: absolute; top: 100px; left: 140px; display: none;}        #mpopupFormFrame div.image-name {text-align:left; height: 48px; vertical-align: middle;font-size:12px;padding: 5px 5px; display: inline-block; width: 212px}        #mpopupFormFrame span.image-btn{ display: inline-block; height: 48px;vertical-align: middle;}        #mpopupFormFrame div.mcontent #img_n { border: solid 1px black; position: absolute; }        #mpopupFormFrame .mask { background:black; opacity: 0.75; position: absolute; }        #mpopupFormFrame .changeBottom {bottom: 50px; position: absolute; width: 100%; }        #mpopupFormFrame .maskTop { left:0; right:0; top: 0; }        #mpopupFormFrame .maskLeft { left:0; }        #mpopupFormFrame .maskRight { right:0; }        #mpopupFormFrame .maskBottom { left:0; right:0; bottom: 0; }        #mpopupFormFrame .maskMid { position: absolute; border:1px white solid;}        #mpopupFormFrame .maskMid .corner { position: absolute; width: 30px; height: 30px;}        #mpopupFormFrame .maskMid .corner .cornerinner{ position: absolute; width: 30px; height: 30px; left: -15px; top: -15px; background: rgba(255, 255, 255, 0.5); border:1px solid white; -webkit-border-top-left-radius:15px; -webkit-border-top-right-radius:15px; -webkit-border-bottom-right-radius:15px; -webkit-border-bottom-left-radius:15px; background-repeat: no-repeat; background-position: center; background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NDY5RTQ2OUJBMzcwMTFFM0IwNUM5MTQxNzg4ODg1QzgiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NDY5RTQ2OUNBMzcwMTFFM0IwNUM5MTQxNzg4ODg1QzgiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo0NjlFNDY5OUEzNzAxMUUzQjA1QzkxNDE3ODg4ODVDOCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo0NjlFNDY5QUEzNzAxMUUzQjA1QzkxNDE3ODg4ODVDOCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PukyTYAAAAF+SURBVHjaYrSxsfnAz8/PyIAF8PLy/nvx4gXb58+fVYHcZ9jUnDlzBkyz/Pr1i3vLli0s2BR1dnb+3LVr1x1chiADJlwSIEN279596uPHj4YMRAAmfIZ8+PDBGcj9TbZBIPD//38hICXIQCRgQXcJiC4vL2d3d3fXLi4u3gf0mhNQ6BXRLjp06BADyDsgDGIbGBgw9Pb2agNjdB9QWoygQVxcXL8uXLjA0NjYeBUYJiEgDGKDxNAMY8Vr0Ldv39gKCwufIHnhFYgN9BbcMDc3NxWgYefxGcZobGzMCaS/Y5ETAybIs3PnzpVRUlKCpylocoDFpBgnJ+ctUFpkwmEICLwCpmjj5OTkJ/fu3QNHAJrLwBYtXLiQH2/04zNMQEBgLyjc+vv7ZaSlpTGjn4BhZ0EaQYYBxcyAyYMdFH4/f/4k2iC4YaB0BXIR1DDiUjapgFgXiYHCBJSmQN4h2yBQ7AANkcFlCCwdETJHCmjQbW5u7j+4FHz9+vUTQIABAKL6w4LVWfrWAAAAAElFTkSuQmCC"); }        #mpopupFormFrame div.btn-line { border-top: 1px solid; height: 44px; text-align: center; line-height: 40px; }        #mpopupFormFrame .btn { margin: 0 17px; min-width: 60px; height: 28px; line-height: 28px; border-radius: 4px; border-width: 1px; font-size: 12px; background-color: #EEEEEE; border-color: #DDDDDD; display: inline-block; text-align: center; text-decoration: none; color: black; }        #mpopupFormFrame .btn.pre { min-width: 32px; margin: 0 8px 0 0}        #mpopupFormFrame .btn.next{ min-width: 32px; margin: 0 0 0 8px}        #mpopupFormFrame .btn.ok{ background-color: #989898; color: #ffffff }        #mpopupFormFrame .btn img { vertical-align: middle; margin-top: -2px;}        #mpopupFormFrame .btn:hover { -webkit-box-shadow: 0 0 8px rgba(82, 168, 236, 0.6); -moz-box-shadow: 0 0 8px rgba(82, 168, 236, 0.6); box-shadow: 0 0 8px rgba(82, 168, 236, 0.6); }    </style>        <div id="mpopupFormFrame">            <div class="title">\u5b9a\u5236\u8d3a\u5361\u56fe\u7247</div>            <div class="mcontent">                <div class="image-frame">                    <img class="image" id="img_n" src="i/5306dc958a840f6029000209.png" />                    <img class="image" id="img_t" src="i/loading.gif" />                    <div class="mask maskTop"></div>                    <div class="mask maskLeft"></div>                    <div class="mask maskRight"></div>                    <div class="mask maskBottom"></div>                    <div class="maskMid">                        <\!--<div class="corner cornertop"><div class="cornerinner"></div></div>--\>                        <div class="corner cornerbottom" style="bottom: 0; right: 0; -webkit-transform: rotate(180deg); -moz-transform: rotate(180deg); -ms-transform: rotate(180deg);"><div class="cornerinner"></div></div>                    </div>                </div>                <div class="changeBottom">                    <div class="image-name">fsadsafd</div>                    <span class="image-btn" href="#" on-click="changePic()"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAA3NCSVQICAjb4U/gAAAAh1BMVEX///+1tbWtra2lpaWZmZmtra2lpaWZmZmUlJSlpaWZmZmUlJSMjIylpaWZmZmUlJSlpaWZmZmUlJSMjIylpaWZmZmUlJSlpaWZmZmUlJSlpaWUlJSZmZmUlJSZmZmUlJSMjIyZmZmUlJSMjIyZmZmUlJSMjIyZmZmMjIyUlJSMjIyUlJSMjIz80hmnAAAALXRSTlMAERERESIiIiIzMzMzREREVVVVVWZmZnd3d4iImZmqqqq7u7vMzMzd3e7u///F7f0SAAAACXBIWXMAAAsSAAALEgHS3X78AAAAFnRFWHRDcmVhdGlvbiBUaW1lADAzLzAzLzE0I/anSwAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNXG14zYAAAHjSURBVEiJlVZrY4IgFCUtrbYs23KVY5Q2RsT//30D4+XFV+eTxTncB4erCAVY7K53IXH/2S3CVYikIIwLDc7IIRmkZ9iSrQhnvfQ1huwn8LqbXwS7G7Cigz7r2V4HCYuth/hC1HGbH/0O86UiauVTjfGFIL5gMP+OOg5T+ELkhr9g0wRs8UpCCqU+YPsH/z6ejgNyvgIBmHLaaixE6hzBlWmyAQFL/RZxWqnf64pWEHbP3MuIbbo9qbAxCnkWEW23oDHKvrxc8N6zj9mVxk58squZNgp1V6d0fToLGCFzVzSHAvGFblCQKD4nhJm2tQRX9IACtUbSKFpi4QxnBX9IAMFc7lw9vU9kiBQI7oHgTT7qK7yVj1kggCm9y8etNpms5iNICRatrLjXEbjVWsFP0NZY1YBMDQLW8IlWvC1oDhVL20ZNu8KDi6E1Gvcygpv/4TnUc2cTe9K5bZywE88IsLfuzJfpoMw6wwpy5C6Q59Y4J3VNitCtbO6paYp6kVJ/U9MnVvZCzyGegCaPwWQ9eZDZol4dlRNnn9fGp21G0Br3E14QZNbudDQSg0QIYrCOMqCrXvV21zNVC0n3CfKy//NhXQYvd1b2fAdoLA+YuslHcb4cpDeIN+ebnCWP23kTh6v/wm3rjE22m34AAAAASUVORK5CYII="></span>                </div>            </div>            <div class="btn-line">                <span class="btn pre" href="#" on-click="prePic()"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAWCAMAAAAo0TYrAAAAA3NCSVQICAjb4U/gAAAAOVBMVEX///9aWlpSUlJSUlJSUlJKSkpSUlJSUlJSUlJKSkpSUlJKSkpKSkpKSkpKSkpKSkpKSkpKSkpKSkqFAFptAAAAE3RSTlMAEREiMzNEVWZ3iIiZqrvM3e7/drsrQAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABZ0RVh0Q3JlYXRpb24gVGltZQAwMy8wMy8xNCP2p0sAAAAcdEVYdFNvZnR3YXJlAEFkb2JlIEZpcmV3b3JrcyBDUzVxteM2AAAAaUlEQVQYlW3PRxKAIAxA0VBEVGruf1ghUgya3fvMBACYcwIbh44T0atBX4jZNEli2joDUf9TxcrYd6lElI2aGETjTvTjXhPZ8WdbD2mG5XoA8bzWLCHPQL9l4aoBLQ9+7gQ40Al4jy28AVjhB8s5wRi2AAAAAElFTkSuQmCC"></span>                <span class="btn ok" href="#" on-click="submit()">\u5b8c\u6210</span>                <span class="btn cancel" href="#" on-click="cancel()">\u53d6\u6d88</span>                <span class="btn next" href="#" on-click="nextPic()"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAWCAMAAAAo0TYrAAAAA3NCSVQICAjb4U/gAAAAPFBMVEX///9ZWVlSUlJZWVlSUlJSUlJKSkpSUlJSUlJSUlJKSkpSUlJKSkpKSkpKSkpKSkpKSkpKSkpKSkpKSkqcLCF9AAAAFHRSTlMAEREiIjMzRFVmd4iImaq7zN3u//3tMD0AAAAJcEhZcwAACxIAAAsSAdLdfvwAAAAWdEVYdENyZWF0aW9uIFRpbWUAMDMvMDMvMTQj9qdLAAAAHHRFWHRTb2Z0d2FyZQBBZG9iZSBGaXJld29ya3MgQ1M1cbXjNgAAAGtJREFUGJV9j0kSgCAMBAOCiMqa//9VCMUSDubWXalMBgDgATYO3UKHR1yFyYXRT3EmEnIITSL8CBWriGoISSJNIQIJPWM8iYsvRMMv9gjVEvu97QGTWIWtUcPR2FbCd5bxDMsnLt+wjrALfLwCCEsyPE8bAAAAAElFTkSuQmCC"></span>            </div>        </div>';
document.body.appendChild(f);(function(){var f=MugedaCard.picSelectForm=new AniObj({fatherDom:"#mpopupForm"}),g=document.querySelectorAll("#mpopupFormFrame .image-frame")[0].offsetWidth,e=document.querySelectorAll("#mpopupFormFrame .image-frame")[0].offsetHeight,h=document.querySelectorAll("#mpopupFormFrame .maskLeft")[0],i=document.querySelectorAll("#mpopupFormFrame .maskRight")[0],j=document.querySelectorAll("#mpopupFormFrame .maskTop")[0],z=document.querySelectorAll("#mpopupFormFrame .maskBottom")[0],
A=document.querySelectorAll("#mpopupFormFrame .maskMid")[0];document.querySelectorAll("#mpopupFormFrame div.mcontent .image");var D=document.querySelector("#mpopupFormFrame div.mcontent #img_t"),F=function(a,c,f,d){a=Math.round(a);c=Math.round(c);f=Math.round(f);d=Math.round(d);j.style.bottom=e-a+"px";z.style.top=f+"px";h.style.right=g-d+"px";h.style.top=a+"px";h.style.bottom=e-f+"px";i.style.left=c+"px";i.style.top=a+"px";i.style.bottom=e-f+"px";A.style.top=a+"px";A.style.left=d+"px";A.style.right=
g-c+"px";A.style.bottom=e-f+"px"};F(0,g,e,0);var t=0,r=0,s=g,n=e,o=1,k,l,u,v,w,G=function(a,d,b,e,g,h,i,p,j,x){i==null&&(i=b*g,p=e*g,h>p/i?(j=p/h,i=p):(j=i,i*=h),i=[j,i],j=i[0],x=i[1],i=a+b*g/2-j/2,p=d+e*g/2-x/2,o=h,k=a,l=d,u=g,v=b*g,w=e*g);t=i;r=p;s=j;n=x;c[f.currentId].clipLeft=Math.round((i-k)/u);c[f.currentId].clipTop=Math.round((p-l)/u);c[f.currentId].clipWidth=Math.round(j/u);c[f.currentId].clipHeight=Math.round(x/u);F(p,i+j,p+x,i)},B=function(a,c,f){var d;f>c/a?(d=a,a*=f):(d=c/f,a=c);return[d,
a]};(function(){var a=false,c=function(a){return a.touches&&a.touches.length?[a.touches[0].clientX,a.touches[0].clientY]:[a.clientX,a.clientY]},f=null,d=false;startX=0;startY=0;startMask=null;var b=function(b){b.target.className!="cornerinner"&&b.target.className!="maskMid"||(b.preventDefault(),a||(a=true,f=b.target.parentElement.className.indexOf("top")>-1,d=b.target.className.indexOf("maskMid")>-1,b=c(b),startX=b[0],startY=b[1],startMask={l:t,t:r,w:s,h:n}))},g=function(b){if(a){b.preventDefault();
var g=c(b),b=g[0]-startX,g=g[1]-startY;if(d)b=startMask.l+b,g=startMask.t+g,h=startMask.w,e=startMask.h,b<k&&(b=k),g<l&&(g=l),b+h>k+v&&(b=k+v-h),g+e>l+w&&(g=l+w-e);else if(f){var b=startMask.w-b,g=startMask.h-g,e=B(b,g,o),b=startMask.l+startMask.w-e[0],g=startMask.t+startMask.h-e[1],h=e[0],e=e[1];if(b<k){var i=k-b;h-=i;b=k;g+=i*o;e-=i*o}g<l&&(i=l-g,e-=i,g=l,b+=i/o,h-=i/o);h<30&&(b-=30-h,h=30);e<30&&(g-=30-e,e=30)}else b=startMask.w+b,g=startMask.h+g,e=B(b,g,o),b=startMask.l,g=startMask.t,h=e[0],e=
e[1],b+h>k+v&&(i=b+h-(k+v),h-=i,e-=i*o),g+e>l+w&&(i=g+e-(l+w),e-=i,h-=i/o),h<30&&(h=30),e<30&&(e=30);G(null,null,null,null,null,null,b,g,h,e)}},e=function(c){a&&(c.preventDefault(),a=false)};navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i)?(document.addEventListener("touchstart",
b),document.addEventListener("touchmove",g),document.addEventListener("touchend",e),document.addEventListener("touchcacel",function(){a=false})):(document.addEventListener("mousedown",b),document.addEventListener("mousemove",g),document.addEventListener("mouseup",e))})();f.createProperty("visible",function(a){document.querySelector("#mpopupForm").style.display=a?"block":"none"},true);f.createProperty("imageUrl",function(a){var b=document.querySelector("#mpopupForm .image"),d=b.src;b.style.display=
"none";D.style.display="block";var h=new Image;h.src=a;h.onerror=function(){f.imageUrl=d;typeof mucard!="undefined"&&mucard.reportStatus&&mucard.reportStatus({status:1,desc:"Failed to load the specified URL",value:a});D.style.display="none"};h.onload=function(){D.style.display="none";b.src=a;b.onload=function(){b.style.display="block"};b.style.border="1px solid #000";var d=1,i=c[f.currentId].height/c[f.currentId].width,j=h.width,q=h.height;B(j,q,i);d=h.height/h.width;d<212/292?(j=292,q=j*d,d=j/h.width):
(q=212,j=q/d,d=q/h.height);B(j,q,i);var i=(g-j)/2,z=(e-q)/2;b.style.left=i-1+"px";b.style.top=z-1+"px";b.style.height=q+"px";b.style.width=j+"px";G(i,z,h.width,h.height,d,c[f.currentId].height/c[f.currentId].width,null,null,null,null)}},null,true);f.createProperty("imageName",function(){document.querySelector("#mpopupForm .image-name").innerHTML='\u70b9\u51fb\u53f3\u4fa7<span class="highlight">\u76f8\u673a\u56fe\u6807</span>\u53ef\u4ee5\u66f4\u6362\u56fe\u7247\uff1b\u70b9\u51fb<span class="highlight">\u5b8c\u6210</span>\u786e\u8ba4\u6216\u8005\u8df3\u8fc7\u56fe\u50cf\u5b9a\u5236\uff0c\u5e76\u9884\u89c8\u5b9a\u5236\u540e\u7684\u8d3a\u5361\uff1b\u70b9\u51fb<span class="highlight">\u53d6\u6d88</span>\u56de\u5230\u8d3a\u5361\u3002'},
null);f.createProperty("currentId",function(a){f.imageUrl=c[a].url||c[a].defaultUrl;f.imageName=c[a].name;var b=document.querySelector("#mpopupForm .btn-line .pre");b.disabled=a>0?false:true;b.style.opacity=b.disabled?0.3:1;b.style.visibility=b.disabled?"hidden":"visible";b=document.querySelector("#mpopupForm .btn-line .next");b.disabled=a<c.length-1?false:true;b.style.opacity=b.disabled?0.3:1;b.style.visibility=b.disabled?"hidden":"visible"},null);f.checkCompelete=function(){for(var a=true,a=0,b=
c.length;a<b;a++)if(!c[a].url)break;a=true;document.querySelector("#mpopupForm .btn-line .ok").style.display=a?"inline-block":"none"};f.prePic=function(){document.querySelector("#mpopupForm .btn-line .pre").disabled||f.currentId--};f.nextPic=function(){document.querySelector("#mpopupForm .btn-line .next").disabled||f.currentId++};f.changePic=function(){var a=null;if(typeof mucard!="undefined"&&mucard.useCustomImage)setTimeout(function(){mucard.useCustomImage(function(b){if(b.status==0){if(a=b.url)f.imageUrl=
a,c[f.currentId].url=a,f.checkCompelete()}else alert("\u5728\u83b7\u53d6\u56fe\u7247\u6570\u636e\u65f6\u51fa\u9519\uff01\u9519\u8bef\u4fe1\u606f\uff1a"+b.desc)},{})},500);else if(confirm("\u7531\u4e8e\u6d4f\u89c8\u5668\u7684\u9650\u5236\uff0c\u60a8\u9700\u8981\u4e0b\u8f7d\u5b89\u88c5\u6728\u7599\u7629\u8d3a\u5361\u5e94\u7528\u624d\u80fd\u8fdb\u884c\u56fe\u7247\u5b9a\u5236\u3002\u60a8\u7684\u670b\u53cb\u6536\u5230\u8d3a\u5361\u540e\u4e0d\u9700\u8981\u5b89\u88c5\u4efb\u4f55\u5e94\u7528\u5c31\u53ef\u4ee5\u89c2\u770b\u8d3a\u5361\u3002\u60a8\u9700\u8981\u73b0\u5728\u5b89\u88c5\u8d3a\u5361\u5e94\u7528\u5417\uff1f")){var b=
navigator.userAgent.toLowerCase(),d=b.indexOf("android")>-1,b=parseFloat(b.slice(b.indexOf("android")+8));d&&b<3?location.href="install.html":window.open("install.html")}if(a)f.imageUrl=a,c[f.currentId].url=a,f.checkCompelete()};f.submit=function(){f.visible=false;for(var g=a.split("&"),e=0;e<c.length;e++)c[e].url&&g.push(c[e].id+"="+JSON.stringify({u:c[e].url,l:c[e].clipLeft,t:c[e].clipTop,w:c[e].clipWidth,h:c[e].clipHeight}));a=g.join("&");b(a);d.callback()};f.cancel=function(){f.visible=false};
f.currentId=0;f.checkCompelete()})()}else b(a)}},finalizeCustomParameters=function(a,d){customImage(a,d,function(a,c){var c=c||{},d=encodeURIComponent(Base64.encode(decodeURIComponent(a))),e=window.location.search;e&&(e=e.substr(1));for(var f=e.split("&"),e="",g=f.length-1;g>=0;g--)f[g].toLowerCase().indexOf("custom=")===0?f.splice(g,1):c.receiptCard&&f[g].toLowerCase().indexOf("hash=")==0?f.splice(g,1):e+=(e.length>0?"&":"")+f[g];f="";e&&(f="&");d=window.location.href.split("?")[0]+"?"+e+f+"custom="+
d;c.receiptCard?(d=encodeURIComponent(d),MugedaCard.makeRequest("http://weika.mugeda.com/server/invite_card.php/custom","GET",{redirect:d,"public":c["public"]?0:1,crid:gup("crid")},true)):window.open(d,"_self")})},data={},defineCustomParameters=function(a,d){MugedaCard.data=data=MugedaCard.data||{};for(var b=0;b<d.length;b++)for(var c=d[b],h=c.formName||(new Date).getTime()+""+MugedaCard.sum++,e=c.mugedaObj,c=data[h]={des:c.formDescription,userUndefined:c.userUndefined,obj:(data[h]?data[h].obj:[])||
[]},h=0;h<e.length;h++){var f=e[h].name,g=e[h].attribute;if(g=="receipt")c.type=g;else if(g!="data"){for(var f=f.split("/"),i={scene:a},j=0;j<f.length;j++)if(i.scene)i=i.scene.getObjectByName(f[j]);else throw"getObjectByName error!";if(i)i.cardRefParam=g,c.obj.push(i)}}if(Mugeda.getMugedaObject().evt)Mugeda.getMugedaObject().evt.stopLoad=true;activateCustomParameters()},activateCustomParameters=function(){var a=window.location.href.split("?"),d=function(){for(var a in MugedaCard.data){var b=MugedaCard.data[a];
!b.handled&&b.userUndefined&&b.userUndefined()}};location.search.indexOf("&custom=")==-1&&window.mucard==null&&d();if(a.length>1&&a[1]){for(var a=a[1].split("&"),b=0,c=0;c<a.length;c++){var h=a[c].split("=");if(h.length>1&&h[0].toLowerCase()=="custom"){if(!h[1]){d();break}for(var a=Base64.decode(decodeURIComponent(h[1])).split("&"),e={},c=0;c<a.length;c++)h=a[c].split("="),h.length==2&&(e[h[0]]=h[1]);for(name in e)if(name[0]!=="_"&&(a=MugedaCard.data[name],a==null&&typeof name=="string"&&name.length>=
5&&name.indexOf("form")==0&&(a=name.replace("form",""),a=a.substr(0,1).toLowerCase()+a.substr(1),a=MugedaCard.data[a]),a&&(a.handled=true,a))){a.value=e[name];for(c=0;c<a.obj.length;c++){var f=a.obj[c];f.cardRefParam=="image"||f.cardRefParam=="signature"||f.cardRefParam==="masked"?(b++,function(){var a=new Image,c=f,d;try{d=JSON.parse(e[name])}catch(g){setTimeout(function(){throw"error when parse card custom param: "+encodeURIComponent(location.href);});return}a.src=d.u;a.onload=function(){var e=
new Image;e.src=c.src;e.onload=function(){var e=c.dom,g=d.w,h=d.h,i=c.width/g,C=c.height/h,E=a.width*i,t=a.height*C,r=d.l*i,s=d.t*C,n=document.createElement("div");c.dom.parentElement.replaceChild(n,c.dom);c.oriSrc=c.src;n.className=e.className;n.style.cssText=e.style.cssText;f.cardRefParam=="image"||f.cardRefParam=="masked"?(n.appendChild(e),e.setAttribute("style",null),e.className="",e.style.width=E+"px",e.style.height=t+"px",e.style.clip="rect("+s+"px "+(r+g*i)+"px "+(s+h*C)+"px "+r+"px)",e.style.position=
"absolute",e.style.marginLeft=-r+"px",e.style.marginTop=-s+"px",c.src=a.src):f.cardRefParam=="signature"&&(n.style.cssText+="background-image: url("+a.src+");background-size:"+E+"px "+t+"px;background-position: "+-r+"px "+-s+"px;");c.dom=n;--b==0&&Mugeda.getMugedaObject().evt&&Mugeda.getMugedaObject().evt.goOnLoad()}};a.onerror=function(){--b==0&&Mugeda.getMugedaObject().evt.goOnLoad()}}()):f[f.cardRefParam]=e[name]}}d();break}}Mugeda.getMugedaObject().evt&&b==0&&Mugeda.getMugedaObject().evt.goOnLoad()}else Mugeda.getMugedaObject().evt&&
Mugeda.getMugedaObject().evt.goOnLoad();var g=gup("t"),g=gup("t")||0,i=function(){if(!window.MugedaTracker)return setTimeout(i,1E3);MugedaTracker.fireEvent({category:"\u5fae\u5361",action:"\u6253\u5f00",label:"f="+g+"&i="+AniObj.getMyGaTrackId()+"&in="+AniObj.envir.getEnvirName()+"&t="+(new Date).getTime(),value:0})};i()};
AniObj.envir=function(){var a={},d=navigator.userAgent.toLowerCase();a.isWeixin=function(){return d.match(/MicroMessenger/i)=="micromessenger"};a.isApp1=function(){return window.mucard!=null};a.isApp2=function(){return d.indexOf("mugedacardandroidwebview_v1.5")>-1};a.getEnvirName=function(){return a.isWeixin()?"weixin":a.isApp1()?"app1":a.isApp2()?"app2":"other"};return a}();
var prevFormHolder=null,updateForm=function(){var a=document.querySelectorAll(".popupForm");if(a&&a[0]&&prevFormHolder!=a[0]&&(prevFormHolder=a[0],a[0].style.position="absolute",document.querySelectorAll("form")))for(name in data){var d=data[name],a=d.value,d="_mcp_"+escape(d.des||"");if((d=document.getElementById(d))&&a!=void 0)d.value=a}setTimeout(updateForm,1E3)};updateForm();
function audioPack(a){this.url=a;this.audioObj=void 0;var d=this;Object.defineProperty(this,"loop",{set:function(a){d.audioLoop=a;d.audioObj&&(d.audioObj.loop=a)},get:function(){return 1==d.audioLoop}})}audioPack.prototype.cacheAudio=function(a){this.createAudioObject();this.cb=a;this.loadStatus==0?this.audioObj.load():this.loadStatus==2&&this.cb&&this.cb()};
audioPack.prototype.play=function(){this.createAudioObject();if(2==this.loadStatus)this.audioObj.play();else{var a=this,d=function(){a.audioObj.play();a.audioObj.removeEventListener("canplay",d)};this.loadStatus==0&&(this.audioObj.load(),this.audioObj.addEventListener("canplay",function(){d()}))}setTimeout(function(){a.pause()},9E4)};audioPack.prototype.pause=function(){this.audioObj.pause()};
audioPack.prototype.createAudioObject=function(){if(!this.audioObj)this.audioObj=new Audio,this.audioObj.preload="none",this.audioObj.loop=1==this.audioLoop;var a=this;this.audioObj.addEventListener("canplay",function(){a.loadStatus=2;a.cb&&a.cb()});if(-1==this.audioObj.src.indexOf(this.url))this.audioObj.src=this.url,this.loadStatus=0};audioPack.prototype.cacheAudio=function(a){this.createAudioObject();if(this.loadStatus==0)this.audioObj.load(),this.loadStatus=1;if(a)this.cb=a};
var loadAudio=function(a,d){d=d||{};d.cache=false;d.callback=d.callback||function(){};var b=new audioPack(a);d.callback(b);return b},weiParam={};window._mrmcp&&(weiParam={img_url:_mrmcp.thumb,title:_mrmcp.title,desc:_mrmcp.description});
defineWechatParameters=function(a){for(item in a)weiParam[item]=a[item];weiParam.success_share_callback_report=function(a){window.rpWX&&window.rpWX("share",a);(weiParam.success_share_callback||function(){})(a)};weiParam.defined=true;try{bindWeiEvent()}catch(d){}typeof mucard!="undefined"&&mucard.share&&mucard.share(weiParam.title||"\u6728\u7599\u7629\u8d3a\u5361",weiParam.desc||"\u8bf7\u5b9a\u4e49\u8d3a\u5361\u63cf\u8ff0",weiParam.img_url||"http://cdn-cn.mugeda.com/weixin/card/i/card_logo_default.jpg")};
document.addEventListener("WeixinJSBridgeReady",function(){weiParam.defined&&bindWeiEvent()});function gup(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");a=RegExp("[\\?&]"+a+"=([^&#]*)").exec(window.location.href);return a==null?"":a[1]}
var bindWeiEvent=function(){function a(){return location.href.indexOf("preview_css3.html")>-1?location.href.substr(0,location.href.length-location.search.length-location.hash.length)+"?custom="+gup("custom")+"&id="+gup("id")+"&audio="+gup("audio"):location.href.substr(0,location.href.length-location.search.length-location.hash.length)+"?t="+AniObj.getMyGaTrackId()+"&custom="+gup("custom")+"&crid="+gup("crid")+(gup("audio")?"&audio="+gup("audio"):"")+(gup("hash")?"&hash="+gup("hash"):"")+(gup("s")?
"&s="+(parseInt(gup("s"))+1):"&s=1")}if(typeof WeixinJSBridge=="undefined")throw"I cannot find WeixinJSBridge";WeixinJSBridge.on("menu:share:appmessage",function(){WeixinJSBridge.invoke("sendAppMessage",{appid:"",img_url:weiParam.img_url||"http://cdn-cn.mugeda.com/weixin/card/i/card_logo_default.jpg",img_width:weiParam.img_width||128,img_height:weiParam.img_height||128,link:typeof weiParam.url_callback=="function"?weiParam.url_callback:a(),desc:weiParam.fdesc||weiParam.desc||"\u8bf7\u5b9a\u4e49\u8d3a\u5361\u63cf\u8ff0",
title:weiParam.ftitle||weiParam.title||"\u6728\u7599\u7629\u8d3a\u5361"},function(a){if(a.err_msg=="send_app_msg:confirm"||a.err_msg=="send_app_msg:ok")(weiParam.success_share_callback_report||function(){})("send"),MugedaTracker.fireEvent({category:"\u5fae\u5361",action:"\u8f6c\u53d1",label:"i="+AniObj.getMyGaTrackId()+"&t="+(new Date).getTime(),value:0})})});WeixinJSBridge.on("menu:share:timeline",function(){WeixinJSBridge.invoke("shareTimeline",{appid:"",img_url:weiParam.img_url||"http://cdn-cn.mugeda.com/weixin/card/i/card_logo_default.jpg",
img_width:weiParam.img_width||128,img_height:weiParam.img_height||128,link:typeof weiParam.url_callback=="function"?weiParam.url_callback:a(),desc:weiParam.fsdesc||weiParam.desc||"\u8bf7\u5b9a\u4e49\u8d3a\u5361\u63cf\u8ff0",title:weiParam.fstitle||weiParam.title||"\u6728\u7599\u7629\u8d3a\u5361"},function(a){if(a.err_msg=="share_timeline:confirm"||a.err_msg=="share_timeline:ok")(weiParam.success_share_callback_report||function(){})("share"),MugedaTracker.fireEvent({category:"\u5fae\u5361",action:"\u5206\u4eab",
label:"i="+AniObj.getMyGaTrackId()+"&t="+(new Date).getTime(),value:0})})});if(!weiParam.binded)weiParam.binded=true};window.MugedaCard={};MugedaCard.finalizeCustomParameters=finalizeCustomParameters;MugedaCard.defineCustomParameters=defineCustomParameters;MugedaCard.defineWechatParameters=defineWechatParameters;MugedaCard.data=data;MugedaCard.sum=0;
MugedaCard.MugedaUrl=function(a){var d={Username:4,Password:5,Port:7,Protocol:2,Host:6,Pathname:8,URL:0,Querystring:9,Fragment:10},b={},c={},h=function(a){return function(){return c[a]}},e;for(e in d)c[e]="",b["get"+e]=h(e);if(a=/^((\w+):\/\/)?((\w+):?(\w+)?@)?([^\/\?:]+):?(\d+)?(\/?[^\?#]+)?\??([^#]+)?#?(\w*)/.exec(a))for(e in d)typeof a[d[e]]!="undefined"&&(c[e]=a[d[e]]);var d=c.Querystring.split("&"),f={};for(e=0;e<d.length;e++)a=d[e].split("="),a.length==2&&(f[a[0]]=a[1]);b.getQueryObj=function(){return f};
b.getQuerystring=function(){var a=[],b;for(b in f)a.push(b+"="+f[b]);return a.join("&")};b.setFragment=function(a){c.Fragment=a};b.getURL=function(){var a="";c.Protocol&&(a+=c.Protocol+"://");if(c.Username||c.Username)a+=c.Username+":"+c.Password+"@";c.Host&&(a+=c.Host);c.Port&&(a+=":"+c.Port);c.Pathname&&(a+=c.Pathname);b.getQuerystring()&&(a+="?"+b.getQuerystring());c.Fragment&&(a+="#"+c.Fragment);return a};return b};MugedaCard.MugedaUrl.current=new MugedaCard.MugedaUrl(location.href);
MugedaCard.makeRequest=function(a,d,b,c,h){if(c){c=document.createElement("form");c.action=a;c.method=d;for(var e in b||{})a=document.createElement("input"),a.type="hidden",a.name=e,a.value=b[e],c.appendChild(a);c.submit()}else{e=[];for(item in b)e.push(item+"="+b[item]);e=e.join("&");var f=new window.XMLHttpRequest;f.onreadystatechange=function(){if(f.readyState==4)if(f.onreadystatechange=null,clearTimeout(g),f.status>=200&&f.status<300||f.status==304){var a=f.responseText;try{h(null,JSON.parse(a))}catch(b){h(b,
null)}}else h("err",null)};f.open(d,a+(d.toLowerCase()=="get"?"?"+e:""),true);f.setRequestHeader("Content-Type","application/x-www-form-urlencoded");var g=setTimeout(function(){f.onreadystatechange=null;f.abort()},1E4);f.send(d.toLowerCase()=="post"?e:null)}};
MugedaCard.showAudioControl=function(a,d,b){var c=a.getObjectByName(d);if(c.src){var h=c.play;c.play=function(){c.muted=false;h.call(c);m("load");setTimeout(function(){j=="load"&&m("stop")},3E3);c._playing=true};var e=c.pause;c.pause=function(){c._playing=false;c.muted=true;e.call(c)};var d=function(b,c,d){d=new MugedaCss3.aObject({guid:Mugeda.guidGen(),type:2005,param:{imageSrc:d||"",rawWidth:b||32,rawHeight:c||25,left:0,right:b,top:0,bottom:c,scaleX:1,scaleY:1,rotate:0,lineWidth:1,alpha:1,width:b,
height:c}});a.appendChild(d);d.width=b;d.height=c;d.top=-80;d.left=275;return d},f=d(36,22,"close_button.png");f.dom.addEventListener("load",function(){f.setSrc?(f.top=8,f.dom.style.cssText+="position: absolute; left:0; top: 0",f.dom.setAttribute("data-audio-icon",1),j&&m(j)):(f.setSrc=true,f.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAWCAYAAACosj4+AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OEQxQjlEMkZBMzc0MTFFM0E3NEI4OTcyREFGRTI1QUUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OEQxQjlEMzBBMzc0MTFFM0E3NEI4OTcyREFGRTI1QUUiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4RDFCOUQyREEzNzQxMUUzQTc0Qjg5NzJEQUZFMjVBRSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4RDFCOUQyRUEzNzQxMUUzQTc0Qjg5NzJEQUZFMjVBRSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pvx6Om4AAASDSURBVHjazFZ/SFtXFD4v5uWHUZfGH5k2plZni40JiXMJOusPlK5GXXXTLXSiTnG1rBQZKEREKCrYIUr1j41SWlhXHK6bMhGF0daxdVhZlQ1di1rXGLRuJDqfiTE2yd151konCnuVlh348l7evffxve+c+91DEULg/xS86Oho2I76+vqtCRaLBXJzc6G2tvYtp9N5DR+9/9JZlpeXA6vc7OwsKBQKnsFgOMMwjIs8CQYRxo6/CPB2IiSVSmFxcRFSU1NBLpdXDQwMtAYGBoo2h2lEwEtVKD8/HzQaDWi12kqbzbZK/h1ORJRUKISKTSXVWi1ERESkoIpjPkL6KsrKJMdTUiAnPX0De1aot7cX3G53yeDgYFtwcLB4+/ja2trGlXpaiCIRzM/P5w7dvavFZ7lFpaVNS04nsLNcHg8nMfhbN3w+YFrEPp/PDws7v6+vrwPTtWNqlpaWKPwcnoOQIvz7SbVafXN8ePh176lTYDeZ4JjJVBWand3nunXrphiV4hzh4eHRIyMjPZieBwsLC384HA432T2cdrs9CpfFHcvM7Geqq4lVJCL3KYoZBli+A+C5r1CQeb1+6E+jUcQ0NnJKGRsH8vLyviT/PZ7U0L59kY1C4Z05iiKOwkLy+/nz/WqpNOMowHc/A5BfEVM6XYetvZ3HtYZewzQd5qrq12Vlke+53fE/SSRuy7lz67G1tfFhev1DlG5ZTlHAw6JfGRv7kC+XGzgZI8LveXZiltdrwnIVtjgc339z794sFqPyUkDA1RaAYk9Ojie8vR18aA9r09NHuRIim+AU9pmZGBfAX+MAP1htthXS1QWBAwNv9gJMf67X/xZcXLzxpR67XcaV0POFTDYjxN8MPv+wrLOTdpw8CdMuV38DwNkZn4+B0VF4zLpoWJiNMyHc8hRXPiKNpltM06Te4yk+MTFxiGRnLw8pFGftfn6Tb/D5+1cuXGB9yiGMibnNmdDk5OQaHpycCD3w+X78JTT0Uhhye1UiEbh1uql1gUD8ttdbknTx4sFHPT0QpFJdWR0ZGebyXlaZWMRHOp1Oq1ar/T0ej1ClUoXW1dUpd1mzilAJaNqSkZT08fXExE4vOjszNweO9XUGC1kiVCr9BLGxo+iymeKoqL8DL18GripFIrQIDeIE4guz2fxwNx9CA2WNUVNgMt1eYBjftzU1VxspqqYjIGB4wWwmzPg4udbc/MEguvSN0lLOxrg92M1hRHQ1NDRYdiKE59ZBmqY1/iJRS0ll5ZlDBgNbiPRn3d2D7ISJqakbxwsK+O+ePg3vVFTsmdDTFiMP8VVTU5N1G6FVPFyjsEVhlRVIZTLYr1TSISEhnewgkp1NTk6OiTtyBOLV6g3smVBRURFkZWUJ8LaANeW2tra5Zwg9RhwICgp6dskriOb09PQrRqNRu/19eyaE7Sq4XC6Ii4tjm7JCxPXW1tZH2JIQq9XagwsF/v7+IJFIICEhAXAz8BDBrIOgUiDEYwNTuoU9E2JfmpaWxravG5bD9myIT7EtqUJlJImJifCiWth/BBgAGnzh/Lti8S4AAAAASUVORK5CYII=")});
var g=d(36,22,"close_button.png");g.dom.addEventListener("load",function(){g.setSrc?(g.top=8,g.dom.style.cssText+="position: absolute; left:0; top: 0",g.dom.setAttribute("data-audio-icon",1),j&&m(j)):(g.setSrc=true,g.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAWCAYAAACosj4+AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RERCNkFBMzBBMzc0MTFFMzk4NzRENEEwRUIxQjUzN0UiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RERCNkFBMzFBMzc0MTFFMzk4NzRENEEwRUIxQjUzN0UiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpEREI2QUEyRUEzNzQxMUUzOTg3NEQ0QTBFQjFCNTM3RSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpEREI2QUEyRkEzNzQxMUUzOTg3NEQ0QTBFQjFCNTM3RSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pt3X9zcAAAP1SURBVHjazFZZSFtZGD5JTDSLa7TimLaOZdwNURRH3FuhjAs6qDMg0YIiVGgt+CAIKiIKZer41AffiqHFSgsVClUQX4TU0bFYHAaKQce4JOLGRE1icLn9/lstrVTaXKL0h+/ee8659/Dd7/ybiOM49j2ZODIykp1GS0vLxxfMZjMrKipiTU1NN+12+xNM/X7hLGtqahgpt7i4yDQajTgtLe3O9va2k/tg28AlWj8PiL9EKCAggG1tbbHs7GwWGhp6e2hoqNvX19fneFkKqC5UodLSUqbVaplOp6vb2NhwcJ+bHYgICgpitbW1/F8lJCSw8PDwDKg4jfHL6upqZWJiIktOTvaMQoODg8zlclUPDw/3qNVq+en1vb09/i4Sifi7l5eXbGVlRT81NaXDsKisrKxzZ2fn47ogw6YsMDBQ7u/vr0pKStIvLy//z33Z7BaL5UcoJNbr9ZUY/9vR0XGLiMTExLwGMXrH1djYeD06OtpthXgLCwuLnJycfIHjmVtdXf1vd3fXxZ1t9s3NzQj8fWJeXt4IlOQODw+tOOafsVVtfX29mV4aGxt7FhcXJ4jQ1eLi4sfctxvvQ/juCvBna2urhSaNRuNDkIxSqVQD+ClufX3dYjAYooUQulFYWPi3u4RCQkKYQqFIxv2VyWSi+Y309PR47Hevt7d3F6pxs7OzvwlxaokQn6OUEBUV9RZKGEdHRx2YUldVVZFyMxMTExaxWMxAVuO2LwPcMdyy6elp5nA4jvD4zmq1EiFFVlZWEIJjwWaz7RznswAhhATZ/Pz8yeM+IpOPbz8/P5tMJjuUSqX8+OjoyElKuVXLjkPe7YQBf6HoZCDwQ2pqKilxMDMzYwIJZXx8fDB8iLK91e3iShc43x4Kp1sf+vj4sIODAwUiND8zM5P8cKS9vd2EpBlTUlKiwXHaxsfH/xGi/k/AAyTDEaR8Y2Vl5VRXV5f5a1GGo5CkpKTUQQV+cmBg4BfaLCcnx0BjZO2xjIwMkZCwJ5UuA5T2tUAJYGhubl44ixASKEWTtry8/K+1tTWur6/vAfyGyeXy6yDCM2xoaKiizQVl6lNG8hcA/W1tbeazSgcIaEHgPlS9i5LBJBJJeH9//xt6YW5ubhTFVeIpQictRjHwtLOzc+kUIQf8JAIRTcrKKLJR6aXIOQ9pEWQXkaOuoY8ikp4hVFFRwfLz82V4/BV41tPTs/IJoX3gKkL800/8ga7c3NxHBQUFupNJRKBnCKFdZU6nk8XGxlJTVg487+7utlIhXVpaeoEPZSgbTKlU8j0PjkcMqCmDBAcHM29vb0Y+RfAIIdoU0ULtKx/h1LMBf6Dfvg1llIgudl4t7HsBBgCzULCMcQhmvwAAAABJRU5ErkJggg==")});
var i=d(36,22,"close_button.png");i.dom.addEventListener("load",function(){i.setSrc?(i.top=8,i.dom.style.cssText+="position: absolute; left:0; top: 0",i.dom.setAttribute("data-audio-icon",1),j&&m(j)):(i.setSrc=true,i.src="data:image/gif;base64,R0lGODlhJAAWAMQfAFhYWPz8/HJycrS0tPn5+e7u7rq6upaWloqKiuHh4a+vr9ra2unp6fT09Kqqqv+TMqNOALlcAOp4APh2AMZiANVqAP+PFvf398/Pz2hoaKWlpXt7e9HR0fLy8v///////yH/C05FVFNDQVBFMi4wAwEAAAAh/wtYTVAgRGF0YVhNUDw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QURCRkU2MzNBMzczMTFFM0I3REQ4NTYxMUE2QjEzMzkiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QURCRkU2MzRBMzczMTFFM0I3REQ4NTYxMUE2QjEzMzkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpBREJGRTYzMUEzNzMxMUUzQjdERDg1NjExQTZCMTMzOSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpBREJGRTYzMkEzNzMxMUUzQjdERDg1NjExQTZCMTMzOSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgH//v38+/r5+Pf29fTz8vHw7+7t7Ovq6ejn5uXk4+Lh4N/e3dzb2tnY19bV1NPS0dDPzs3My8rJyMfGxcTDwsHAv769vLu6ubi3trW0s7KxsK+urayrqqmop6alpKOioaCfnp2cm5qZmJeWlZSTkpGQj46NjIuKiYiHhoWEg4KBgH9+fXx7enl4d3Z1dHNycXBvbm1sa2ppaGdmZWRjYmFgX15dXFtaWVhXVlVUU1JRUE9OTUxLSklIR0ZFRENCQUA/Pj08Ozo5ODc2NTQzMjEwLy4tLCsqKSgnJiUkIyIhIB8eHRwbGhkYFxYVFBMSERAPDg0MCwoJCAcGBQQDAgEAACH5BAUKAB8ALAAAAAAkABYAAAXI4CeOZGmeaPothKe+auB0Xv1CEFw6RW2nOJxOpOj5XKVIRBTMfR4PlYJx/I2USqYTCjVdGgNqNZDEmrjRUWJRYDSqNXIZ1VUj4PAhyiDAV0kUFDAWFiJ8fkcjgYEqhIQfh4hWi4IpjoWRkoCVjYWQfZJIeiUGAG+aJRUVKBMTJAsCGQgbB36pqqslra0jAQkYHAoAd2O3qiISEiK7riYBA8PFt8jJyh+8KATQtYkp1dYwAcLcVijJowQOAAcEPaNDFwoCGg3vJiEAIfkEBQoAHwAsEQACABIAEgAABVLgJ45iFJFoapopSVHlKkIQ+r7xTNfjDaM7Xu+XorWOrUoFOXo8Pkol0+mMLpHUp5T5cXK5EsnRYkGFwykymXQWfyYTkbrMdsPhcvrxHv+K8C0hACH5BAUKAB8ALBEAAgASABIAAAVS4CeOIkWRaGqaKVlV5SpGEfq+8UzX4w2jO17vl6K1ji2JBDmCQD5KJdPpjC6R1KeU+XFyuZPJ8fFAhcMpMpl0Fn8sFpG6zHbD4XL68R7/ivAtIQAh+QQFCgAfACwRAAIAEgASAAAFUuAnjmJVkWhqmikpSeUqUhT6vvFM1+MNozte75eitY6tyQQ5ikQ+SiXT6YwukdSnlPlxcrkWyxECQYXDKTKZdBZ/Hg+Rusx2w+Fy+vEe/4rwLSEAIfkEBQoAHwAsEQACABIAEgAABVLgJ46iJJFoapopOU3lKlYV+r7xTNfjDaM7Xu+XorWOLYsFOaJQPkol0+mMLpHUp5T5cXK5j8cxEkGFwykymXQWfyAQkbrMdsPhcvrxHv+K8C0hACH5BAUKAB8ALBEAAgASABIAAAVS4CeO4jSRaGqaKWlZ5SpKEvq+8UzX4w2jO17vl6K1jq3HAzmqVD5KJdPpjC6R1KeU+XFyuRDIkUJBhcMpMpl0Fn8iEZG6zHbD4XL68R7/ivAtIQAh+QQFCgAfACwRAAIAEgASAAAFUuAnjqJlkWhqmin5POUqThP6vvFM1+MNozte75eitY4tCAQ5kkg+SiXT6YwukdSnlPlxcrmRyLFSQYXDKTKZdBZ/KBSRusx2w+Fy+vEe/4rwLSEAIfkECQoAHwAsEQACABIAEgAABVLgJ47i85BoapopCUHlKloW+r7xTNfjDaM7Xu+XorWOrUgEOZpMPkol0+mMLpHUp5T5cXK5FMpRIkGFwykymXQWfyoVkbrMdsPhcvrxHv+K8C0hADs=")});
var j=null,m=function(a){switch(a){case "stop":b?(g.visible=false,f.visible=false):(g.visible=false,f.visible=true);i.visible=false;break;case "play":g.visible=true;f.visible=false;i.visible=false;if(j!=a)c.playTimeout&&clearTimeout(c.playTimeout),c.playTimeout=setTimeout(function(){c.pause()},9E4);break;case "load":g.visible=false,f.visible=false,i.visible=true}j=a},d=function(){i.visible||(f.visible?c.play():c.pause())};f.addEventListener("inputend",d);g.addEventListener("inputend",d);m("stop");
var y=function(){var a=c.currentTime,b=function(){c.currentTime!=a?(m("play"),c._playing=true):setTimeout(b,100)};setTimeout(b,10)};c.addEventListener("playing",function(){y()});c.autoplay&&y();c.addEventListener("pause",function(){m("stop")})}};
function preDefineCustomParameters(){if(Mugeda&&Mugeda.getMugedaObject()){var a=Mugeda.getMugedaObject();if(a){var d=a.aniData;a.addEventListener("imageReady",function(){var b=getFormObj(d,a),c=[];if(b)for(var h=b.items,b=0,e=h.length;b<e;b++){var f=h[b],g={};g.formName=f.id;g.formDescription=f.description;var i={};i.name=f.id;var j="";switch(f.type){default:j="text"}i.attribute=j;g.mugedaObj=[i];c.push(g)}if(d.customInfo){e=d.customInfo;b=e.audio;h=e.images;window.cardFrame&&window.cardFrame.setOfficialCustom(!!e.isOfficialCustom);
b&&(e=a.scene.getObjectByName(b))&&e.play&&MugedaCard.showAudioControl(a.scene,b,false);f=function(a,b){for(var c=0,d=a.length;c<d;c++){var e=a[c];if(e.name&&e.type==="signature"&&(e=b.getObjectByName(e.name).dom)){var f=parseInt(getComputedStyle(e).width)/2+"px",g=parseInt(getComputedStyle(e).height)/2+"px",f=[f,g].join(" ");e.style.borderTopLeftRadius=f;e.style.borderTopRightRadius=f;e.style.borderBottomLeftRadius=f;e.style.borderBottomRightRadius=f;e.style.overflow="hidden"}}};if(h&&h.length){b=
0;for(e=h.length;b<e;b++){var i=h[b],g=i.name,j=i.type,m=i.group,y=i.sym_name;g&&j&&(i=[{name:g,attribute:j}],function(b,d,e,f){c.push({formName:b,formDescription:"",userUndefined:function(){if(d){var b=a.scene,c=b.getObjectByName(e);if(e&&c&&c.scene)b=c.scene;if(b=b.getObjectByName(d))b.visible=false}},mugedaObj:f})}(g,m,y,i))}}if(h){e=[];b=0;for(j=h.length;b<j;b++)i=h[b],(g=i.name)&&a.scene.getObjectByName(g)&&e.push(i);f(e,a.scene)}}defineCustomParameters(a.scene,c)})}}}preDefineCustomParameters();
function preMucardAutomation(){if(Mugeda&&Mugeda.getMugedaObject()){var a=Mugeda.getMugedaObject();a&&a.addEventListener("imageReady",function(){var d=a.aniData.metadata;if(d){var b=d.weixinTitle||"",c=d.weixinDesc||"",h;for(h in window.data){for(var e=h.split("/"),f=null,g=0;g<e.length;g++)f=(f||a).scene.getObjectByName(e[g]);e=f?f.text:"";if(e=window.data[h].value||e)f=RegExp("\\{\\{"+h+"\\}\\}","g"),b=b.replace(f,e),c=c.replace(f,e)}h=function(a){for(var b=0,c=a.length;b<c;b++)if(" \u3000\uff0c\u3002\uff0f\uff1b\u2018\u300d\u3001\uff40,.;[]`".indexOf(a[b])===
-1)break;return a.substr(b)};b=b.replace(/\{\{[a-zA-Z0-9]+\}\}/g,"");c=c.replace(/\{\{[a-zA-Z0-9]+\}\}/g,"");b=h(b);c=h(c);h=location.origin;defineWechatParameters({img_url:Mugeda.previewMode?h+d.thumb:a.resDir+d.thumb,img_width:128,img_height:128,desc:c,title:b})}})}}preMucardAutomation();
function getFormObj(a,d){if(a&&a.customInfo){var b=a.customInfo;if(b.flag&&b.object_id&&(b=b.object_id,d&&d.scene&&b&&(b=d.scene.objectHash[b])))if((b=b.data)&&b.param&&b.param.form)return JSON.parse(b.param.form)}};
