<!DOCTYPE html><html><head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="format-detection" content="telephone=no">
    <title>竞拍：{weimicms:$auction.name}</title>
    <style type="text/css">
        * {
            outline: none;
            -webkit-tap-highlight-color: rgba(255, 0, 0, 0);
            vertical-align: baseline;
            font-style: normal;
        }

        body {
            margin: 0;
            padding: 0;
            font-size: 12px;
            font-family: Microsoft Yahei, Arial, Simsun, Helvetica, Segoe UI, sans-serif;
            color: #404040;
            background-color: #FFF;
        }

        img {
            border: 0
        }

        ul, ol, li, dt, dl, dd {
            text-decoration: none;
            list-style: none;
            vertical-align: middle;
            margin: 0;
            padding: 0;
        }

        a,
        a:visited {
            color: #373737;
            text-decoration: none;
        }

        .head {
            position: relative;
            height: 60px;
            width: 100%;
            background-color: #169ADA;
        }

        .head .name {
            font-size: 20px;
            color: #fff;
            line-height: 60px;
            height: 60px;
            text-align: right;
            margin-left: 20px;
            margin-right: 100px;
            overflow: hidden;
        }

        .head .avatar {
            border: 1px solid #D5D4D4;
            padding: 2px;
            background: #fff;
            position: absolute;
            top: 10px;
            right: 10px;
            height: 70px;
        }

        .head .avatar a{
            display: block;
        }

        .head .avatar img {
            width: 70px;
            height: 70px;
        }

        .head .tip {
            padding: 10px 100px 0px 0px;
            text-align: right;
            height: 15px;
            overflow: hidden;
        }

        .saleMain {
            position: relative;
            width: 94%;
            margin: 0 3%;
            margin-top: 40px;
        }

        .saleMain .saleItem {
            padding-top: 13px;
            display: table;
            width: 100%;
            border-top: #eaeae8 solid 1px;
        }

        .saleMain .saleItem:first-child {
            border-top: none;
        }

        .saleMain .saleItem .avatar {
            float: left;
            width: 16%;
            margin-right: 4px;
        }

        .saleMain .saleItem .avatar img {
            border-radius: 1px;
        }

        .saleMain .saleInfo {
            float: left;
            width: 82%;
            margin-bottom: 12px;
        }

        .saleMain .saleInfo .nickname {
            color: #576B95;
            font-weight: bold;
            font-size: 15px;
            position: relative;
        }

        .saleMain .saleInfo .nickname .saleAttr{
            position: absolute;
            top: 0px;
            right: 0px;
        }

        .saleMain .saleInfo .nickname .sellerLevel.lv1 {
            background-position: 0px 0px;
        }

        .saleMain .saleInfo .nickname .sellerLevel.lv2 {
            background-position: 0px -15px;
        }

        .saleMain .saleInfo .nickname .sellerLevel.lv3 {
            background-position: 0px -30px;
        }

        .saleMain .saleInfo .nickname .sellerLevel.lv4 {
            background-position: 0px -45px;
        }

        .saleMain .saleInfo .nickname .sellerLevel.lv5 {
            background-position: 0px -60px;
        }

        .saleMain .saleInfo .nickname .sellerLevel.lv6 {
            background-position: 0px -75px;
        }

        .saleMain .saleInfo .nickname .sellerLevel.lv7 {
            background-position: 0px -90px;
        }

        .saleMain .saleInfo .nickname .sellerLevel.lv8 {
            background-position: 0px -105px;
        }

        .saleMain .saleInfo .nickname .sellerLevel.lv9 {
            background-position: 0px -130px;
        }

        .saleMain .saleInfo .nickname .sellerLevel.lv10 {
            background-position: 0px -145px;
        }

        .saleMain .saleInfo .nickname a,
        .saleMain .saleInfo .nickname a:visited {
            color: #576B95;
            text-decoration: none;
        }

        .saleMain .saleInfo .desc {
            line-height: 20px;
            word-break: break-all;
            margin: 8px 0 5px 0px;
            font-size: 15px
        }

        .saleMain .saleInfo .imgList {
            width: 100%;
            display: table;
        }

        .saleMain .saleInfo .imgList div {
            float: left;
            width: 80px;
            height: 80px;
            margin: 1px;
            background-repeat: no-repeat;
            background-position: center;
            background-size: cover
        }

        .saleMain .saleInfo .imgList div.clickImg {
            opacity: 0.5;
        }

        .saleMain .saleInfo .createTime,
        .saleMain .saleInfo .stateInfo {
            width: 100%;
            height: 26px;
            line-height: 26px;
            padding: 6px 0 2px 0;
        }

        .saleMain .saleInfo .stateInfo.hide {
            display: none;
        }

        .saleMain .saleInfo .createTime .enableReturn {
            vertical-align: middle;
            margin: -2px 0px 0 0;
            height: 16px;
        }

        .saleMain .saleInfo .createTime .freePost {
            vertical-align: middle;
            margin: -2px 0px 0 0;
            height: 16px;
        }

        .saleMain .saleInfo .createTime .hasBzj {
            vertical-align: middle;
            margin: -2px 0px 0 0;
            height: 16px;
        }

        .saleMain .saleInfo .createTime .saleDel,
        .saleMain .saleInfo .createTime .saleToggle {
            margin-left: 5px;
            color: #60729A;
        }

        .saleMain .saleInfo .shareIt,
        .saleMain .saleInfo .likeIt,
        .saleMain .saleInfo .popularity {
            background-position: right 50%;
            background-repeat: no-repeat;
            width: auto;
            height: 26px;
            float: right;
            background-size: 16px;
            padding: 0 22px 0 10px;
            line-height: 26px;
            font-size: 13px;
            color: #999;
            text-indent: 0px;
        }

        .saleMain .saleInfo .shareIt {
            font-size: 13px;
            background-size: 13px;
            padding-right: 15px;
            color: #999;
        }

        .saleMain .saleInfo .shareIt {
            background-image: url({weimicms:$staticPath}/tpl/static/auction/images/shareIcon.png);
        }

        .saleMain .saleInfo .popularity {
            background-image: url({weimicms:$staticPath}/tpl/static/auction/images/popularity.png);
            padding-left: 0px;
        }

        .saleMain .saleInfo .likeBox,
        .saleMain .saleInfo .bidBox {
            background-color: #f6f6f6;
            position: relative;
            padding: 6px 0 0 0;
            text-align: center;
            margin-top: 6px;
            display: table;
            width: 100%;
            max-height: 57px;
        }

        .saleMain .saleInfo .likeBox:after,
        .saleMain .saleInfo .bidBox:after {
            content: '';
            position: absolute;
            border-color: rgba(0, 0, 0, 0) rgba(0, 0, 0, 0) #F0F1F2 rgba(0, 0, 0, 0);
            border-style: solid;
            border-width: 6px;
            height: 0;
            width: 0;
            left: 8px;
        }

        .saleMain .saleInfo .likeBox:after {
            top: -12px;
        }

        .saleMain .saleInfo .likeBox .likeRow,
        .saleMain .saleInfo .bidBox .bidRow {
            float: left;
            overflow: hidden;
            height: 25.9px;
            margin-bottom: 5px;
            margin-left: 5px;
            clear: both;
        }

        .saleMain .saleInfo .likeBox .likeAvatar,
        .saleMain .saleInfo .likeBox .getMoreLike,
        .saleMain .saleInfo .bidBox .bidAvatar {
            height: 25.9px;
            width: 25.9px;
            background-position: center;
            background-repeat: no-repeat;
            background-size: 100%;
            float: left;
            border-radius: 1px;
            margin: 0 0 5px 5px;
        }

        .saleMain .saleInfo .likeBox .likeRow .likeAvatar,
        .saleMain .saleInfo .likeBox .getMoreLike,
        .saleMain .saleInfo .bidBox .bidRow .bidAvatar {
            margin-bottom: 0;
        }

        .saleMain .saleInfo .likeBox .likeRow .likeAvatar:first-child,
        .saleMain .saleInfo .bidBox .bidRow .bidAvatar:first-child {
            margin-left: 0;
        }

        .saleMain .saleInfo .likeBox .getMoreLike {
            margin: 0 0 5px 5px;
            border: 1px solid #9a9da5;
            color: #9a9da5;
            width: 24px;
            height: 24px;
            line-height: 24px;
            text-align: center;
            opacity: 0.8;
        }

        .saleMain .saleInfo .tmpLikeBox {
            display: none;
        }

        .saleMain .saleInfo .stateInfo .state {
            position: relative;
            float: left;
            background-color: #780018;
            color: #FFF;
            padding-left: 10px;
            padding-right: 10px;
        }

        .saleMain .saleInfo .stateInfo .state.end {
            background-color: #CCC;
            color: #FFF;
        }

        .saleMain .saleInfo .stateInfo .state i {
            position: absolute;
            right: -8px;
            color: #780018;
            font-size: 26px;
            line-height: 26px;
            z-index: -1;
        }

        .saleMain .saleInfo .stateInfo .endTime {
            float: right;
        }

        .saleMain .saleInfo .stateInfo .endTime em {
            color: #780018;
            font-size: 16px;
            padding: 0 2px;
        }

        .saleMain .saleInfo .countdownTip{
            clear: both;
            float: right;
            height: 16px;
            line-height: 16px;
            padding-left: 16px;
            background-size: 14px;
            display: none;
        }

        .saleMain .saleInfo .bidBtns {
            width: 100%;
            display: table;
        }

        .saleMain .saleInfo .bidBtns .price {
            display: none;
        }

        .saleMain .saleInfo .bidBtns .bidBtn,
        .saleMain .saleInfo .bidBtns .shareBtnLayer div,
        .saleMain .saleInfo .bidBtns .saleOpenBtn,
        .saleMain .saleInfo .bidBtns .saleEndBtn {
            width: 100%;
            height: 40px;
            color: #fff;
            border-radius: 2px;
            text-align: center;
            line-height: 40px;
            font-size: 16px;
            margin-top: 6px;
            background-color: #06BC07;
        }

        .saleMain .saleInfo .bidBtns .bidBtn.hide {
            display: none;
        }

        .saleMain .saleInfo .bidBtns .saleOpenBtn {
            background-color: #1ab6ef;
        }

        .saleMain .saleInfo .bidBtns .saleOpenBtn em {
            padding: 0 5px;
        }

        .saleMain .saleInfo .bidBtns .saleEndBtn {
            background-color: #ccc;
        }

        .saleMain .saleInfo .bidBtns .updateBid {
            position: relative;
        }

        .saleMain .saleInfo .bidBtns .updateBid.hide {
            display: none;
        }

        .saleMain .saleInfo .bidBtns .shareBtnLayer{
            display: table;
            width: 100%;
        }

        .saleMain .saleInfo .bidBtns .shareBtnLayer div{
            background-color: #1ab6ef;
            width: 49%;
            float: left;
        }
        .saleMain .saleInfo .bidBtns .shareBtnLayer .sendMultiMsgBtn{
            float: right;
        }

        .saleMain .saleInfo .bidBtns .updateBid button {
            position: absolute;
            left: -53px;
            color: #0067BD;
            top: -40px;
            height: 40px;
            width: 50px;
            text-align: center;
            border: none;
            background: none;
            outline: none;
            padding: 0;
            margin: 0;
        }

        .saleMain .saleInfo .bidBtns .updateBid i {
            color: #999;
            font-size: 12px;
            display: block
        }

        .saleMain .saleInfo .bidList {
            background: #F0F1F2;
            width: 99.6%;
        }

        .saleMain .saleInfo .bidList .ddli {
            border-bottom: 1px solid #eaeae8;
            width: 96%;
            margin: 0 2%;
            padding: 7px 0px;
            height: 50px;
            overflow: hidden;
        }

        .saleMain .saleInfo .bidList .ddli:first-child {
            margin-top: 8px;
        }

        .saleMain .saleInfo .bidList .ddli:last-child {
            margin-bottom: 2px;
            border-bottom: none;
        }

        .saleMain .saleInfo .bidList .ddli .state {
            float: right;
            text-align: right;
        }

        .saleMain .saleInfo .bidList .ddli .state .bidTime {
            color: #737373;
            float: right;
            width: 120px;
            margin: 36px 0px 0px -20px;
            position: absolute;
            height: 18px;
            line-height: 18px;
        }

        .saleMain .saleInfo .bidList .ddli .state .bidState {
            width: 100px;
            float: right;
            border-radius: 3px;
        }

        .saleMain .saleInfo .bidList .ddli .state .bidState span {
            display: block;
        }

        .saleMain .saleInfo .bidList .ddli .state .bidState .bidOut {
            width: 100px;
            height: 30px;
            background-image: url({weimicms:$staticPath}/tpl/static/auction/images/out.png?t=1);
            background-position: right center;
            background-size: auto 100%;
            background-repeat: no-repeat;
            margin-top: -2px;
        }

        .saleMain .saleInfo .bidList .ddli .state .bidState .bidLeader {
            width: 100px;
            height: 33px;
            background-image: url({weimicms:$staticPath}/tpl/static/auction/images/leader.png?t=1);
            background-position: right center;
            background-size: auto 100%;
            background-repeat: no-repeat;
            margin-top: -2px;
        }

        .saleMain .saleInfo .bidList .ddli .state .bidState .bidDeal {
            width: 100px;
            height: 38px;
            background-image: url({weimicms:$staticPath}/tpl/static/auction/images/deal.png?t=1);
            background-position: right center;
            background-size: auto 100%;
            background-repeat: no-repeat;
            margin-top: -2px;
        }

        .saleMain .saleInfo .bidList .ddli .avatar {
            float: left;
            width: 50px;
            height: 50px;
            margin-right: 7px;
            position: relative;
        }

        .saleMain .saleInfo .bidList .ddli .avatar img {
            width: 50px;
            height: 50px;
            border: none;
        }

        .saleMain .saleInfo .bidList .ddli .avatar .buyerLevels {
            position: absolute;
            width: 50px;
            height: 13px;
            bottom: 0px;
            left: 0px;
            background-size: 50px auto;
            background-repeat: no-repeat;
        }

        .saleMain .saleInfo .bidList .ddli .avatar .buyerLevels.lv1 {
            background-position: 0px 0px;
        }

        .saleMain .saleInfo .bidList .ddli .avatar .buyerLevels.lv2 {
            background-position: 0px -13px;
        }

        .saleMain .saleInfo .bidList .ddli .avatar .buyerLevels.lv3 {
            background-position: 0px -26px;
        }

        .saleMain .saleInfo .bidList .ddli .avatar .buyerLevels.lv4 {
            background-position: 0px -39px;
        }

        .saleMain .saleInfo .bidList .ddli .avatar .buyerLevels.lv5 {
            background-position: 0px -52px;
        }

        .saleMain .saleInfo .bidList .ddli .avatar .buyerLevels.lv6 {
            background-position: 0px -65px;
        }

        .saleMain .saleInfo .bidList .ddli .avatar .buyerLevels.lv7 {
            background-position: 0px -78px;
        }

        .saleMain .saleInfo .bidList .ddli .avatar .buyerLevels.lv8 {
            background-position: 0px -91px;
        }

        .saleMain .saleInfo .bidList .ddli .avatar .buyerLevels.lv9 {
            background-position: 0px -104px;
        }

        .saleMain .saleInfo .bidList .ddli .avatar .buyerLevels.lv10 {
            background-position: 0px -117px;
        }

        .saleMain .saleInfo .bidList .ddli .bidUser {
            line-height: 25px;
            font-size: 13px;
            font-weight: bold;
            white-space: nowrap;
            color: #576B95;
            float: left;
            width: 50px;
        }

        .saleMain .saleInfo .bidList .ddli .bidUser .name {
            line-height: 20px;
        }

        .saleMain .saleInfo .bidList .ddli .bidUser .name a {
            color: #576B95;
        }

        .saleMain .saleInfo .bidList .ddli .bidUser .price {
            line-height: 20px;
            margin-top: 10px;
            font-size: 15px;
            color: #780018;
        }

        .saleMain .saleInfo .bidList .bidMore {
            text-align: center;
            height: 32px;
            line-height: 32px;
            margin-bottom: 2px;
        }

        .saleMain .saleInfo .moneyInfo,
        .saleMain .saleInfo .moneyInfoExtend,
        .saleMain .saleInfo .moneyInfoPrice {
            font-size: 12px;
            display: table;
            width: 100%;
            margin-top: 7px;
            color: #999;
        }

        .saleMain .saleInfo .moneyInfo div,
        .saleMain .saleInfo .moneyInfoExtend div,
        .saleMain .saleInfo .moneyInfoPrice div {
            float: left;
            width: 45%;
            display: -webkit-box; /* 老版本语法: Safari,  iOS, Android browser, older WebKit browsers.  */
            display: -webkit-flex; /* 新版本语法： Chrome 21+ */
            display: flex; /* 新版本语法： Opera 12.1, Firefox 22+ */
            /*水平居中*/
            /*老版本语法*/
            -webkit-box-pack: center;
            /*新版本语法*/
            -webkit-justify-content: center;
            justify-content: center;
            height: 12px;
        }

        .saleMain .saleInfo .moneyInfo div:nth-child(2) {
            border: 1px solid #cfd1d4;
            border-width: 0 0 0 1px;
        }

        .saleMain .saleInfo .moneyInfoExtend div:nth-child(2) {
            border: 1px solid #cfd1d4;
            border-width: 0 0 0 1px;
        }

        .saleMain .saleInfo .moneyInfoPrice div:nth-child(1) {
            width: 50%;
        }

        .saleMain .saleInfo .moneyInfoPrice div:nth-child(2) {
            border: 1px solid #cfd1d4;
            border-width: 0 0 0 1px;
            width: 50%;
            box-sizing: border-box;
        }

        .saleMain .saleInfo .moneyInfo div span,
        .saleMain .saleInfo .moneyInfoExtend div span,
        .saleMain .saleInfo .moneyInfoPrice div span {
            background-image: url({weimicms:$staticPath}/tpl/static/auction/images/qi.png?t=2);
            background-repeat: no-repeat;
            background-size: 12px;
            text-indent: 15px;
            display: block;
            line-height: 12px;
        }

        .saleMain .saleInfo .moneyInfo div:nth-child(2) span {
            background-image: url({weimicms:$staticPath}/tpl/static/auction/images/jia.png?t=2);
        }

        /*.saleMain .saleInfo .moneyInfo div:last-child span {
        }*/

        .saleMain .saleInfo .moneyInfoExtend div span.yan {
        }

        .saleMain .saleInfo .moneyInfoExtend div span.yikoujia {
            background-image: url({weimicms:$staticPath}/tpl/static/auction/images/yikoujia.png);
            background-size: 29px 12px;
            text-indent: 33px;
        }

        .saleMain .saleInfo .moneyInfoExtend div span.referencePrice {
            background-image: url({weimicms:$staticPath}/tpl/static/auction/images/referencePrice.png);
            background-size: 29px 12px;
            text-indent: 33px;
        }

        .saleMain .saleInfo .moneyInfoPrice div span.referencePrice {
            background-image: url({weimicms:$staticPath}/tpl/static/auction/images/referencePrice.png);
            background-size: 29px 12px;
            text-indent: 33px;
        }

        .saleMain .saleInfo .moneyInfoPrice div span.yikoujia {
            background-image: url({weimicms:$staticPath}/tpl/static/auction/images/yikoujia.png);
            background-size: 29px 12px;
            text-indent: 33px;
        }

        .goShake, .shopEmpty {
            position: absolute;
            top: 85px;
            bottom: 51px;
            display: block;
            width: 100%;
            background-size: 200px auto;
        }

        .shopEmpty {
        }

        .adminMenu {
            position: fixed;
            top: 12px;
            left: 12px;
            width: 32px;
            height: 32px;
            background-size: 100% 100%;
            background-position: center;
            background-repeat: no-repeat;
        }
    </style>
    <?php if($memberNotice != ''){?>
	<script src="{weimicms:$staticPath}/tpl/static/sentiment/js/jquery-2.1.4.min.js"></script>
	<?php }else{?>
	<script type="text/javascript" src="{weimicms:$staticPath}/tpl/static/auction/js/zepto.js?v=0.7.6.1"></script>
	<?php }?>
    <script type="text/javascript">
	window.shareData = {  
		"moduleName":"Auction",
		"moduleID":"<?php echo $auction['id'];?>",
		"imgUrl": "<?php echo $auction['logo'];?>",
		"sendFriendLink": "{weimicms:$f_siteUrl}{weimicms::U('Auction/index',array('token'=>$token,'id'=>$auction['id']))}",
		"tTitle": "<?php echo $auction['wxtitle'];?>",
		"tContent": "{weimicms:$auction['wxinfo']|shareFilter}"
	};
	</script>
	{weimicms:$shareScript}
</head>
<body>
<if condition="$memberNotice neq ''">
    {weimicms:$memberNotice}
</if>
<div id="contentbox">
    <div class="head">
                    <div class="name"><?php echo $fans['wechaname']?$fans['wechaname']:$fans['truename'];?></div>
            <div class="avatar">
                <a href="{weimicms::U('Auction/order',array('token'=>$token))}">
                    <img src="<?php if($fans['portrait']!=''){echo $fans['portrait'];}else{?>{weimicms:$staticPath}/tpl/static/sentiment/images/portrait.jpg<?php }?>">
                </a>
            </div>
            <div class="tip">点击头像进入我的竞拍</div>
            </div>
    <script type="text/javascript">
    var saleId = '',
        lastPost = '',
        lastPostTime = 0,
        saleOpenTimeArr = {},
        saleEndTimeArr = {};

    //格式化数字
    function number_format(n) {
        var ns = n.toString();
        var mm = ns.match(/\d{1,3}(?=(\d{3})+$)/g);
        if (mm == null) return ns;
        mm.push(ns.replace(mm.join(""), ""));
        return mm.join(",");
    }

    //拍卖开始倒计时
    function saleOpenTimeout(key) {
        var openTime = saleOpenTimeArr['time_' + key] - saleOpenTimeArr[key];
        saleOpenTimeArr[key] += 1;
        var hour = parseInt(openTime / 3600);
        var minute = parseInt((openTime - hour * 3600) / 60);
        var sec = openTime - hour * 3600 - minute * 60;

        var saleOpenBtn = $("." + key);
        var updateBid = saleOpenBtn.siblings('.updateBid');
        var bidBtn = saleOpenBtn.siblings('.bidBtn');
        if (openTime <= 0) {
            
        } else {
            saleOpenBtn.html('距离开拍 <em>' + hour + '</em>时<em>' + minute + '</em>分<em>' + sec + '</em>秒');
        }
    }

    //拍卖倒计时
    function saleEndTimeout(key) {
        var endTime = saleEndTimeArr['time_' + key] - saleEndTimeArr[key];
        saleEndTimeArr[key] += 1;
        var hour = parseInt(endTime / 3600);
        var minute = parseInt((endTime - hour * 3600) / 60);
        var sec = endTime - hour * 3600 - minute * 60;
        if (endTime <= 0) {
            location.reload();
        }else if(endTime < 300){
            $("." + key).parent().find('.countdownTip').show();
        }else{
            $("." + key).parent().find('.countdownTip').hide();
        }
        $("." + key + " span").html('<em>' + hour + '</em>时<em>' + minute + '</em>分<em>' + sec + '</em>');
    }

    //出价后显示
    function prependBid(data, sid) {
        var bidTemplate = $("#bidTemplate").html();
        var bidList = $(".sale" + sid + " .bidList");

        for (var index in data.bidList) {
            (function (index) {
                setTimeout(function () {
                    var bidArr = data.bidList[index];
                    var bidLeader = $(".sale" + sid + " .bidLeader");
                    bidLeader.removeClass("bidLeader").addClass("bidOut");

                    var bidHtml = bidTemplate;
                    bidHtml = bidHtml.replace(/\{0\}/g, bidArr.createTime.replace(/^\d*(\d\d)-/, "$1-")).replace(/\{1\}/g, 'src="' + bidArr.headimgurl + '"');
                    if(bidArr.userinfoUri){
                        bidHtml = bidHtml.replace(/\{4\}/g, bidArr.userinfoUri + "#buyer");
                    }else{
                        bidHtml = bidHtml.replace(/\/user\/\{4\}/g, 'javascript:void(0);');
                    }
                    bidHtml = bidHtml.replace(/\{2\}/g, bidArr.nickname).replace(/\{3\}/g, number_format(bidArr.price));
                    bidHtml = bidHtml.replace(/\{5\}/g, 'lv' + bidArr.buyerLevel);
                    bidHtml = bidHtml.replace(/\{6\}/g, bidArr.id);

                    bidList.prepend(bidHtml);
                    $(".sale" + sid + " .bidList .ddli:nth-child(1)").animate({height: "50px"}, 200);
                }, index * 400);
            })(index);
        }
    }

    //用户出价
    function bid(nowBid, lastBid) {
        if (!nowBid) {
            wptAlert("价格输入错误!");
            return;
        }
        if (nowBid < lastBid) {
            wptAlert("出价不能低于领先价!");
            return;
        }
		$.ajax({
			type:"POST",
			url:"{weimicms::U('Auction/toprice',array('token'=>$token))}",
			dataType:"json",
			data:{
				price:nowBid,
				token:'<?php echo $token?$token:0;?>',
				id:<?php echo $auction['id']?$auction['id']:0;?>,
				wecha_id:'{weimicms:$wecha_id}'
			},
			success:function(data){
				if(data.error == 0){
					window.location.href='{weimicms::U("Auction/toprice",array("token"=>$token,"id"=>$auction["id"]))}';
				}else{
					wptAlert(data.msg);
				}
			}
		});
    }

    //刷新最新出价
    function refreshBid(sid, cb) {
        cb = typeof cb == "undefined" ? function () {} : cb;
        var lastBid = $(".sale" + sid + " .bidList .ddli .price").attr("money");
        if (lastBid != undefined) {
            lastBid = parseInt(lastBid.replace(/,/g, ''));
        } else {
            lastBid = 0;
        }

        var nowTime = new Date();
        nowTime = nowTime.getHours() + ':' + (nowTime.getMinutes() < 10 ? 0 : '') + nowTime.getMinutes() + ':' + (nowTime.getSeconds() < 10 ? 0 : '') + nowTime.getSeconds();
        $(".sale" + sid + " .newbidTM").html(nowTime);
		
    }

    function likeBoxSlide(html, likeBox) {
        likeBox.css({display: 'block', overflow: 'hidden'});
        likeBox.html(html);
        likeBox.animate({maxHeight: 316}, 300, function () {
            likeBox.css({display: 'table', overflow: 'visible'});
        });
    }

    var fixednum_extend = {
        tip: function(txt){
            txt = parseInt(txt);
            if(!txt){
                return '';
            }
            var fixedPriceObj = $('.fixednumMain .fixedPrice');
            if(fixedPriceObj.length > 0){
                var fixedPrice = fixedPriceObj.attr('fixedPrice');
                if(txt >= fixedPrice) {
                    return '一口价立即成交！';
                }
            }
            return '';
        }
    };
	var lastBid = 0;
    $(function () {
        //出价按钮
		<?php if($auction['status'] == 0){?>
        $(".saleMain").on("click", ".bidBtn", function () {
            var self = $(this);

            var fixedPrice = $(this).attr("fixedPrice");
            var increase = $(this).attr("increase");
            var bidbzj = $(this).attr("bidbzj");
			$.ajax({
				type:"POST",
				url:"{weimicms::U('Auction/lastprice',array('token'=>$token))}",
				dataType:"json",
				data:{
					token:'<?php echo $token?$token:0;?>',
					id:<?php echo $auction['id']?$auction['id']:0;?>
				},
				success:function(data){
					if(data.error == 0){
						lastBid = data.lastprice;
						$(document.body).trigger("fixednum_view:show", [lastBid, parseInt(fixedPrice), parseInt(increase), parseInt(bidbzj)]);
						return false;
						refreshBid(saleId, function (lastBid) {
							if (typeof lastBid == "undefined") {
								lastBid = $(".sale" + saleId + " .bidList .ddli .price").attr("money");

								if (lastBid == undefined) {
									lastBid = self.siblings(".price").html();
								}
								lastBid = parseInt(lastBid.replace(/,/g, ''));
							}
							$(document.body).trigger("fixednum_view:show", [lastBid, parseInt(fixedPrice), parseInt(increase), parseInt(bidbzj)]);
						});
					}
				}
			});
			
        });
		<?php }?>
        //更新出价按钮
        $(".saleMain").on("click", '.updateBid', function (e) {
            /*var sid = $(this).attr('saleId');
            refreshBid(sid);*/
			location.reload();
        });

        //图片预览
        $(".saleMain").on("click", ".imgList div", function (e) {
            var self = this;
            e.preventDefault();
            $(this).toggleClass("clickImg");
            var imgdiv = $(this).parent('.imgList').find("div");
            var urls = [];
            if (imgdiv) {
                imgdiv.forEach(function (v, k) {
                    var url = $(v).css('backgroundImage').replace('url(','');
					url = url.replace(')','');
                    urls.push(url);
                });
            }
            setTimeout(function () {
                if (urls) {
                    wx.previewImage({
                        current: urls[$(self).index()],
                        urls: urls
                    });
                }
                $(self).toggleClass("clickImg");
            }, 100);
        });

        //分享按钮
        $(".saleMain").on("click", ".shareBtn, .shareIt", function () {
			wptShare();
        });

        //绑定出价事件
        $(document).off('fixednum_view:confirm').on('fixednum_view:confirm', function (e, data) {
			//data.fixedPrice 一口价
			//data.num 出价
			//data.increase 加价
			//data.lastNum 上一个出价
            if((data.fixedPrice > 0 && data.num - data.fixedPrice > 3 * data.increase)
                || (data.fixedPrice > 0 && data.num < data.fixedPrice && data.num - data.lastNum > 3 * data.increase)
                || (data.fixedPrice == 0 && data.num - data.lastNum > 3 * data.increase)) {
                if(buyerLevel > 1 || data.bidbzj > 0 || data.increase < 30) {
                    $(document).off('wptConfirm_view:sure').one('wptConfirm_view:sure', function () {
                        bid(data.num, data.lastNum);
                    });
                    if (data.fixedPrice > 0 && data.num - data.fixedPrice > 3 * data.increase) {
                        wptConfirm('亲，您的出价已远远高于一口价 <br/> 您确认要出价？');
                    } else {
                        wptConfirm('亲，您的出价已超加价幅度的3倍 <br/> 您确认要出价？');
                    }
                } else {
					$(document).off('wptConfirm_view:sure').one('wptConfirm_view:sure', function () {
                        bid(data.num, data.lastNum);
                    });
                    wptConfirm("任性的亲，出价太高了！<br/> 您确认要出价？");
                }
            } else if(data.num - data.lastNum < data.increase){
				wptAlert("每次加价不能小于"+data.increase+"元");
			} else {
                bid(data.num, data.lastNum);
            }
        });

        $('.saleMain').on('click', '.follow', function(e){
            e.preventDefault();
            var self = $(this);
            var data = 'userinfoUri=' + self.attr('userinfoUri') + '&ajax=1';
            $.get('/user/attention', data, function (res) {
                self.animate({"opacity": 0}, 300, function(){
                    self.remove();
                });
            });
        });
    });
</script>

<div class="saleMain">
<div class="saleItem sale">
    <div class="avatar">
        <a href="javascript:;">
            <img src="{weimicms:$auction.logo}" width="90%">
        </a>
            </div>
    <div class="saleInfo">
        <div class="nickname">
            <a href="#">
                <!-- <div class="sellerLevel lv2"></div> -->
                {weimicms:$auction.name}            
			</a>
            <div class="saleAttr">
                        </div>
        </div>

        <div class="desc">
			{weimicms:$auction.info|htmlspecialchars_decode}
		</div>

        <div class="imgList">
			<volist name="pic_list" id="pic">
			<div style="background-image: url({weimicms:$pic.pic})"></div>
			</volist>
		</div>

        <div class="createTime freePost">
			<?php if($auction['postage'] == 0){?>
			<img src="{weimicms:$staticPath}/tpl/static/auction/images/freepost.png" class="freePost">
			<?php }else{?>
			<span style="color:#999">邮费:￥{weimicms:$auction.postage}元&nbsp;&nbsp;</span>
			<?php }?>
			<span style="color:#999">{weimicms:$auction.addtime|date='m月d日',###}</span>
			<div class="shareIt">分享</div>
			<div class="popularity">{weimicms:$auction.pv}</div>
        </div>

        <div id="tmpLikeBox_1508250547W7ZDIm" class="tmpLikeBox"></div>
		<?php if($auction['status'] != 2){?>
        <div class="stateInfo">
            <div class="state"><?php if($auction['status'] == 1){echo '还未开始';}else{echo '正在拍卖';}?><i>◆</i></div>
            <div class="endTime saleEndTime">
                <?php if($auction['status'] == 1){echo '距离开始';}else{echo '距离结束';}?>：<span><em>00</em>时<em>00</em>分<em>00</em></span>
            </div>
            <script type="text/javascript">
                saleEndTimeArr['saleEndTime'] = 1;
                saleEndTimeArr['time_saleEndTime'] = <?php if($auction['status'] == 1){echo ($auction['start'] - time());}else{echo ($auction['end'] - time());}?>;
                saleEndTimeArr['setInterval_saleEndTime'] = setInterval(function () {
                    saleEndTimeout('saleEndTime')
                }, 1000);
            </script>
        </div>
		<?php }?>
		<div class="bidBtns">
			<?php if($auction['status'] == 0){?>
			<?php if($memberNotice != ''){?>
			<style>
			.bidBtn2{
				width: 100%;
				height: 40px;
				padding:7px 20px 7px 20px;
				color: #fff;
				border-radius: 2px;
				text-align: center;
				line-height: 40px;
				font-size: 16px;
				margin-top: 6px;
				background-color: #06BC07;
			}
			</style>
			<a class="bidBtn2" href='#memberNoticeBox' id='modaltrigger_notice'>点击关注/注册</a>
			<?php }else{?>
			<div class="bidBtn" uri="" saleid="" fixedprice="{weimicms:$auction.fixedprice}" increase="{weimicms:$auction.addprice}" bidbzj="0">出价</div>
			<?php }?>
			<?php }elseif($auction['status'] == 2){?>
			<div class="bidBtn">
				<div class="saleEndBtn"><?php if($auction['state'] != 0){echo date('m月d日 H:i',$auction['endtime']);}else{echo date('m月d日 H:i',$auction['end']);}?> 拍卖结束</div>
			</div>
			<?php }else{?>
			<div class="bidBtn">
				<div class="saleEndBtn">出价</div>
			</div>
			<?php }?>
			<?php if($auction['status'] == 0){?>
			<div class="updateBid" saleid="">
				<button>更新<i class="newbidTM"></i></button>
			</div>
			<?php }?>
		</div>
        <div class="moneyInfo">
            <div><span>￥{weimicms:$auction.startprice}元</span></div>
            <div><span>￥{weimicms:$auction.addprice}元</span></div>
        </div>
        <div class="moneyInfoExtend">
			<?php if($auction['referenceprice'] > 0){?>
            <div><span class="referencePrice">￥{weimicms:$auction.referenceprice}元</span></div>
			<?php } if($auction['fixedprice'] > 0){?>
            <div><span class="yikoujia">￥{weimicms:$auction.fixedprice}元</span></div>
			<?php }?>
        </div>
		<!-- bidLeader -->
		<!-- bidOut -->
		<!-- bidDeal -->
		<div class="bidList">
			<volist name="toprice_list" id="pvo" key="pi">
			<div class="ddli" <?php if($pi == 1 && $auction['status'] == 2 && $wecha_id == $pvo['wecha_id']){?>onclick="window.location.href='{weimicms::U('Auction/order',array('token'=>$token))}';"<?php }?>>
				<div class="state">
					<div class="bidTime">{weimicms:$pvo.addtime|date='y-m-d H:i:s',###}</div>
					<div class="bidState"><span class="<?php if($pi == 1 && $auction['status'] == 0){echo "bidLeader";}elseif($pi == 1 && $auction['status'] == 2){echo "bidDeal";}else{echo "bidOut";}?>"></span></div>
				</div>
				<div class="avatar">
					<a href="javascript:;"><img src="<?php if($pvo['portrait']!=''){echo $pvo['portrait'];}else{?>{weimicms:$staticPath}/tpl/static/sentiment/images/portrait.jpg<?php }?>"></a>
					<div class="buyerLevels lv1"></div>
				</div>
				<div class="bidUser">
					<div class="name">
						<a href="javascript:;">{weimicms:$pvo.wechaname}</a>
					</div>
					<div class="price" money="350" bidid="2482101">￥{weimicms:$pvo.price}元</div>
				</div>
			</div>
			</volist>
		</div>
    </div>
</div>

</div>
<style type="text/css">
    .fixednumMask {
        position: fixed;
        width: 100%;
        opacity: 0;
        top: 0px;
        bottom: 0px;
        background-color: #000;
        display: none;
        z-index: 999;
    }

    .fixednumMain {
        position: fixed;
        bottom: -410px;
        left: 0px;
        z-index: 1199;
        background: #F0F0F0;
        width: 100%;
        display: none;
    }

    .fixednumMain .tipBanner {
        height: 42px;
        width: 100%;
        background: #F0F0F0;
        border-top: 1px solid #cacaca;
        font-size: 16px;
    }

    .fixednumMain .tipBanner span.title,
    .fixednumMain .priceBanner span.title {
        line-height: 42px;
        float: left;
        text-indent: 10px;
        min-width: 65px
    }

    .fixednumMain .tipBanner .last,
    .fixednumMain .priceBanner .editTxt {
        float: left;
        width: 60%;
        height: 30px;
        line-height: 30px;
        margin: 6px 0;
        color: #7596D9;
        text-indent: 4px;
        overflow: hidden;
        font-size: 20px;
        font-family: "Helvetica neue", Verdana, Geneva, sans-serif;
    }

    .fixednumMain .tipBanner .close {
        float: right;
        width: 42px;
        height: 42px;
        background-image: url({weimicms:$staticPath}/tpl/static/auction/images/close.png);
        background-repeat: no-repeat;
        background-position: center center;
        background-size: 28px;
    }

    .fixednumMain .tipBanner .finish{
        float:right;
        width:42px;
        height:42px;
        background-size:30px;
        line-height:40px;
        font-size:16px;
        color:#007aff;
    }

    .fixednumMain .priceBanner {
        background: #fff;
        height: 42px;
        line-height: 42px;
        font-size: 16px;
        width: 100%;
        position: relative;
    }

    .fixednumMain .priceBanner .editTxt .hover {
        border-right: 2px solid red;
    }

    .fixednumMain .priceBanner .tips {
        color: #999;
        font-size: 14px;
        margin-right: 10px;
        overflow: hidden;
        height: 42px;
        position: absolute;
        right: 0;
        top: 0
    }
    
    .fixednumMain .btnBanner {
        margin: 0 auto;
        width: 96%;
        padding: 10px 0px;
        display: table;
    }

    .fixednumMain .btnBanner .confirmBtn,
    .fixednumMain .btnBanner .fixedPrice  {
        background: #06BE04;
        padding: 2.5% 0;
        border-radius: 4px;
        width: 66%;
        text-align: center;
        font-size: 18px;
        color: #fff;
        border: none;
        float: left;
        height: 24px;
        line-height: 24px;
    }

    .fixednumMain .btnBanner .fixedPrice {
        background: #01B7F0;
        width: 32%;
        float: left;
        margin-right: 2%;
        font-size: 14px;
        height: 24px;
        line-height: 24px;
    }

    .fixednumMain .btnBanner .confirmBtn:only-child{
        padding: 10px 0;
        width: 100%;
    }

    .fixednumMain .numkey {
        width: 100%;
        background: #fff;
        display: table;
    }

    .fixednumMain .numkey ul {
        padding: 0;
        margin: 0;
    }

    .fixednumMain .numkey ul,
    .fixednumMain .numkey li {
        text-decoration: none;
        list-style: none;
        vertical-align: middle;
    }

    .fixednumMain .numkey ul li {
        width: 33.1%;
        border-bottom: 1px solid #b3b3b3;
        border-right: 1px solid #b3b3b3;
        height: 50px;
        float: left;
        font-size: 28px;
        font-family: "Helvetica neue", Verdana, Geneva, sans-serif;
        text-align: center;
        background: #fff;
    }

    .fixednumMain .numkey ul li:nth-child(3n) {
        border-right: none;
    }

    .fixednumMain .numkey ul li.delete {
        background-image: url({weimicms:$staticPath}/tpl/static/auction/images/backspace.png);
        background-repeat: no-repeat;
        background-position: center;
        background-size: 30px;
        background-color: #D1D5DA;
    }

    .fixednumMain .numkey ul li.othernum {
        background-color: #D1D5DA;
        line-height: 50px;
    }

    .fixednumMain .numkey ul li div {
        color: #000;
    }

    .fixednumMain .numkey ul li span {
        position: relative;
        font-size: 12px;
        top: -18px;
        color: #000;
    }
</style>

<script type="text/javascript">
    var focusEditTxt;

    //格式化数字
    function number_format(n) {
        var ns = n.toString();
        var mm = ns.match(/\d{1,3}(?=(\d{3})+$)/g);
        if (mm == null) return ns;
        mm.push(ns.replace(mm.join(""), ""));
        return mm.join(",");
    }

    function showFixednum_view(txt, fixedPrice, increase, bidbzj) {
        maskIsHide = false;
                    if(isNaN(parseInt(txt))) {
                $(".tipBanner .title").html(txt);
                $(".fixednumMain .last").hide();
                txt = 0;
            } else {
                $(".fixednumMain .last").html(number_format(txt) + "元").show();
            }
            $(".fixednumMain .editTxt").attr("lastNum", txt);
            $(".fixednumMain .editTxt").attr("fixedPrice", fixedPrice);
            $(".fixednumMain .editTxt").attr("increase", increase);
            $(".fixednumMain .editTxt").attr("bidbzj", bidbzj);
            $(".fixednumMain .editTxt").find('span').html("");
            $(".fixednumMain .fixedPrice").remove();
            if(fixedPrice){
                $(".fixednumMain .confirmBtn").before('<div class="fixedPrice" fixedPrice="' + fixedPrice + '">一口价￥' + number_format(fixedPrice) + '</div>');
            }
                $(".fixednumMask").show().animate({
            opacity: 0.382
        }, 100);

        $(".fixednumMain").show().animate({
            bottom: '0px'
        }, 100, 'ease-in-out');
    }

    function hideFixednum_view() {
        maskIsHide = true;
        $(".fixednumMain .tips").html('');
        $(".fixednumMain").animate({
            bottom: '-400px'
        }, 150, function () {
            $(".fixednumMain, .fixednumMask").hide();
        });
    }


    $(function () {
        $(document).on('fixednum_view:focus', function (e, editObj) {
            focusEditTxt = $(editObj);
        });

        $(document).on('fixednum_view:hide', function (e) {
            hideFixednum_view();
        });

        $(document).on('fixednum_view:show', function (e, txt, fixedPrice, increase, bidbzj) {
            showFixednum_view(txt, fixedPrice, increase, bidbzj);
        });

                $(document).on('fixednum_view:lastNum', function (e, txt) {
            $(".fixednumMain .editTxt").attr("lastNum", txt);
            $(".fixednumMain .last").html(number_format(txt) + "元");
        });
        
        $(".fixednumMain").on("click", function (e) {
            e.preventDefault();
        });

        $(".fixednumMain .close, .tipBanner .finish, .fixednumMask").on("click", function (e) {
            e.preventDefault();
            if($(this).hasClass("finish")) {
                if (typeof fixednum_extend != 'undefined') {
                    if (typeof fixednum_extend.finish == 'function') {
                        if(!fixednum_extend.finish()) {
                            return;
                        }
                    }
                }
            }
            hideFixednum_view();
        });

        $(".fixednumMain .numkey ul li").on("touchstart", function () {
            if ($(this).html() == '00' || $(this).html() == '' || $(this).html() == '.') {
                $(this).css({"background-color": "#FFF"});
            } else {
                $(this).css({"background-color": "#D1D5DA"});
            }
        });

        $(".fixednumMain .numkey ul li.num").on("touchend", function () {
            var clickNum = $(this).find("div").html();
            if (clickNum == null) {
                clickNum = $(this).html();
            }

            var content = focusEditTxt.find('span').html() + clickNum;
            if(typeof fixednum_extend != 'undefined'){
                if(typeof fixednum_extend.tip == 'function'){
                    $(".fixednumMain .tips").html(fixednum_extend.tip(content));
                }

                if(typeof fixednum_extend.format == 'function'){
                    content = fixednum_extend.format(content);
                }
            }
            focusEditTxt.find('span').html(content);

            if (clickNum.length == 1 && clickNum != ".") {
                $(this).css({"background-color": "#FFF"});
            } else {
                $(this).css({"background-color": "#D1D5DA"});
            }
        });

        $(".fixednumMain .numkey ul li.delete").on("touchend", function () {
            var content = focusEditTxt.find('span').html();
            var content = content.substr(0, content.length - 1);

            if(typeof fixednum_extend != 'undefined'){
                //tip函数直接返回需要显示的描述，无描述需返回''
                if(typeof fixednum_extend.tip == 'function'){
                    $(".fixednumMain .tips").html(fixednum_extend.tip(content));
                }

                if(typeof fixednum_extend.format == 'function'){
                    content = fixednum_extend.format(content);
                }
            }
            focusEditTxt.find('span').html(content);

            $(this).css({"background-color": "#D1D5DA"});
        });
                $(".fixednumMain .editTxt").on("click", function (e) {
            e.preventDefault();
            $(this).find('span').removeClass("hover").addClass("hover");
            focusEditTxt = $(this);
        });

        $(".fixednumMain .confirmBtn").on("touchend", function (e) {
            e.preventDefault();
            var num = parseInt(focusEditTxt.find('span').html());
            var lastNum = focusEditTxt.attr("lastNum");
            var fixedPrice = focusEditTxt.attr("fixedPrice");
            var increase = focusEditTxt.attr("increase");
            var bidbzj = focusEditTxt.attr("bidbzj");

            $(document.body).trigger("fixednum_view:confirm", {'num': num, 'lastNum': lastNum, 'fixedPrice': fixedPrice, 'increase': increase, 'bidbzj': bidbzj});
        });

        focusEditTxt = $(".fixednumMain .editTxt");

        $(".fixednumMain").on("click", ".fixedPrice", function (e) {
            e.preventDefault();
            var fixedPrice = $(this).attr('fixedPrice');
            focusEditTxt.find('span').html(fixedPrice);
            $(".fixednumMain .tips").html(fixednum_extend.tip(fixedPrice));
        });
            });
</script>

<div class="fixednumMask"></div>

<div class="fixednumMain">
            <div class="tipBanner">
            <span class="title">领先价</span>
            <div class="last"></div>
            <div class="close"></div>
        </div>

        <div class="priceBanner">
            <span class="title">出价</span>
            <div class="editTxt"><span class="hover"></span></div>
            <div class="tips"></div>
        </div>

        <div class="btnBanner">
            <div class="confirmBtn">出价</div>
        </div>
        <div class="numkey">
        <ul>
            <li class="num">
                <div>1</div>
                <span></span>
            </li>
            <li class="num">
                <div>2</div>
                <span>ABC</span>
            </li>
            <li class="num">
                <div>3</div>
                <span>DEF</span>
            </li>
            <li class="num">
                <div>4</div>
                <span>GHI</span>
            </li>
            <li class="num">
                <div>5</div>
                <span>JKL</span>
            </li>
            <li class="num">
                <div>6</div>
                <span>MNO</span>
            </li>
            <li class="num">
                <div>7</div>
                <span>PQRS</span>
            </li>
            <li class="num">
                <div>8</div>
                <span>TUV</span>
            </li>
            <li class="num">
                <div>9</div>
                <span>WXYZ</span>
            </li>
            <li class="num othernum">00</li>
            <li class="num" style="line-height: 50px;">0</li>
            <li class="delete"></li>
        </ul>
    </div>
</div>
</div>

<style type="text/css">
    .supportBanner {
        width: 100%;
        text-align: center;
        height: 49px;
        line-height: 49px;
        font-size: 12px;
        border-top: 1px solid #eaeae8;
        background-color: #F8F8F8;
        margin-top: 10px;
        color: #888;
        visibility: hidden;
    }
    
    .supportBanner a {
        color: #F2B896
    }
</style>
<script type="text/javascript">
    function fixSupport() {
        if ($.os.android) {
            bodyWidth = document.body.clientWidth;
            bodyHeight = document.documentElement.clientHeight;
        } else {
            bodyWidth = $(window).width();
            bodyHeight = $(window).height();
        }
        var dHeight = document.documentElement.offsetHeight;
        if (dHeight < bodyHeight) {
            $('#contentbox').css('minHeight', bodyHeight - 60);
        }
        $(".supportBanner").css("visibility", "visible");
    }
    $(function () {
        fixSupport();

        $(document).off("wptSupport_view:fix").on("wptSupport_view:fix", function () {
            fixSupport();
        });
    });
</script>
<style type="text/css">
    .mainMenu {
        position:fixed;
        width: 100%;
        height: 50px;
        bottom: 0px;
        background-color: #F8F8F8;
        border-top: 1px solid #eaeae8;
        font-size: 12px;
    }

    .mainMenu div {
        width: 33%;
        height: 22px;
        line-height: 22px;
        float: left;
        text-align: center;
        padding-top: 28px;
        background-repeat: no-repeat;
        background-size: 50px auto;
        color: #888;
    }

    .mainMenu div.selected {
        color: #007aff;
    }

    .mainMenu a div {
        color: #888;
    }

    .mainMenu .myHome {
        background-position: 50% -7px;
    }

    .mainMenu .publish {
        height: 50px;
        padding-top: 0px;
        background-position: 50% -64px;
        background-size: 60px;
    }

    .mainMenu .my {
        background-position: 50% -107px;
    }
</style>

<style type="text/css">
    .loadNextPage {
        width: 100%;
        height: 40px;
        visibility: visible;
    }

    .loadNextPage .loading {
        width: 110px;
        height: 40px;
        line-height: 40px;
        margin: 0 auto;
        background-size: auto 70%;
        background-repeat: no-repeat;
        background-position: left center;
        text-align: center;
        text-indent: 15px;
    }

    .wptMask {
        position: fixed;
        height: 100%;
        opacity: 0;
        top: 0px;
        bottom: 0px;
        width: 100%;
        background-color: #000;
        z-index: 1999;
    }

    .wptShare,
    .wptAlert,
    .wptConfirm,
    .wptMultiConfirm,
    .wptLoading {
        display: none;
    }

    .wptShare .shareTip {
        position: fixed;
        width: 96%;
        height: 286px;
        magin: 0 2%;
        top: 0px;
        background-image: url({weimicms:$staticPath}/tpl/static/auction/images/share.png);
        background-repeat: no-repeat;
        background-position: right top;
        background-size: auto 55%;
        z-index: 9999;
    }

    .wptAlert .dialog,
    .wptConfirm .dialog,
    .wptMultiConfirm .dialog {
        position: fixed;
        background: #ededed;
        width: 100%;
        bottom: -180px;
        z-index: 1999;
    }

    .wptAlert .dialog .tip,
    .wptConfirm .dialog .tip,
    .wptMultiConfirm .dialog .tip {
        line-height: 30px;
        padding: 10px 0px;
        font-size: 14px;
        border-radius: 8px;
    }

    .wptMultiConfirm .dialog .tip {
        padding: 0;
    }

    .wptAlert .dialog .tip .msg,
    .wptConfirm .dialog .tip .msg {
        text-align: center;
        line-height: 30px;
    }

    .wptAlert .dialog .tip .msg.font18,
    .wptConfirm .dialog .tip .msg.font18 {
        font-size: 18px;
    }

    .wptAlert .dialog .tip .msg.faq,
    .wptConfirm .dialog .tip .msg.faq {
        font-size: 17px;
        background-repeat: no-repeat;
        background-position: 10px center;
        background-size: auto 100%;
        line-height: 30px;
        height: 60px;
        text-align: left;
        padding-left: 80px;
        padding-right: 12px;
    }

    .wptAlert .dialog .tip .msg.smallFaq,
    .wptConfirm .dialog .tip .msg.smallFaq {
        font-size: 18px;
        background-repeat: no-repeat;
        background-position: 10px center;
        background-size: auto 100%;
        line-height: 40px;
        height: 40px;
        text-align: left;
        padding-left: 60px;
        padding-right: 12px;
    }

    .wptAlert .btns,
    .wptConfirm .btns {
        width: 87%;
        margin: 0 auto;
        padding: 15px 0px;
    }

    .wptAlert .btns .btn-confirm,
    .wptAlert .btns .btn-cancel,
    .wptConfirm .btns .btn-confirm,
    .wptConfirm .btns .btn-cancel {
        border: 1px solid #ceced1;
        background: #f7f7f7;
        padding: 10px 14px;
        color: #454545;
        border-radius: 4px;
        width: 92%;
        text-align: center;
        font-size: 18px;
    }

    .wptAlert .btns .btn-green,
    .wptConfirm .btns .btn-green {
        background-color: #06BE04;
        color: #fff;
        border: none;
    }

    .wptAlert .btns .btn-cancel,
    .wptConfirm .btns .btn-cancel {
        background-color: #858c96;
        margin: 22px 0 7px 0;
        color: #fff;
        border: none;
    }

    .wptAlert .btns .btn-delete,
    .wptConfirm .btns .btn-delete {
        background-color: #e95757;
        color: #fff;
        border: none;
    }

    .wptMultiConfirm .btns {
        width: 100%;
        background-color: #D4D4DC;
    }

    .wptMultiConfirm .btns .btn-confirm,
    .wptMultiConfirm .btns .btn-cancel {
        height: 49px;
        line-height: 49px;
        margin-top: 1px;
        text-align: center;
        font-size: 18px;
        background-color: #F3F3F3;
    }

    .wptMultiConfirm .btns .btn-cancel{
        margin-top: 8px;
    }

    .wptPassword {
        position: fixed;
        width: 100%;
        top: 0px;
        bottom: 0px;
        background-color: #efeff4;
        display: none;
    }

    .wptPassword .dialog {
        width: 90%;
        margin: 80px auto 0 auto;
        height: 100px;
    }

    .wptPassword .dialog .tip {
        width: 100%;
        height: 40px;
        line-height: 40px;
        text-align: center;
        font-size: 16px;
    }

    .wptPassword .dialog .password {
        width: 293px;
        margin: 10px auto 0 auto;
        height: 48px;
        border: 1px solid #c4c4c4;
    }

    .wptPassword .dialog .password .passwordKey {
        float: left;
        width: 48px;
        border-right: 1px solid #c4c4c4;
        height: 48px;
        line-height: 48px;
        background-color: #FFF;
        text-align: center;
        font-size: 20px;
    }

    .wptPassword .dialog .password .passwordKey:last-child {
        border-right: none;
    }

    .wptPassword .dialog .password .passwordKey .point {
        width: 48px;
        height: 48px;
        background-position: center;
        background-size: 10px;
        background-repeat: no-repeat;
    }

    .wptPassword .keyboard {
        position: absolute;
        width: 100%;
        background-color: #FFF;
        display: table;
        bottom: 0px;
    }

    .wptPassword .keyboard ul {
        padding: 0;
        margin: 0;
    }

    .wptPassword .keyboard ul,
    .wptPassword .keyboard li {
        text-decoration: none;
        list-style: none;
        vertical-align: middle;
    }

    .wptPassword .keyboard ul li {
        width: 33.1%;
        border-bottom: 1px solid #d2d5d8;
        border-right: 1px solid #d2d5d8;
        height: 50px;
        line-height: 50px;
        float: left;
        font-size: 28px;
        font-family: "Helvetica neue", Verdana, Geneva, sans-serif;
        text-align: center;
        background-color: #FFF;
        color: #000;
    }

    .wptPassword .keyboard ul li:nth-child(3n) {
        border-right: none;
    }

    .wptPassword .keyboard ul li.delete {
        background-repeat: no-repeat;
        background-position: center;
        background-size: 30px;
        background-color: #efeff4;
    }

    .wptPassword .keyboard ul li.blank {
        background-color: #efeff4;
        font-size: 17px;
    }

    .wptLoading {
        position: fixed;
        top: 0px;
        bottom: 0px;
        width: 100%;
        z-index: 1999;
    }

    .wptLoading .loading{
        position: absolute;
        left: 50%;
        top: 50%;
        width: 200px;
        height: 80px;
        margin-top: -40px;
        margin-left: -100px;
        background-color: rgba(0,0,0,0.7);
        background-position: center;
        background-repeat: no-repeat;
        background-size: 100%;
        border-radius: 2px;
        font-size: 14px;
        color: #FFF;
        opacity: 0;
        line-height: 80px;
        text-align: center;
        text-indent: 15px;
        z-index: 9999;
    }

    .wptLoading .loading .process {
        position: absolute;
        width: 100%;
        height: 20px;
        bottom: 5px;
        color: #FFF;
        line-height: 20px;
        font-size: 12px;
        text-align: center;
        text-indent: 0px;
    }

    .wptNotice {
        position: fixed;
        bottom: 50px;
        width: 94%;
        background-color: rgba(0,0,0,0.7);
        height: 30px;
        padding: 8px 3%;
        color: #FFF;
        font-size: 14px;
        display: none;
    }

    .wptNotice .msg {
        float: left;
        width: 80%;
        height: 30px;
        line-height: 30px;
        overflow: hidden;
    }

    .wptNotice .msg img {
        width: 45px;
        height: 45px;
        border-radius: 6px;
        position: absolute;
        bottom: 10px;
    }

    .wptNotice .msg span {
        margin-left: 55px;
    }

    .wptNotice .btn {
        float: left;
        width: 20%;
        height: 28px;
        line-height: 28px;
        margin: 1px 0;
        background-color: #C7160A;
        border-radius: 2px;
        text-align: center;
        font-size: 12px;
    }
</style>

<script type="text/javascript">

    var isSubscribe = 1;
    var hasTelephone = 18655282317;
    if(hasTelephone == 0 && window.location.hash == "#hasTelephone") {
        hasTelephone = 1;
    }
    var sellerLevel = 1;
    var buyerLevel = 1;

    //每页数量
    var PAGE_NUM = 5;
    var maskIsHide = true;
    var pushState = null;

    window.onpopstate = function (event) {
        if ($.os.android) {
            if (pushState && pushState.backevent) {
                $(document.body).trigger(pushState.backevent);
            }
            pushState = event.state;
        }
    };

    function pushStateEvent(e) {
        if ($.os.android) {
            if (pushState == null) {
                pushState = {backevent: e};
                history.pushState(pushState, document.title, "?backevent=" + pushState.backevent.replace(/#/g, ""));
            }
        }
    }

    function replaceStateUrl(url) {
        history.replaceState({url:url}, document.title, url);
    }

    //阻止touchmove事件
    $('body').on('touchmove', function (e) {
        if (!maskIsHide) e.preventDefault();
    });

    //微信版本升级提醒
    function noticeWeChatVer(){
        var weChatInfo = navigator.userAgent.match(/MicroMessenger\/([\d\.]+)/i) ;

        if( !weChatInfo || weChatInfo[1] < "6.0.2" ) {
            wptAlert("您的微信版本太老了，不能发布拍品，请升级至6.1以上版本！");
            return true;
        }
        return false;
    }

    

    //电话号码
    function wptTelephone(msg) {
        $(document).off('wptConfirm_view:sure').one('wptConfirm_view:sure', function () {
            wptLoading('填写联系电话', function () {
                location.href = '/my/edit_userinfo/telephone?refer=' + encodeURIComponent(location.href)
            });
        });
        var confirmMsg = "亲，请填写您的联系电话！";
        if(typeof msg != "undefined") {
            confirmMsg = msg;
        }
        wptConfirm(confirmMsg, {text: '填写联系电话', msgClass: 'smallFaq'});
    }

    //微信分享
    function wptShare() {
        maskIsHide = false;
        $(".wptShare").show();
        $(".wptShare .wptMask").animate({opacity: "0.7"}, 100);

        $(document).off("wptShare_view:hide").one("wptShare_view:hide", function (e) {
            maskIsHide = true;
            $('.wptShare').hide();
            $(".wptShare .wptMask").css("opacity", "0");
        });

        $('.wptShare').off('touchend').one('touchend', function (e) {
            e.preventDefault();
            $(document.body).trigger("wptShare_view:hide");
        });
    }

    //alert
    function wptAlert(msg, callback, onlyBtnClose) {
        maskIsHide = false;

        $(".wptAlert .tip .msg").html(msg);

        $(".wptAlert").show();
        $(".wptMask").animate({opacity: "0.4"}, 100);
        $(".wptAlert .dialog").animate({bottom: "0px"}, 100);

        pushStateEvent('wptAlert_view:hide');
        $(document).off("wptAlert_view:hide").one("wptAlert_view:hide", function (e) {
            maskIsHide = true;
            $(".wptAlert .wptMask").animate({opacity: "0"}, 100);
            var height = '-' + $(".wptAlert .dialog").height() + 'px';
            $(".wptAlert .dialog").animate({bottom: height}, 100, function () {
                $(".wptAlert").hide();
            });
            if (typeof(callback) == 'function') setTimeout(callback, 0);
        });

        var closeObj = $('.wptAlert .wptMask, .wptAlert .btn-confirm');
        if(typeof onlyBtnClose != "undefined" && onlyBtnClose == true) {
            closeObj = $('.wptAlert .btn-confirm');
        }
        closeObj.off('touchend').one('touchend', function (e) {
            e.preventDefault();
            if ($.os.android && pushState && pushState.backevent && pushState.backevent == "wptAlert_view:hide") {
                history.back();
            } else {
                $(document.body).trigger("wptAlert_view:hide");
            }
        });
    }

    //confirm
    function wptConfirm(msg, sureObj) {
        maskIsHide = false;
        $('.wptConfirm .tip .msg').html(msg);

        if(typeof sureObj != "undefined") {
            //确定按钮上的文字
            sureObj.text && $('.wptConfirm .btns .sure').text(sureObj.text);
            //确定按钮的class
            sureObj.class && $('.wptConfirm .btns .sure').addClass(sureObj.class);
            //描述文本class
            sureObj.msgClass && $('.wptConfirm .tip .msg').addClass(sureObj.msgClass);
        }

        $(".wptConfirm").show();
        $(".wptConfirm .wptMask").animate({opacity: "0.4"}, 100);
        $(".wptConfirm .dialog").animate({bottom: "0px"}, 100);

        pushStateEvent("wptConfirm_view:hide");
        $(document).off("wptConfirm_view:hide").one("wptConfirm_view:hide", function (e) {
            maskIsHide = true;
            $(".wptConfirm .wptMask").animate({opacity: "0"}, 100);
            var height = '-' + $(".wptConfirm .dialog").height() + 'px';
            $(".wptConfirm .dialog").animate({bottom: height}, 100, function () {
                $(".wptConfirm").hide();
            });
        });

        $('.wptConfirm .wptMask, .wptConfirm .btn-cancel, .wptConfirm .btn-confirm').off('touchend').one('touchend', function (e) {
            e.preventDefault();
            if ($(e.target).hasClass('sure')) {
                $(document.body).trigger('wptConfirm_view:sure');
            }

            if ($.os.android && pushState && pushState.backevent && pushState.backevent == "wptConfirm_view:hide") {
                setTimeout(function() {
                    history.back();
                }, 0);
            } else {
                $(document.body).trigger("wptConfirm_view:hide");
            }
        });
    }

    //multiConfirm
    function wptMultiConfirm(msg, sureObj) {
        maskIsHide = false;
        $('.wptConfirm .tip .msg').html(msg);

        if(typeof sureObj != "undefined") {
            $(".wptMultiConfirm .btns .btn-cancel").before(sureObj);
        }

        $(".wptMultiConfirm").show();
        $(".wptMultiConfirm .wptMask").animate({opacity: "0.4"}, 100);
        $(".wptMultiConfirm .dialog").animate({bottom: "0px"}, 100);

        pushStateEvent("wptMultiConfirm_view:hide");
        $(document).off("wptMultiConfirm_view:hide").one("wptMultiConfirm_view:hide", function (e) {
            maskIsHide = true;
            $(".wptMultiConfirm .wptMask").animate({opacity: "0"}, 100);
            var height = '-' + $(".wptMultiConfirm .dialog").height() + 'px';
            $(".wptMultiConfirm .dialog").animate({bottom: height}, 100, function () {
                $(".wptMultiConfirm").hide();
                $(".wptMultiConfirm").find(sureObj).remove();
            });
        });

        $('.wptMultiConfirm').off('touchend').one('touchend', '.wptMask, .btn-cancel, .btn-confirm', function (e) {
            e.preventDefault();
            if ($.os.android && pushState && pushState.backevent && pushState.backevent == "wptMultiConfirm_view:hide") {
                setTimeout(function() {
                    history.back();
                }, 0);
            } else {
                $(document.body).trigger("wptMultiConfirm_view:hide");
            }
        });
    }

    //trade password
    function wptPassword(msg, successFn, cancelFn, notCheck) {
        if(typeof msg != "undefined") {
            $(".wptPassword .tip").html(msg);
        }
        var passwordKeyIndex = 0;
        $(".wptPassword .password .passwordKey").attr("num", "").html("");


        $(".wptPassword .keyboard li").on("touchstart", function () {
            if ($(this).html() == '00' || $(this).html() == '' || $(this).html() == '.') {
                $(this).css({"background-color": "#FFF"});
            } else {
                $(this).css({"background-color": "#D1D5DA"});
            }
        });

        $(".wptPassword .num").off("touchend").on("touchend", function(e){
            e.preventDefault();
            e.stopPropagation();
            if(passwordKeyIndex < 6) {
                $(".wptPassword .password .passwordKey").eq(passwordKeyIndex).attr("num", $(this).html()).html('<div class="point"></div>');
                passwordKeyIndex++;
                if(passwordKeyIndex == 6) {
                    var password = "";
                    $(".wptPassword .password .passwordKey").each(function(i,n){
                        password += $(n).attr("num");
                    });

                    setTimeout(function(){
                        if(typeof notCheck != "undefined" && notCheck == true) {
                            successFn(password);
                        } else {
                            $.post("/balance/checkPassword", {'password': password}, function (res) {
                                res = JSON.parse(res);
                                if (res.errcode == 0) {
                                    successFn(password);
                                } else {
                                    wptAlert(res.errmsg, function () {
                                        passwordKeyIndex = 0;
                                        $(".wptPassword .password .passwordKey").attr("num", "").html("");
                                    }, true);
                                }
                            });
                        }
                    }, 150);
                }
            }

            if ($(this).html().length == 1 && $(this).html() != ".") {
                $(this).css({"background-color": "#FFF"});
            } else {
                $(this).css({"background-color": "#D1D5DA"});
            }
        });

        $(".wptPassword .delete").off("touchend").on("touchend", function() {
            if(passwordKeyIndex > 0) {
                passwordKeyIndex--;
                $(".wptPassword .password .passwordKey").eq(passwordKeyIndex).attr("num", "").html("");
            }
            $(this).css({"background-color": "#D1D5DA"});
        });

        $(".wptPassword .blank").off("touchend").one("touchend", function() {
            if ($.os.android && pushState && pushState.backevent && pushState.backevent == "wptPassword_view:hide") {
                setTimeout(function() {
                    history.back();
                }, 0);
            } else {
                $(document.body).trigger("wptPassword_view:hide");
            }
        });

        pushStateEvent('wptPassword_view:hide');
        $(document).off("wptPassword_view:hide").one("wptPassword_view:hide", function (e) {
            passwordKeyIndex = 0;
            $(".wptPassword .password .passwordKey").attr("num", "").html("");
            $(".wptPassword").hide();

            if(typeof cancelFn == 'function') {
                setTimeout(function(){
                    cancelFn();
                }, 600);
            }
        });

        $(".wptPassword").show();
    }

    //notice
    function wptNotice(msg, btnMsg, callback, time) {
        time = typeof time == "undefined" ? 8000 : time;
        $(".wptNotice .msg span").html(msg);
        $(".wptNotice .btn").html(btnMsg);

        var noticeBottom = "0px";
        if($(".mainMenu").length) {
            noticeBottom = $(".mainMenu").height() + "px";
        }
        $(".wptNotice").css("bottom", noticeBottom).show();

        $(".wptNotice .btn").off("click").one("click", function(){
            $(document.body).trigger('wptNotice_view:hide');
            if (typeof(callback) == 'function') callback();
        });

        $(document).off("wptNotice_view:hide").one("wptNotice_view:hide", function () {
            $(".wptNotice").animate({opacity: "0"}, 500);
            setTimeout(function(){
                $(".wptNotice").hide();
                $(".wptNotice").css("opacity", 1);
            }, 700);
        });

        $(document).off("wptNotice_view:bottom").on("wptNotice_view:bottom", function (e, bottom) {
            $(".wptNotice").animate({bottom: bottom}, 60);
        });

        setTimeout(function() {
            $(document.body).trigger('wptNotice_view:hide');
        }, time);
    }

    //loading
    function wptLoading(msg, callback, time) {
        time = typeof time == "undefined" ? 1000 : time;
        maskIsHide = false;
        $(".wptLoading .loading").html(msg);

        $(".wptLoading").show();
        $(".wptLoading .loading").animate({opacity: 1}, time, function(){
            if (typeof(callback) == 'function') callback();
        });

        $(document).off("wptLoading_view:hide").one("wptLoading_view:hide", function (e) {
            maskIsHide = true;
            $(".wptLoading .loading").css({opacity: 0});
            $(".wptLoading").hide();
        });

        $(document).off("wptLoading_view:msg").on("wptLoading_view:msg", function (e, msg) {
            $(".wptLoading .loading").html(msg);
        });
    }
</script>

<div class="wptShare">
    <div class="wptMask"></div>
    <div class="shareTip"></div>
</div>

<div class="wptAlert">
    <div class="wptMask"></div>
    <div class="dialog">
        <div class="tip">
            <div class="msg"></div>
        </div>
        <div class="btns">
            <div class="btn-confirm">知道了</div>
        </div>
    </div>
</div>

<div class="wptConfirm">
    <div class="wptMask"></div>
    <div class="dialog">
        <div class="tip">
            <div class="msg"></div>
        </div>
        <div class="btns">
            <div class="btn-confirm sure">确定</div>
            <div class="btn-cancel">取消</div>
        </div>
    </div>
</div>

<div class="wptMultiConfirm">
    <div class="wptMask"></div>
    <div class="dialog">
        <div class="tip">
            <div class="msg"></div>
        </div>
        <div class="btns">
            <div class="btn-cancel">取消</div>
        </div>
    </div>
</div>

<div class="wptPassword">
    <div class="dialog">
        <div class="tip">请输入交易密码</div>
        <div class="password">
            <div class="passwordKey" num=""></div>
            <div class="passwordKey" num=""></div>
            <div class="passwordKey" num=""></div>
            <div class="passwordKey" num=""></div>
            <div class="passwordKey" num=""></div>
            <div class="passwordKey" num=""></div>
        </div>
    </div>
    <div class="keyboard">
        <ul>
            <li class="num">1</li>
            <li class="num">2</li>
            <li class="num">3</li>
            <li class="num">4</li>
            <li class="num">5</li>
            <li class="num">6</li>
            <li class="num">7</li>
            <li class="num">8</li>
            <li class="num">9</li>
            <li class="blank">取 消</li>
            <li class="num">0</li>
            <li class="delete"></li>
        </ul>
    </div>
</div>


<div class="wptLoading">
    <div class="wptMask"></div>
    <div class="loading"></div>
</div>


</body></html>