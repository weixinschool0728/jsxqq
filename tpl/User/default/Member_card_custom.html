<include file="Public:head"/>
<div class="content" <if condition="session('isQcloud') eq true">style="float:center;"</if>>
<div class="cLineB">
	<h4>自定义输入项 <span class="FAQ">（会员资料是否需要显示或填写）</span></h4>
</div>
 <div class="msgWrap form">

	<form class="form" method="post" action="{weimicms::U('Member_card/customSave')}">	 
		<table class="ListProduct" style=" margin:0;" border="0" cellspacing="0" cellpadding="0" width="100%">
			<tbody>
				<tr>
					<td width="120">字段名称</td>
					<if condition="$usertplid eq 2">
					<td width="110">是否显示</td>
					<td width="120">是否必填</td>
					<else />
					<td>是否显示</td>
					<td>是否必填</td>
					</if>
					<td>输入类型 </td>
					<td>排序</td>
					<td>输入限制</td>
				</tr>
				<!--tr>
					<td width="120">微信昵称</td>
					<td>
						<input type="radio" name="wechaname" id="wechaname" <if condition="$usertplid eq 2">style="margin-left:-23px;"</if> <if condition="$conf['wechaname'] neq 0">checked</if> value="1" /> <label for="wechaname">显示 &nbsp; &nbsp; &nbsp;</label>
						<input type="radio" name="wechaname" id="nowechaname" <if condition="$conf['wechaname'] eq 0">checked</if> value="0" /> <label for="nowechaname">不显示</label>
					</td>
					<td>
						<input type="radio" name="is_wechaname" id="is_wechaname" <if condition="$conf['is_wechaname'] eq 1">checked</if> value="1" /> <label for="is_wechaname">必填 &nbsp; &nbsp; &nbsp;</label>
						<input type="radio" name="is_wechaname" id="is_nowechaname" <if condition="$conf['is_wechaname'] eq 0">checked</if> value="0" /> <label for="is_wechaname">不必填</label>
					</td>
					<td>单行文本框</td><td>英文数字汉字</td>
				</tr>
								
				<tr>
					<td width="120">手机号</td>
					<td>
						<input type="radio" name="tel" id="tel" <if condition="$conf['tel'] neq 0">checked</if> value="1" /> <label for="tel">显示 &nbsp; &nbsp; &nbsp;</label>
						<input type="radio" name="tel" id="notel" <if condition="$conf['tel'] eq 0">checked</if> value="0" /> <label for="notel">不显示 &nbsp; &nbsp; &nbsp;</label>
					</td>
					<td>
						<input type="radio" name="is_tel" id="is_tel" <?php if($conf == ''){echo 'checked';}elseif($conf['is_tel'] == 1){echo 'checked';}?> value="1" /> <label for="is_tel">必填 &nbsp; &nbsp; &nbsp;</label>
						<input type="radio" name="is_tel" id="is_notel" <?php if($conf == ''){echo '';}elseif($conf['is_tel'] == 0){echo 'checked';}?> value="0" /> <label for="is_notel">不必填</label>
					</td>
					<td>单行文本框</td><td>手机号</td>
				</tr>
				<tr>
					<td width="120">头像</td>
					<td>
						<input type="radio" name="portrait" id="portrait" <if condition="$conf['portrait'] neq 0">checked</if> value="1" /> <label for="portrait">显示 &nbsp; &nbsp; &nbsp;</label>
						<input type="radio" name="portrait" id="noportrait" <if condition="$conf['portrait'] eq 0">checked</if> value="0" /> <label for="noportrait">不显示 &nbsp; &nbsp; &nbsp;</label>
					</td>
					<td>
						<input type="radio" name="is_portrait" id="is_portrait" <?php if($conf == ''){echo '';}elseif($conf['is_portrait'] == 1){echo 'checked';}?> value="1" /> <label for="is_portrait">必填 &nbsp; &nbsp; &nbsp;</label>
						<input type="radio" name="is_portrait" id="is_noportrait" <?php if($conf == ''){echo 'checked';}elseif($conf['is_portrait'] == 0){echo 'checked';}?> value="0" /> <label for="is_noportrait">不必填</label>
					</td>
					<td>选择默认的或自己上传图片</td><td>合法的图片</td>
				</tr>				
				<tr>
					<td width="120">真实姓名</td>
					<td>
						<input type="radio" name="truename" id="truename" <if condition="$conf['truename'] neq 0">checked</if> value="1" /> <label for="truename">显示 &nbsp; &nbsp; &nbsp;</label>
						<input type="radio" name="truename" id="notruename" <if condition="$conf['truename'] eq 0">checked</if> value="0" /> <label for="notruename">不显示 &nbsp; &nbsp; &nbsp;</label>
					</td>
					<td>
						<input type="radio" name="is_truename" id="is_truename" <?php if($conf == ''){echo '';}elseif($conf['is_truename'] == 1){echo 'checked';}?> value="1" /> <label for="is_truename">必填 &nbsp; &nbsp; &nbsp;</label>
						<input type="radio" name="is_truename" id="is_notruename" <?php if($conf == ''){echo 'checked';}elseif($conf['is_truename'] == 0){echo 'checked';}?> value="0" /> <label for="is_notruename">不必填</label>
					</td>
					<td>单行文本框</td><td>英文数字汉字</td>
				</tr>
								
				<tr>
					<td width="120">QQ号码</td>
					<td>
						<input type="radio" name="qq" id="qq" <if condition="$conf['qq'] neq 0">checked</if> value="1" /> <label for="qq">显示 &nbsp; &nbsp; &nbsp;</label>
						<input type="radio" name="qq" id="noqq" <if condition="$conf['qq'] eq 0">checked</if> value="0" /> <label for="noqq">不显示 &nbsp; &nbsp; &nbsp;</label>
					</td>
					<td>
						<input type="radio" name="is_qq" id="is_qq" <?php if($conf == ''){echo '';}elseif($conf['is_qq'] == 1){echo 'checked';}?> value="1" /> <label for="is_qq">必填 &nbsp; &nbsp; &nbsp;</label>
						<input type="radio" name="is_qq" id="is_noqq" <?php if($conf == ''){echo 'checked';}elseif($conf['is_qq'] == 0){echo 'checked';}?> value="0" /> <label for="is_noqq">不必填</label>
					</td>
					<td>单行文本框</td><td>数字</td>
				</tr>
								
				<tr>
					<td width="120">支付密码</td>
					<td>
						<input type="radio" name="paypass" id="paypass" <if condition="$conf['paypass'] neq 0">checked</if> value="1" /> <label for="paypass">显示 &nbsp; &nbsp; &nbsp;</label>
						<input type="radio" name="paypass" id="nopaypass" <if condition="$conf['paypass'] eq 0">checked</if> value="0" /> <label for="nopaypass">不显示 &nbsp; &nbsp; &nbsp;</label>
					</td>
					<td>
						<input type="radio" name="is_paypass" id="is_paypass" <?php if($conf == ''){echo '';}elseif($conf['is_paypass'] == 1){echo 'checked';}?> value="1" /> <label for="is_paypass">必填 &nbsp; &nbsp; &nbsp;</label>
						<input type="radio" name="is_paypass" id="is_nopaypass" <?php if($conf == ''){echo 'checked';}elseif($conf['is_paypass'] == 0){echo 'checked';}?> value="0" /> <label for="is_nopaypass">不必填</label>
					</td>
					<td>单行文本框</td><td>不验证</td>
				</tr>
								
				<tr>
					<td width="120">头像</td>
					<td>
						<input type="radio" name="portrait" id="portrait" <if condition="$conf['portrait'] neq 0">checked</if> value="1" /> <label for="portrait">显示 &nbsp; &nbsp; &nbsp;</label>
						<input type="radio" name="portrait" id="noportrait" <if condition="$conf['portrait'] eq 0">checked</if> value="0" /> <label for="noportrait">不显示 &nbsp; &nbsp; &nbsp;</label>
					</td>
					<td>
						<input type="radio" name="is_portrait" id="is_portrait" <?php if($conf == ''){echo '';}elseif($conf['is_portrait'] == 1){echo 'checked';}?> value="1" /> <label for="is_portrait">必填 &nbsp; &nbsp; &nbsp;</label>
						<input type="radio" name="is_portrait" id="is_noportrait" <?php if($conf == ''){echo 'checked';}elseif($conf['is_portrait'] == 0){echo 'checked';}?> value="0" /> <label for="is_noportrait">不必填</label>
					</td>
					<td>选择默认的或自己上传图片</td><td>合法的图片</td>
				</tr>
								
				<tr>
					<td width="120">性别</td>
					<td>
						<input type="radio" name="sex" id="sex" <if condition="$conf['sex'] neq 0">checked</if> value="1" /> <label for="sex">显示 &nbsp; &nbsp; &nbsp;</label>
						<input type="radio" name="sex" id="nosex" <if condition="$conf['sex'] eq 0">checked</if> value="0" /> <label for="nosex">不显示 &nbsp; &nbsp; &nbsp;</label>
					</td>
					<td>
						<input type="radio" name="is_sex" id="is_sex" <?php if($conf == ''){echo '';}elseif($conf['is_sex'] == 1){echo 'checked';}?> value="1" /> <label for="is_sex">必填 &nbsp; &nbsp; &nbsp;</label>
						<input type="radio" name="is_sex" id="is_nosex" <?php if($conf == ''){echo 'checked';}elseif($conf['is_sex'] == 0){echo 'checked';}?> value="0" /> <label for="is_nosex">不必填</label>
					</td>
					<td>下拉选择</td><td>不验证</td>
				</tr>
								
				<tr>
					<td width="120">出生年</td>
					<td>
						<input type="radio" name="bornyear" id="bornyear" <if condition="$conf['bornyear'] neq 0">checked</if> value="1" /> <label for="bornyear">显示 &nbsp; &nbsp; &nbsp;</label>
						<input type="radio" name="bornyear" id="nobornyear" <if condition="$conf['bornyear'] eq 0">checked</if> value="0" /> <label for="nobornyear">不显示 &nbsp; &nbsp; &nbsp;</label>
					</td>
					<td>
						<input type="radio" name="is_bornyear" id="is_bornyear" <?php if($conf == ''){echo '';}elseif($conf['is_bornyear'] == 1){echo 'checked';}?> value="1" /> <label for="is_bornyear">必填 &nbsp; &nbsp; &nbsp;</label>
						<input type="radio" name="is_bornyear" id="is_nobornyear" <?php if($conf == ''){echo 'checked';}elseif($conf['is_bornyear'] == 0){echo 'checked';}?> value="0" /> <label for="is_nobornyear">不必填</label>
					</td>
					<td>单行文本框</td><td>数字</td>
				</tr>
				
								
				<tr>
					<td width="120">出生月</td>
					<td>
						<input type="radio" name="bornmonth" id="bornmonth" <if condition="$conf['bornmonth'] neq 0">checked</if> value="1" /> <label for="bornmonth">显示 &nbsp; &nbsp; &nbsp;</label>
						<input type="radio" name="bornmonth" id="nobornmonth" <if condition="$conf['bornmonth'] eq 0">checked</if> value="0" /> <label for="nobornmonth">不显示 &nbsp; &nbsp; &nbsp;</label>
					</td>
					<td>
						<input type="radio" name="is_bornmonth" id="is_bornmonth" <?php if($conf == ''){echo '';}elseif($conf['is_bornmonth'] == 1){echo 'checked';}?> value="1" /> <label for="is_bornmonth">必填 &nbsp; &nbsp; &nbsp;</label>
						<input type="radio" name="is_bornmonth" id="is_nobornmonth" <?php if($conf == ''){echo 'checked';}elseif($conf['is_bornmonth'] == 0){echo 'checked';}?> value="0" /> <label for="is_nobornmonth">不必填</label>
					</td>
					<td>单行文本框</td><td>数字</td>
				</tr>
				
								
				<tr>
					<td width="120">出生日</td>
					<td>
						<input type="radio" name="bornday" id="bornday" <if condition="$conf['bornday'] neq 0">checked</if> value="1" /> <label for="bornday">显示 &nbsp; &nbsp; &nbsp;</label>
						<input type="radio" name="bornday" id="nobornday" <if condition="$conf['bornday'] eq 0">checked</if> value="0" /> <label for="nobornday">不显示 &nbsp; &nbsp; &nbsp;</label>
					</td>
					<td>
						<input type="radio" name="is_bornday" id="is_bornday" <?php if($conf == ''){echo '';}elseif($conf['is_bornday'] == 1){echo 'checked';}?> value="1" /> <label for="is_bornday">必填 &nbsp; &nbsp; &nbsp;</label>
						<input type="radio" name="is_bornday" id="is_nobornday" <?php if($conf == ''){echo 'checked';}elseif($conf['is_bornday'] == 0){echo 'checked';}?> value="0" /> <label for="is_nobornday">不必填</label>
					</td>
					<td>单行文本框</td><td>数字</td>
				</tr-->
				
				
				<volist name="fields" id="fd">
				<tr class="custom">
					<td width="120">
						<input name="field_name[{weimicms:$i}]" class="px" value="{weimicms:$fd['field_name']}"/>
						<input name="field_id[{weimicms:$i}]" value="{weimicms:$fd['field_id']}" type="hidden" />
					</td>
					<td>
						<label><input type="radio" name="is_show[{weimicms:$i}]" <if condition="$fd['is_show'] eq 1">checked</if> value="1" /> 显示 &nbsp; &nbsp;</label>
						<label><input type="radio" name="is_show[{weimicms:$i}]" <if condition="$fd['is_show'] eq 0">checked</if> value="0" /> 隐藏 </label>
					</td>
					<td>
						<label><input type="radio" name="is_empty[{weimicms:$i}]" <if condition="$fd['is_empty'] eq 1">checked</if> value="1" /> 必填 &nbsp; &nbsp;</label>
						<label><input type="radio" name="is_empty[{weimicms:$i}]" <if condition="$fd['is_empty'] eq 0">checked</if> value="0" /> 可不填</label>
					</td>
					<td>
					
						<if condition="!in_array($fd['item_name'], array('tel', 'wechaname', 'portrait', 'truename'))">
						
						<select name="field_type[{weimicms:$i}]">{weimicms:$fd['field_type_html']}</select>
						<span <if condition="!in_array($fd['field_type'], array('select', 'checkbox', 'radio'))">style="display:none"</if>>
							<br />多个选项值，多个用“|”隔,请不要使用空格！<br />
							<textarea name="field_option[{weimicms:$i}]" class="px" style="width:240px; height:70px" cols="60" rows="8">{weimicms:$fd['field_option']}</textarea>
						</span>
						
						<elseif condition="$fd['item_name'] eq 'tel'" />
						单行文本框<input type="hidden" name="field_type[{weimicms:$i}]" value="text"/>
						<elseif condition="$fd['item_name'] eq 'truename'" />
						单行文本框<input type="hidden" name="field_type[{weimicms:$i}]" value="text"/>
						<elseif condition="$fd['item_name'] eq 'wechaname'" />
						单行文本框<input type="hidden" name="field_type[{weimicms:$i}]" value="text"/>
						<elseif condition="$fd['item_name'] eq 'portrait'" />
						上传图片<input type="hidden" name="field_type[{weimicms:$i}]" value=""/>
						</if>
						
					</td>
					<td>
						<input name="item_name[{weimicms:$i}]" class="px" value="{weimicms:$fd['item_name']}" type="hidden" />
						<input name="sort[{weimicms:$i}]" value="{weimicms:$fd['sort']}" class="px" style="width:40px"/>
					</td>
					<td>
						<if condition="!in_array($fd['item_name'], array('tel', 'wechaname', 'portrait', 'truename'))">
						<select name="field_match[{weimicms:$i}]">{weimicms:$fd['field_match_html']}</select>
						<input value="删除" type="button" class="btnGreen del"/>
						<elseif condition="$fd['item_name'] eq 'tel'" />
						手机号<input type="hidden" name="field_match[{weimicms:$i}]" value="{weimicms:$tel}"/>
						<elseif condition="$fd['item_name'] eq 'truename'" />
						英文数字汉字<input type="hidden" name="field_match[{weimicms:$i}]" value=""/>
						<elseif condition="$fd['item_name'] eq 'wechaname'" />
						英文数字汉字<input type="hidden" name="field_match[{weimicms:$i}]" value=""/>
						<elseif condition="$fd['item_name'] eq 'portrait'" />
						图片<input type="hidden" name="field_match[{weimicms:$i}]" value=""/>
						</if>
					</td>
				</tr>
				</volist>
				<tr id="add_new">
					<td colspan="6" style="text-align: center">
						<input type="hidden" name="token" value="{weimicms:$_GET['token']}" />
						<button type="submit" class="btnGreen">保存</button>　　　　
						<a href="javascript:history.go(-1);" class="btnGray vm">取消</a>　　　
						<button type="button" class="btnGreen" id="add_a_tr">增加一项</button>　　　
					</td>
				</tr>
			</tbody>
		</table>
	</form>
</div>  
</div>
   
        <div class="clr"></div>
      </div>
    </div>
  </div> 
  <!--底部-->
  	</div>
<script type="text/javascript">
$(document).ready(function(){
	$('select').on('change', function(){
		var attr = $(this).val();
		if (attr == 'select' || attr == 'checkbox' || attr == 'radio') {
			$(this).next().css("display", "block");
		} else {
			$(this).next().css("display", "none");
		}
	});
	
	var i = 0;
	$('#add_a_tr').click(function(){
		if (i == 0) {
			i = parseInt($('.custom').length) + 1;
		} else {
			i++;
		}
		
		var html = '<tr class="custom"><td width="120">';
			html += '<input name="field_name[' + i + ']" class="px" value="" />';
			html += '<input name="field_id[' + i + ']" value="0" type="hidden" />';
			html += '</td>';
			html += '<td>';
			html += '<label><input type="radio" name="is_show[' + i + ']" checked value="1" /> 显示 &nbsp; &nbsp; &nbsp;</label>';
			html += '<label><input type="radio" name="is_show[' + i + ']" value="0" /> 隐藏 &nbsp; &nbsp; &nbsp;</label>';
			html += '</td>';
			html += '<td>';
			html += '<label><input type="radio" name="is_empty[' + i + ']" checked value="1" /> 必填 &nbsp; &nbsp; &nbsp;</label>';
			html += '<label><input type="radio" name="is_empty[' + i + ']" value="0" /> 可不填</label>';
			html += '</td>';
			html += '<td>';
			html += '<select name="field_type[' + i + ']"><option value="">请选择类型</option><option value="text" selected="">单行文本框</option><option value="textarea">多行文本框</option><option value="checkbox">多选选框</option><option value="radio">单选按钮</option><option value="select">下拉框</option></select>';
			html += '<span style="display:none">';
			html += '多个选项值，多个用“|”隔,请不要使用空格！<br />';
			html += '<textarea name="field_option[' + i + ']" class="px" style="width:300px; height:70px" cols="60" rows="8"></textarea>';
			html += '</span>';
			html += '</td>';
			html += '<td>';
			html += '<input name="item_name[' + i + ']" class="px" value="" type="hidden" />';
			html += '<input name="sort[' + i + ']" value="" class="px" style="width:40px"/>';
			html += '</td>';
			html += '<td>';
			html += '<select name="field_match[' + i + ']"><option value="">请选择验证方式</option><option value="^[\\u4e00-\\u9fa5\\a-zA-Z0-9]+$" selected="">英文数字汉字</option><option value="^[A-Za-z]+$">英文大小写字符</option><option value="^[1-9]\\d*|0$">0或正整数</option><option value="^[A-Za-z0-9_]+$">字母数字下滑线</option><option value="^[0-9]{1,30}$">正整数</option><option value="^[-\\+]?\\d+(\\.\\d+)?$">小数</option><option value="\\w+([-+.]\\w+)*@\\w+([-.]\\w+)*\\.\\w+([-.]\\w+)*">邮箱</option><option value="^13[0-9]{9}$|^15[0-9]{9}$|^18[0-9]{9}$">手机</option></select>';
			html += '<input value="删除" type="button" class="btnGreen del"/></td>';
			html += '</tr>';
			$('#add_new').before(html);
	});
	$('.del').on('click', function(){
		$(this).parents('.custom').remove();
	});
});
function inputtypeChange(obj){
  var attr = $(obj).attr('value'), id = $(obj).attr('id');
	if(attr == 'select' || attr == 'checkbox' || attr == 'radio'){
		$('#' + id + '_option').css("display","");
	}else{
		$('#' + id + '_option').css("display","none");
	}
}
</script>
<script src="{weimicms:$staticPath}/tpl/static/new/js/jquery-2.1.1.js"></script>
<include file="Public:footer"/>
<if condition="session('isQcloud') neq true">
</if>