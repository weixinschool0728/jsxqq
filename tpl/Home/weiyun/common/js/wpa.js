if(!window.BQQWPALOAD){(function(aP,z){var ai="2.1.20130819";var aw=false,af=false;var ap="0",aU="1",s="2",E="4",J="20",j="0",ad="1",aF="2",a1="4",B="5",al="0",M="1",K="0",ah="1",U="2",aM="0",u="1",aq="2",aH="0",m="1";var n=2000,G=1000,R=2000,aT=2000,f=5000,D=15000,ar=3600000,q=1000;var aB="kfu",p="pgv_pvi";var au="is",X="ik",ak="msg",aK="mh",am="mid",aY="slid";var ax="0",e="1",aX="2",ab="0",aV="-1",aC="|";var a="http://visitor.crm2.qq.com/cgi/visitorcgi/ajax/wpa_first_heart_beat.php",aj="http://visitor.crm2.qq.com/cgi/visitorcgi/ajax/wpa_heart_beat.php",I="http://visitor.crm2.qq.com/cgi/visitorcgi/ajax/auto_invite.php";var aD=0,g="0",v="1",w="2",aW=1;var aO=3000,at=120;var aZ="",aR="qq.com,pengyou.com,qzoneapp.com,nipic.com,docin.com,51zxw.net,2155.com,xd.com,yto.net.cn,c-c.com,27.cn,05wan.com,alivv.cn,gogo.com,doctorjob.com.cn,emoney.cn,m4.cn,chinaktv.net,yk988.com,bangkaow.com,wsxsp.com,55tools.com,youxi518.com",av=1,t="b.qq.com,sales.b.qq.com,guilin.house.qq.com,ta.qq.com,hn.qq.com,nantong.house.qq.com";var T="http://cdn.b.qq.com",c=T+"/account/bizqq/";var S="_WPA_VIEW_HELPER",an="WPA_VIEW_HELPER";var ac=0.9;var P=aP.document;var aS=function(){return +new Date()};var a2=function(){function a4(){return(((1+Math.random())*65536)|0).toString(16).substring(1)}return function(){return(a4()+a4()+"-"+a4()+"-"+a4()+"-"+a4()+"-"+a4()+a4()+a4())}}();var i=function(a6){a6+=a6.indexOf("?")>-1?"":"?";a6+="&"+aS();var a5="log_"+aS(),a4=aP[a5]=new Image();a4.onload=a4.onerror=function(){aP[a5]=null};a4.src=a6;a4=null};var aA;(function(){aA=function(a5,a4,a6){this.url="http://isdspeed.qq.com/cgi-bin/r.cgi?flag1="+a5+"&flag2="+a4+"&flag3="+a6+"&";this.p0=aS();this.points=[this.p0]};aA.prototype={addPoint:function(a4,a7){var a6=this.points;if(a4>=a6.length){for(var a5=a6.length;a5<a4;a5++){a6.push(0)}}a7=a7||(aS()-this.p0);a6[a4]=a7;return this},pushPoint:function(a4){a4=a4||(aS()-this.p0);this.points.push(a4);return this},send:function(){var a5=this.url,a7=this.points;for(var a6=1,a4=a7.length;a6<a4;a6++){if(a7[a6]){a5+=a6+"="+a7[a6]+"&"}}(Math.random()<ac)&&i(a5);return this}}})();var N=new aA("7818","4","1");var C=/^https/.test(aP.location.href);var aN=P.domain;var l=function(){var a5=/\.(?:(?:edu|gov|com|org|net)\.cn|co\.nz)$/,a4=/^[12]?\d?\d\.[12]?\d?\d\.[12]?\d?\d\.[12]?\d?\d$/,a6=a5.test(aN)?-3:a4.test(aN)?0:-2;return aN.split(".").slice(a6).join(".")}();var aQ=function(){var a5=l,a4=/^[12]?\d?\d\.[12]?\d?\d\.[12]?\d?\d\.[12]?\d?\d$/,a6=/^localhost$/;return aZ.indexOf(a5)===-1&&!a4.test(a5)&&!a6.test(a5)}();var H=function(){try{var a6=/^http[s]?:[\/]{2,3}([^\/$]+)/.exec(location.href)[1];var a5=new RegExp("(^|,)"+a6);if(a5.test(t)){return true}var a4=l,a8=new RegExp("(^|,)"+l);IPReg=/^[12]?\d?\d\.[12]?\d?\d\.[12]?\d?\d\.[12]?\d?\d$/,LocalReg=/^localhost$/;return !a8.test(aR)&&!IPReg.test(a4)&&!LocalReg.test(a4)}catch(a7){}}();var aJ=function(a7){a7=a7.toLowerCase();var a6={};var a5=/(chrome)[ \/]([\w.]+)/.exec(a7)||/(webkit)[ \/]([\w.]+)/.exec(a7)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a7)||/(msie) ([\w.]+)/.exec(a7)||a7.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a7)||[];var a4={browser:a5[1]||"",version:a5[2]||"0"};if(a4.browser){a6[a4.browser]=true;a6.version=a4.version}if(a6.chrome){a6.webkit=true}else{if(a6.webkit){a6.safari=true}}a6.isMobile=a7.match(/(nokia|iphone|android|motorola|^mot\-|softbank|foma|docomo|kddi|up\.browser|up\.link|htc|dopod|blazer|netfront|helio|hosin|huawei|novarra|CoolPad|webos|techfaith|palmsource|blackberry|alcatel|amoi|ktouch|nexian|samsung|^sam\-|s[cg]h|^lge|ericsson|philips|sagem|wellcom|bunjalloo|maui|symbian|smartphone|midp|wap|phone|windows ce|iemobile|^spice|^bird|^zte\-|longcos|pantech|gionee|^sie\-|portalmmm|jig\s browser|hiptop|^ucweb|^benq|haier|^lct|opera\s*mobi|opera\*mini|320x320|240x320|176x220)/i);a6.isWindow=/windows|win32/.test(a7);return a6}(aP.navigator.userAgent);var A=function(a5,a4){return function(){a4.apply(a5,arguments)}};var L={log:aP.console&&aw?function(a4){aP.console.log(a4)}:function(){}};var o=function(a4){return function(){return Math.max(a4.documentElement.scrollTop,a4.body.scrollTop)}}(P);var Y=function(a4){return function(){return a4.compatMode=="CSS1Compat"?a4.documentElement.clientWidth:a4.body.clientWidth}}(P);var r=function(a4){return function(){return a4.compatMode=="CSS1Compat"?a4.documentElement.clientHeight:a4.body.clientHeight}}(P);var V=P.documentElement.contains?function(a6,a5){var a7=a6.nodeType===9?a6.documentElement:a6,a4=a5&&a5.parentNode;return a6===a4||!!(a4&&a4.nodeType===1&&a7.contains&&a7.contains(a4))}:P.documentElement.compareDocumentPosition?function(a5,a4){return a4&&!!(a5.compareDocumentPosition(a4)&16)}:function(a5,a4){while((a4=a4.parentNode)){if(a4===a5){return true}}return false};var ag=function(){var a4=P.defaultView&&P.defaultView.getComputedStyle?function(a8,a7){a7=a7.replace(/([A-Z])/g,"-$1").toLowerCase();var a6=P.defaultView.getComputedStyle(a8,"");return a6&&a6.getPropertyValue(a7)}:function(a7,a6){return a7.currentStyle[a6]};var a5=function(a9,a8){if(!V(a9,P)){return a8()}var a6={opacity:0,filter:"alpha(opacity=0)"},a7=a9.parentNode,ba=a9.nextSibling;div=P.createElement("div"),returnValue;div.appendChild(a9);ag(div,a6);ag(a9,a6);P.body.appendChild(div);returnValue=a8();ba?a7.insertBefore(a9,ba):a7.appendChild(a9);div.parentNode.removeChild(div);return returnValue};return function(a9,a8,ba){var a7;if(!ba){if(typeof a8==="string"){return a5(a9,function(){return a4(a9,a8)})}if(typeof a8!=="object"){new TypeError("Arg style should be string or object")}a7=[];for(var a6 in a8){a7.push(a6+":"+a8[a6])}a7=a7.join(";")}else{a7=a8+":"+ba}a7=a7.replace(/([A-Z])/g,"-$1").toLowerCase();a9.style.cssText+=";"+a7;return a9}}();var a0=function(){return{addClass:function(a5,a4){if(!a5||!a4){return a5}if(!a5.className){a5.className=a4;return a5}if(this.hasClass(a5,a4)){return a5}a5.className+=" "+a4;return a5},hasClass:function(a5,a4){return(a5&&a4)?new RegExp("\\b"+a4+"\\b").test(a5.className):false},removeClass:function(a5,a4){if(!a5||!a4){return a5}if(!this.hasClass(a5,a4)){return a5}if(a5.className){a5.className=a5.className.replace(a4,"")}else{a5.setAttribute=a5.getAttribute("class").replace(a4,"")}return a5}}}();var Q=function(a4){return a4.addEventListener?function(a7,a5,a6){a7.addEventListener(a5,a6);return a7}:function(a7,a5,a6){a7.attachEvent("on"+a5,a6);return a7}}(aP);var W=function(a4){return a4.removeEventListener?function(a7,a5,a6){a7.removeEventListener(a5,a6);return a7}:function(a7,a5,a6){a7.detachEvent("on"+a5,a6);return a7}}(aP);var aG=function(a5,a4){a4=a4||aP;if(/loaded|complete|undefined/.test(a4.document.readyState)){a5()}else{Q(a4,"load",a5)}return a4};var aE=function(a6,ba){ba=ba||{};var a8=ba.context||aP,a4=a8.document||a4,bb=ba.callback;var a9=a4.getElementsByTagName("head")[0],a7=a9.getElementsByTagName("base")[0],a5=a4.createElement("script");a5.onload=a5.onerror=a5.onreadystatechange=function(bc){if(/loaded|complete|undefined/.test(a5.readyState)){a5.onload=a5.onerror=a5.onreadystatechange=null;if(a5.parentNode){a5.parentNode.removeChild(a5)}a5=null;bb&&bb(bc||a8.event,a5)}};a5.type="text/javascript";a5.charset=ba.charset||"utf-8";a5.async=true;a5.src=a6;(function(){try{a7?a9.insertBefore(a5,a7):a9.appendChild(a5)}catch(bc){setTimeout(arguments.callee,0)}})();return a5};var aa=function(){return{load:function(a5,a4,a8){a8=a8||{};var a6=a8.context||P;var a7=a6.createElement("link");a7.name=a5;a7.type="text/css";a7.setAttribute("rel","stylesheet");a7.setAttribute("href",a4);(function(){try{var a9=a6.getElementsByTagName("head")[0];a9.insertBefore(a7,a9.firstChild)}catch(ba){setTimeout(arguments.callee,1)}})();return a7},add:function(a4,a8,a9){a9=a9||{};var a5=a9.context||P;var a7=a5.createElement("style");a7.type="text/css";a7.name=a4;var a6=a5.getElementsByTagName("body")[0];a6.insertBefore(a7,a6.firstChild);if(a7.styleSheet){a7.styleSheet.cssText=a8}else{a7.appendChild(a5.createTextNode(a8))}return a7}}}();var aL=(function(){var a4=0;return function(a7,a9,ba){if(!ba){ba=a9;a9={}}var a5="JSONP_CALLBACK_"+a4++,a6;aP[a5]=function(){ba&&ba.apply(aP,arguments);a6.parentNode.removeChild(a6);aP[a5]=null};a9.cb=a5;var bb=[];for(var a8 in a9){if(a9[a8]&&a9.hasOwnProperty(a8)){bb.push(a8+"="+encodeURIComponent(a9[a8]||""))}}a7+=(a7.indexOf("?")>-1?"&":"?")+bb.join("&");a6=aE(a7)}})();var ae;(function(){ae={set:function(a5,a7,a6,a9,a4){if(a4){a4=new Date(aS()+a4)}var a8=a5+"="+escape(a7)+((a4)?"; expires="+a4.toGMTString():"")+((a9)?"; path="+a9:"")+((a6)?"; domain="+a6:"");if(a8.length<4096){aP.document.cookie=a8}return ae},get:function(a5){var a4=aP.document.cookie.match(new RegExp("(^| )"+a5+"=([^;]*)(;|$)"));if(a4!=null){return unescape(a4[2])}return null},del:function(a4,a5,a6){if(this.get(a4)){aP.document.cookie=a4+"="+((a6)?"; path="+a6:"")+((a5)?"; domain="+a5:"")+";expires=Thu, 01-Jan-1970 00:00:01 GMT"}},find:function(a4){return aP.document.cookie.match(a4).split(",")}}})();var k;(function(){var a4=ae;k=function(a5){this.blockIndex=a5};k.get=function(a5){return a4.get(a5)};k.set=function(a5,a6){return a4.set(a5,a6,l)};k.del=function(a5){return a4.del(a5,l)};k.find=function(){return a4.find.apply(a4,arguments)};k.prototype={set:function(a5,a6){return a4.set(this.blockIndex+a5,a6,l)},get:function(a5){return a4.get(this.blockIndex+a5)},del:function(a5){return a4.del(this.blockIndex+a5,l)},find:function(a9){var a8=a4.find(new RegExp(this.blockIndex+"[^=]*")),a7=a8.join(";").replace(new RegExp(this.blockIndex,"g"),"").split(";");for(var a6=0,ba,a5=[];ba=a7[a6++];){if(a9.test&&a9.test(ba)){a5.push(ba);continue}if(ba.indexOf(a9)>-1){a5.push(ba)}}return a5}}})();var d=function(){var a4={container:P.getElementsByTagName("body")[0],template:['<div class="WPA-CONFIRM">','<h3 class="WPA-CONFIRM-TITLE"><%=title%></h3>','<div class="WPA-CONFIRM-CONTENT" style="">',"<%=content%>","</div>",'<div class="WPA-CONFIRM-PANEL" style=""><%=buttons%></div>',"</div>"].join(""),buttonTemplate:['<a href="javascript:;" class="WPA-CONFIRM-BUTTON"><span class="WPA-CONFIRM-BUTTON-PADDING WPA-CONFIRM-BUTTON-LEFT"></span><span class="WPA-CONFIRM-BUTTON-TEXT"><%=text%></span><span class="WPA-CONFIRM-BUTTON-PADDING WPA-CONFIRM-BUTTON-RIGHT"></span></a>'].join(""),cssText:[".WPA-CONFIRM { z-index:2147483647; min-width:400px; min-height:105px; width:auto!important; height:auto!important; width:400px; height:105px; margin:0; padding:12px 8px 30px 18px; border:1px solid #3473a3; border-radius:3px; background-color:#f9fcff;}",".WPA-CONFIRM-TITLE { height:12px; margin:0; padding:0; line-height:12px; color:#234864; font-weight:bold; font-size:12px;}",".WPA-CONFIRM-CONTENT { margin:0; padding:19px 10px 0 0; line-height:19px; color:#234864; font-size:12px;}",".WPA-CONFIRM-PANEL { position:absolute; right:8px; bottom:8px; margin:0; padding:0; text-align:right;}",".WPA-CONFIRM-BUTTON { position:relative; display:inline-block!important; display:inline; zoom:1; min-width:62px; height:22px; margin:0 0 0 5px; padding:0 4px; background:url(http://cdn.b.qq.com/account/bizqq/images/wpa/wpa_confirm_sprites.png) repeat-x 0 -163px; line-height:22px; color:#234864; text-decoration:none; font-size:12px; text-align:center;}",".WPA-CONFIRM-BUTTON:hover { background-position:0 -207px; text-decoration:none; color:##234864;}",".WPA-CONFIRM-BUTTON:active { background-position:0 -251px; text-decoration:none; color:##234864;}",".WPA-CONFIRM-BUTTON-FOCUS { background-position:0 -31px;}",".WPA-CONFIRM-BUTTON-FOCUS:hover { background-position:0 -75px;}",".WPA-CONFIRM-BUTTON-FOCUS:active { background-position:0 -119px;}",".WPA-CONFIRM-BUTTON-PADDING { position:absolute; left:0; top:0; display:inline-block!important; display:inline; zoom:1; width:4px; height:22px; background:url(http://cdn.b.qq.com/account/bizqq/images/wpa/wpa_confirm_sprites.png) no-repeat 0 -141px;}",".WPA-CONFIRM-BUTTON:hover .WPA-CONFIRM-BUTTON-PADDING { background-position:0 -185px;}",".WPA-CONFIRM-BUTTON:active .WPA-CONFIRM-BUTTON-PADDING { background-position:0 -229px;}",".WPA-CONFIRM-BUTTON-FOCUS .WPA-CONFIRM-BUTTON-PADDING { background-position:0 -9px;}",".WPA-CONFIRM-BUTTON-FOCUS:hover .WPA-CONFIRM-BUTTON-PADDING { background-position:0 -53px;}",".WPA-CONFIRM-BUTTON-FOCUS:active .WPA-CONFIRM-BUTTON-PADDING { background-position:0 -97px;}",".WPA-CONFIRM-BUTTON-RIGHT { left:auto; right:0; background-position:-5px -141px;}",".WPA-CONFIRM-BUTTON:hover .WPA-CONFIRM-BUTTON-RIGHT { background-position:-5px -185px;}",".WPA-CONFIRM-BUTTON:active .WPA-CONFIRM-BUTTON-RIGHT { background-position:-5px -229px;}",".WPA-CONFIRM-BUTTON-FOCUS .WPA-CONFIRM-BUTTON-RIGHT { background-position:-5px -9px;}",".WPA-CONFIRM-BUTTON-FOCUS:hover .WPA-CONFIRM-BUTTON-RIGHT { background-position:-5px -53px;}",".WPA-CONFIRM-BUTTON-FOCUS:active .WPA-CONFIRM-BUTTON-RIGHT { background-position:-5px -97px;}"].join(""),buttons:[{isFocus:true,text:"\u786E\u8BA4",events:{click:function(){this.remove()}}},{text:"\u53D6\u6D88",events:{click:function(){this.remove()}}}],modal:true};aa.add("_WPA_CONFIRM_STYLE",a4.cssText);var a5=function(a6){this.opts=a6;this.render()};a5.prototype={render:function(){var a7=this,a8=this.opts,a6=this.container=a8.container||P.getElementsByTagName("body")[0];var bc=a8.template||a4.template,bb="WPA_BUTTONS_PLACE"+(+new Date()%100)+Math.floor(Math.random()*100);bc=bc.replace(/<%=title%>/g,a8.title||"").replace(/<%=content%>/g,a8.content||"").replace(/<%=buttons%>/g,'<div id="'+bb+'"></div>');var ba=P.createElement("div"),a9;ba.innerHTML=bc;this.$el=a9=ba.firstChild;(function(){try{a6.appendChild(a9)}catch(bd){setTimeout(arguments.callee,1);return}if(a8.modal||a4.modal){a7.renderModal()}a7.renderButtons(bb);a7.setCenter()})()},renderButtons:function(a7){var ba=P.getElementById(a7),bd=ba.parentNode;bd.removeChild(ba);var bh=this.opts.buttons||a4.buttons,a8=this.opts.buttonTemplate||a4.buttonTemplate,bg=P.createElement("div"),bc,a6,bf;for(var bb=0,a9=bh.length;bb<a9;bb++){a6=bh[bb];bg.innerHTML=a8.replace("<%=text%>",a6.text);bc=bg.firstChild;a6.isFocus&&a0.addClass(bc,"WPA-CONFIRM-BUTTON-FOCUS");if(a6.events){bf=a6.events;for(var be in bf){if(bf.hasOwnProperty(be)){Q(bc,be,A(this,bf[be]))}}}bd.appendChild(bc)}},renderModal:function(){var a8=this.container,a9=ag(a8,"width"),a7=ag(a8,"height"),bc=ag(a8,"overflow");var a6=P.createElement("div"),ba={position:"fixed",top:0,left:0,zIndex:2147483647,width:Y()+"px",height:r()+"px",backgroundColor:"black",opacity:0.3,filter:"alpha(opacity=30)"};var bb=P.compatMode==="BackCompat";if((aJ.msie&&parseInt(aJ.version,10)<7)||bb){ba.position="absolute";setInterval(A(a6,function(){this.style.top=o()+"px"}),128)}ag(a6,ba);a8.insertBefore(a6,this.$el);this.modal=a6;Q(aP,"resize",A(a6,function(){ag(this,{width:Y()+"px",height:r()+"px"})}))},show:function(){this.css("display","block");this.modal&&ag(this.modal,"display","block");return this},hide:function(){this.css("display","none");this.modal&&ag(this.modal,"display","none");return this},remove:function(){this.$el.parentNode.removeChild(this.$el);this.modal&&this.modal.parentNode.removeChild(this.modal);return this},css:function(){var a6=[this.$el].concat(Array.prototype.slice.call(arguments));return ag.apply(this,a6)},setCenter:function(){this.css({position:"absolute",top:"50%",left:"50%"});var a6={position:"fixed",marginLeft:"-"+this.outerWidth()/2+"px",marginTop:"-"+this.outerHeight()/2+"px"};var a7=P.compatMode==="BackCompat";if((aJ.msie&&parseInt(aJ.version,10)<7)||a7){a6.position="absolute";a6.marginTop=0;var a8=a6.top=(r()-this.outerHeight())/2;setInterval(A(this.$el,function(){this.style.top=o()+a8+"px"}),128)}this.css(a6)},outerWidth:function(){return this.$el.offsetWidth},outerHeight:function(){return this.$el.offsetHeight}};return a5}();var F;(function(){F={add:function(a5){var a4=P.createElement("script");a4.src=a5;P.getElementsByTagName("head")[0].appendChild(a4)}}})();var y;(function(){var a9="run",a8="pause",a6="drop",a5=500;var a4=function(){this.circle=[];this.pos=0;setInterval(A(this,this.loop),16)};a4.prototype={newTask:function(bb,bc){var ba=new a7(bb,bc);this.circle.push(ba);return ba},once:function(ba,bb){return this.newTask(function(){ba.apply(this);this.drop()},bb)},loop:function(){var bf=this.circle,be=this.pos,bc=bf.length,bd=aS(),bb=a5,ba=bf[be];while(bc>0&&aS()-bd<bb){if(ba.isRunning()){ba.execute()}else{if(ba.isDropped()){bf.splice(be,1);be--}}be=(be+1)%bf.length;ba=bf[be];bc--}this.pos=be}};var a7=function(ba,bb){this.fn=ba;this.gap=bb;this.status=a8;this.lastExecTime=aS()};a7.prototype={run:function(){this.status=a9;return this},pause:function(){this.status=a8;return this},drop:function(){this.status=a6;return this},execute:function(){if(aS()-this.lastExecTime<this.gap){return false}this.fn();this.lastExecTime=aS();return true},getGap:function(){return this.gap},setGap:function(ba){this.gap=ba;return this},isRunning:function(){return this.status===a9},isPaused:function(){return this.status===a8},isDropped:function(){return this.status===a6}};y=new a4()})();var Z;(function(a4){var a6=a4.title,a5=y.newTask(function(){var a7=a4.title;a4.title=a7.substr(1,a7.length)+a7.substr(0,1)},at);Z={on:function(a7){a4.title=a7+(""+a4.title);a5.run()},off:function(){a5.pause();a4.title=a6}}})(P);var x=function(a9,a7,a5,a8){var a6=a5-a9.length,a4;if(a8===false){for(a4=0;a4<a6;a4++){a9+=a7}}else{for(a4=0;a4<a6;a4++){a9=a7+a9}}return a9};var a3=function(){var a5=function(a8,a7,a6){return a8.replace(new RegExp("(^[\\d]{"+a7+"})\\d"),"$1#"+a6).replace("#","")};var a4=function(a6){this.bits=a6};a4.prototype={pad:function(a8,a7,a9){var a6=Array.prototype.slice.call(arguments);this.bits=a8.apply(this,[this.bits].concat(a6));return this},padLeft:function(){return A(this,this.pad)},padRight:function(){var a6=Array.prototype.slice.call(arguments).push(false);return this.pad.apply(this,a6)},getChar:function(a6){return this.bits.charAt(a6)},setChar:function(a6,a7){this.bits=a5(this.bits,a6,a7);return this},reverse:function(){var a8=this.bits,a7=a8.length;for(var a6=0;a6<a7;a6++){this.setChar(a6,parseInt(a8[a6],2)^1)}return this}};return a4}();var ao=function(a5){var a4;return getVersion=function(bb){if(typeof a4!=="undefined"){bb(a4);return}if(a5.msie){try{var a8=new ActiveXObject("TimwpDll.TimwpCheck");a4=a8.GetHummerQQVersion()}catch(ba){a4=null}bb(a4);return}if(a5.mozilla||a5.webkit){var a6=P.getElementsByTagName("body")[0],a9=P.createElement("iframe"),a7="http://cdn.b.qq.com/account/bizqq/wpa/getQQVersion.html";a9.style.display="none";Q(aP,"message",function(bc){if(bc.origin!=="http://cdn.b.qq.com"){return}a4=bc.data;bb(a4);W(aP,"message",arguments.callee);a9.parentNode.removeChild(a9)});a9.src=a7;a6.insertBefore(a9,a6.firstChild);return}a4=null;bb(a4)}}(aJ);var aI;(function(){var a5={a01:{templ:'<div id="wpa_release_a01" class="wpa_release_a01"><a id="launchBtn" href="javascript:;"></a></div>',script:"js/wpa_a01",style:"css/wpa",init:function(ba,bb){ba.getElementById("launchBtn").innerHTML=bb.xssFilter(bb.params.btn1);bb.getOnlineStatus();bb.addEvent(ba.getElementById("launchBtn"),"click",bb.proxy(bb,bb.chat))}},a02:{templ:'<div id="wpa_release_a02" class="wpa_release_a02"><a id="launchBtn" href="javascript:;"></a></div>',script:"js/wpa_a02",style:"css/wpa",init:function(ba,bb){ba.getElementById("launchBtn").innerHTML=bb.xssFilter(bb.params.btn1);bb.getOnlineStatus();bb.addEvent(ba.getElementById("launchBtn"),"click",bb.proxy(bb,bb.chat))}},a03:{templ:'<div id="wpa_release_a03" class="wpa_release_a03"><a id="launchBtn" href="javascript:;"></a></div>',script:"js/wpa_a03",style:"css/wpa",init:function(ba,bb){ba.getElementById("launchBtn").innerHTML="\u533F\u540D\u4EA4\u8C08";bb.getOnlineStatus();bb.addEvent(ba.getElementById("launchBtn"),"click",bb.proxy(bb,bb.chat));bb.wpa.getConfig()}},a04:{templ:'<div id="wpa_release_a04" class="wpa_release_a04"><a id="launchBtn" href="javascript:;"></a></div>',script:"js/wpa_a04",style:"css/wpa",init:function(ba,bb){ba.getElementById("launchBtn").innerHTML=bb.xssFilter(bb.params.btn1);bb.getOnlineStatus();bb.addEvent(ba.getElementById("launchBtn"),"click",bb.proxy(bb,bb.chat))}},a05:{templ:'<div id="wpa_release_a05" class="wpa_release_a05"><a id="launchBtn" href="javascript:;"></a></div>',script:"js/wpa_a05",style:"css/wpa",init:function(ba,bb){ba.getElementById("launchBtn").innerHTML=bb.xssFilter(bb.params.btn1);bb.getOnlineStatus();bb.addEvent(ba.getElementById("launchBtn"),"click",bb.proxy(bb,bb.chat))}},a06:{templ:'<div id="wpa_release_a06" class="wpa_release_a06"><a id="launchBtn" href="javascript:;"></a></div>',script:"js/wpa_a06",style:"css/wpa",init:function(ba,bb){ba.getElementById("launchBtn").innerHTML=bb.xssFilter(bb.params.btn1);bb.getOnlineStatus();bb.addEvent(ba.getElementById("launchBtn"),"click",bb.proxy(bb,bb.chat))}},a07:{templ:'<div id="wpa_release_a07" class="wpa_release_a07 wpa_release_a07_01"><div><table><tr><td valign="middle" id="btn"></td></tr></table></div></div>',script:"js/wpa_a07",style:"css/wpa",init:function(ba,bb){ba.getElementById("btn").innerHTML=bb.xssFilter(bb.params.btn1);bb.addClass(ba.getElementById("wpa_release_a07"),"wpa_release_a07_0"+parseInt(bb.params.tx,10));bb.getOnlineStatus();bb.addEvent(ba.getElementById("wpa_release_a07"),"click",bb.proxy(bb,bb.chat))}},a08:{templ:'<div id="wpa_release_a08" class="wpa_release_a08 wpa_release_a08_01"><div><table><tr><td valign="middle" id="launchBtn"></td></tr></table></div></div>',script:"js/wpa_a08",style:"css/wpa",init:function(ba,bb){ba.getElementById("launchBtn").innerHTML=bb.xssFilter(bb.params.btn1);bb.addClass(ba.getElementById("wpa_release_a08"),"wpa_release_a08_0"+parseInt(bb.params.tx,10));bb.getOnlineStatus();bb.addEvent(ba.getElementById("wpa_release_a08"),"click",bb.proxy(bb,bb.chat))}},a09:{templ:'<div id="wpa_release_a09" class="wpa_release_a09 wpa_release_a09_01"><a id="wpa_release_a09_btn" href="javascript:;"><span class="wpa_release_a09_c_s1" id="wpa_release_a09_c_s1"></span><br /><span class="wpa_release_a09_c_s2" id="wpa_release_a09_c_s2"></span></a></div>',script:"js/wpa_a09",style:"css/wpa",init:function(ba,bb){ba.getElementById("wpa_release_a09_c_s1").innerHTML=bb.xssFilter(bb.params.btn1);ba.getElementById("wpa_release_a09_c_s2").innerHTML=bb.xssFilter(bb.params.btn2);bb.addClass(ba.getElementById("wpa_release_a09"),"wpa_release_a09_0"+parseInt(bb.params.tx,10));bb.getOnlineStatus();bb.addEvent(ba.getElementById("wpa_release_a09"),"click",bb.proxy(bb,bb.chat))}},b01:{templ:['<div id="wpa_release_b01" class="wpa_release_b01 wpa_release_b01_01">','<div id="wpa_release_b01_title" class="wpa_release_b01_title"></div>','<div id="wpa_release_b01_content" class="wpa_release_b01_content"></div>','<div id="wpa_release_b01_btn_box" class="wpa_release_b01_btn_box"><a id="wpa_release_b01_btn" href="javascript:;"></a></div>',"</div>"].join(""),script:"js/wpa_b01",style:"css/wpa",init:function(bb,bc){bb.getElementById("wpa_release_b01_btn").innerHTML=bc.xssFilter(bc.params.btn1);bb.getElementById("wpa_release_b01_title").innerHTML=bc.xssFilter(bc.params.title);var ba=decodeURIComponent(bc.params.tx);if(ba.indexOf("http")===-1){ba=/^https/.test(aP.location.href)?"https://id.b.qq.com/static/account/bizqq/images/wpa/wpa_tx_0"+ba+".jpg":"http://cdn.b.qq.com/account/bizqq/images/wpa/wpa_tx_0"+ba+".jpg"}bb.getElementById("wpa_release_b01_content").innerHTML='<img src="'+bc.xssFilter(ba)+'" alt="'+bc.xssFilter(bc.params.title)+'" />';bc.addClass(bb.getElementById("wpa_release_b01"),"wpa_release_b01_0"+parseInt(bc.params.csty,10));bc.addEvent(bb.getElementById("wpa_release_b01_btn"),"click",bc.proxy(bc,bc.chat))}},b02:{templ:['<div id="wpa_release_b02" class="wpa_release_b02 wpa_release_b02_01">','<div class="wpa_release_b02_title"><span id="wpa_release_b02_title"></span></div>','<div id="wpa_release_b02_content" class="wpa_release_b02_content">','<div id="wpa_release_b02_c_lc" class="wpa_release_b02_c_lc"></div>','<div id="wpa_release_b02_c_rc" class="wpa_release_b02_c_rc"></div>',"</div>",'<div id="wpa_release_b02_btn_box" class="wpa_release_b02_btn_box"><a id="wpa_release_b02_btn_yes" class="wpa_release_b02_btn_yes" href="javascript:;"></a><a id="wpa_release_b02_btn_no" class="wpa_release_b02_btn_no" href="javascript:;"></a></div>','<div id="closeBtn" class="closeBtn"></div>',"</div>"].join(""),script:"js/wpa_b02",style:"css/wpa",init:function(ba,bc){var bi=bc.params,bf=bi.btn1||"",bd=bi.btn2||"",bm=bi.title||"",bo=bi.cot||"",bg=ba.getElementById("wpa_release_b02"),bn=ba.getElementById("wpa_release_b02_title"),bh=ba.getElementById("wpa_release_b02_c_lc"),bb=ba.getElementById("wpa_release_b02_c_rc"),be=ba.getElementById("wpa_release_b02_btn_yes"),bk=ba.getElementById("wpa_release_b02_btn_no"),bl=ba.getElementById("closeBtn");bn.innerHTML=bc.xssFilter(bm);bb.innerHTML=bc.xssFilter(bo).replace(/\n/g,"<br />");be.innerHTML=bc.xssFilter(bf);bk.innerHTML=bc.xssFilter(bd);var bj=decodeURIComponent(bi.tx);if(bj.indexOf("http")===-1){bj=/^https/.test(aP.location.href)?"https://id.b.qq.com/static/account/bizqq/images/wpa/wpa_tx_0"+bj+".jpg":"http://cdn.b.qq.com/account/bizqq/images/wpa/wpa_tx_0"+bj+".jpg"}bh.innerHTML='<img src="'+bc.xssFilter(bj)+'" alt="'+bc.xssFilter(bm)+'" />';bc.addClass(bg,"wpa_release_b02_0"+parseInt(bc.params.csty,10));bc.addEvent(be,"click",bc.proxy(bc,bc.chat));bc.addEvent(bk,"click",bc.proxy(bc,bc.remove));bc.addEvent(bl,"click",bc.proxy(bc,bc.remove))}},b03:{templ:['<div id="wpa_release_b03" class="wpa_release_b03 wpa_release_b03_01">','<div class="wpa_release_b03_title"><span id="wpa_release_b03_title"></span></div>','<div id="wpa_release_b03_content" class="wpa_release_b03_content">','<p id="wpa_release_b03_c_1" class="wpa_release_b03_c_1"></p>','<p id="wpa_release_b03_c_2" class="wpa_release_b03_c_2"></p>',"</div>",'<div id="wpa_release_b03_btn_box" class="wpa_release_b03_btn_box"><a id="wpa_release_b03_btn_yes" class="wpa_release_b03_btn_yes" href="javascript:;"></a><a id="wpa_release_b03_btn_no" class="wpa_release_b03_btn_no" href="javascript:;"></a></div>','<div id="closeBtn" class="closeBtn"></div>',"</div>"].join(""),script:"js/wpa_b03",style:"css/wpa",init:function(bb,bf){var bi=bf.params,bh=bi.btn1||"",bg=bi.btn2||"",bm=bi.title||"",bo=bi.cot1||"",bn=bi.cot2||"",be=bb.getElementById("wpa_release_b03"),bj=bb.getElementById("wpa_release_b03_title"),bc=bb.getElementById("wpa_release_b03_c_1"),ba=bb.getElementById("wpa_release_b03_c_2"),bk=bb.getElementById("wpa_release_b03_btn_yes"),bd=bb.getElementById("wpa_release_b03_btn_no"),bl=bb.getElementById("closeBtn");bj.innerHTML=bf.xssFilter(bm);bc.innerHTML=bf.xssFilter(bo);ba.innerHTML=bf.xssFilter(bn);bk.innerHTML=bf.xssFilter(bh);bd.innerHTML=bf.xssFilter(bg);bf.addClass(be,"wpa_release_b03_0"+parseInt(bf.params.tx,10));bf.addEvent(bk,"click",bf.proxy(bf,bf.chat));bf.addEvent(bd,"click",bf.proxy(bf,bf.remove));bf.addEvent(bl,"click",bf.proxy(bf,bf.remove))}},b04:{templ:['<div id="wpa_release_b04" class="wpa_release_b04 wpa_release_b04_01">','<div class="wpa_release_b04_title"><span id="wpa_release_b04_title"></span></div>','<div id="wpa_release_b04_content" class="wpa_release_b04_content">','<p id="wpa_release_b04_c_1" class="wpa_release_b04_c_1"></p>','<p id="wpa_release_b04_c_2" class="wpa_release_b04_c_2"></p>',"</div>",'<div id="wpa_release_b04_btn_box" class="wpa_release_b04_btn_box"><a id="wpa_release_b04_btn" class="wpa_release_b04_btn" href="javascript:;"></a></div>','<div id="closeBtn" class="closeBtn"></div>',"</div>"].join(""),script:"js/wpa_b04",style:"css/wpa",init:function(bc,be){var bh=be.params,bf=bh.kfuin||"",bj=bh.title||"",bk=bh.cot1||"",bg=bh.btn1||"",bd=bc.getElementById("wpa_release_b04"),bm=bc.getElementById("wpa_release_b04_title"),bb=bc.getElementById("wpa_release_b04_c_1"),ba=bc.getElementById("wpa_release_b04_c_2"),bl=bc.getElementById("wpa_release_b04_btn"),bi=bc.getElementById("closeBtn");bm.innerHTML=be.xssFilter(bf);bb.innerHTML=be.xssFilter(bj);ba.innerHTML=be.xssFilter(bk).replace(/\n/g,"<br />");bl.innerHTML=be.xssFilter(bg);be.addClass(bd,"wpa_release_b04_0"+parseInt(be.params.tx,10));be.addEvent(bl,"click",be.proxy(be,be.chat));be.addEvent(bi,"click",be.proxy(be,be.remove))}},i01:{templ:['<div id="wpa_release_i01" class="wpa_release_i01">','<div class="bg"></div>','<a id="wpa_release_i01_closeBtn" class="wpa_release_i01_closeBtn" href="javascript:;">close</a>','<a id="wpa_release_i01_confirmBtn" class="wpa_release_i01_confirmBtn" href="javascript:;">\u5F00\u59CB\u4EA4\u8C08</a>','<p id="cnt" class="cnt">\u60A8\u597D\uFF0C\u8BF7\u6709\u4EC0\u4E48\u53EF\u4EE5\u5E2E\u5230\u60A8\uFF1F\u8BF7\u63A5\u53D7\u804A\u5929\u9080\u8BF7\u3002</p>','<div id="closeBtn" class="closeBtn"></div>',"</div>"].join(""),script:"js/wpa_i01",style:"css/wpa",init:function(ba,bc){var bd=ba.getElementById("closeBtn"),bb=ba.getElementById("wpa_release_i01_confirmBtn");ba.getElementById("cnt").innerHTML=bc.xssFilter(bc.params.msg);bc.addEvent(bd,"click",bc.proxy(bc,function(){this.remove();Z.off();i("http://visitor.crm2.qq.com/cgi/visitorcgi/ajax/reject_invite.php?nameAccount="+this.params.nameAccount+"&uid="+az)}));bc.addEvent(bb,"click",bc.proxy(bc,function(){this.chat();this.remove();Z.off();i("http://visitor.crm2.qq.com/cgi/visitorcgi/ajax/accept_invite.php?nameAccount="+this.params.nameAccount+"&uid="+az)}))}},w01:{templ:'<div id="wpa_release_w01" class="wpa_release_w01"><a id="wpa_release_w01_btn" href="javascript:;"></a></div>',script:"js/wpa_w01",style:"css/wpa",init:function(ba,bb){ba.getElementById("launchBtn").innerHTML=bb.xssFilter(bb.params.btn1);bb.getOnlineStatus();bb.addEvent(ba.getElementById("launchBtn"),"click",bb.proxy(bb,bb.chat))}},w02:{templ:'<div id="wpa_release_w02" class="wpa_release_w02"><a id="wpa_release_w02_btn" href="javascript:;"></a></div>',script:"js/wpa_w02",style:"css/wpa",init:function(ba,bb){ba.getElementById("launchBtn").innerHTML=bb.xssFilter(bb.params.btn1);bb.getOnlineStatus();bb.addEvent(ba.getElementById("launchBtn"),"click",bb.proxy(bb,bb.chat))}}};var a4=function(bb,ba){this.doc=bb.document;this.wpa=ba;this.params=ba.params};a4.prototype={getJSONP:aL,proxy:A,onLoad:aG,setTimingRpt:function(bi,bh,bk,bd){var bn,bc=aP.performance||aP.webkitPerformance||aP.msPerformance,bb=["navigationStart","unloadEventStart","unloadEventEnd","redirectStart","redirectEnd","fetchStart","domainLookupStart","domainLookupEnd","connectStart","connectEnd","requestStart","responseStart","responseEnd","domLoading","domInteractive","domContentLoadedEventStart","domContentLoadedEventEnd","domComplete","loadEventStart","loadEventEnd"],bm=[],be,bl,bg=bk;if(bc&&(bn=bc.timing)){if(typeof(bn.msFirstPaint)!="undefined"){bb.push("msFirstPaint")}else{if(bd){bg=bd}}be=bn[bb[0]];for(var bj=1,bf=bb.length;bj<bf;bj++){bl=bn[bb[bj]];bl=(bl?(bl-be):0);if(bl>0){bm.push(bj+"="+bl)}}if(aP.d0){bm.push("30="+(aP.d0-be))}var ba="http://isdspeed.qq.com/cgi-bin/r.cgi?flag1="+bi+"&flag2="+bh+"&flag3="+bg+"&"+bm.join("&");i(ba)}},getOnlineStatus:function(){var bc=this,be=this.params;var bd=(be.al||be.a);if(!bd){return}var ba=this.doc.location.href.indexOf("https://id.b.qq.com")>-1;var bb=ba?"https://id.b.qq.com/crm/index.php?rr=wpa/kfstatus&isAjax=1&aty="+be.aty+"&al="+(be.al||be.a):"http://crm2.qq.com/cgi/portalcgi/get_kf_status.php?kfuin="+be.kfuin+"&aty="+be.aty+"&al="+bd;aL(bb,function(bf){var bg=bf.r===0&&bf.data.list[bd]!==1;bg&&bc.setOffline()})},setOffline:function(){this.addClass(this.doc.body,"offline")},addClass:a0.addClass,hasClass:a0.hasClass,removeClass:a0.removeClass,addEvent:Q,xssFilter:function(ba){if(!ba){return""}return ba.replace(/</g,"&lt;").replace(/>/,"&gt;").replace(/'/g,"&acute;").replace(/"/,"&quot;")},chat:function(){this.wpa.launchChat()},remove:function(){this.wpa.remove()}};var a9={},a6={},a8={};aI={newWPA:function(bc){var ba=bc.kfuin;if(!ba){return false}var bb=new a7(bc);a9[ba]?a9[ba].push(bb):a9[ba]=[bb];return bb},findInPage:function(ba){return a9[ba]!==z},getParams:function(){var bf=aP.document;var bd=bf.getElementsByTagName("script");if(!bd.length||bd.length<1){return false}bd=bd[bd.length-1];var bh=bd.src.substring(bd.src.indexOf("?")+1,bd.src.length),bb=bh.split("&"),bg={};for(var bc=0,be,ba;be=bb[bc++];){ba=be.split("=");bg[ba[0]]=decodeURIComponent(ba[1])}bg.referrer=bf.referrer.length>500?bf.referrer.substr(0,500):bf.referrer;bg.cref=aP.location.href.length>500?aP.location.href.substr(0,500):aP.location.href;bg.pt=bf.title.length>500?bf.title.substr(0,500):bf.title;if(bg.aty==="1"){bg.kfext=bg.a}bg.kfext=bg.kfext||"";bg.dm=l;return bg},invite:function(bb,bd){if(!bb){Z.on("\u3010\u60A8\u6709\u65B0\u4FE1\u606F\u3011");aI.newWPA(bd);return}try{var ba=A({params:bd},a7.prototype.launchChat);aP[bb]&&aP[bb](ba,bd.msg)}catch(bc){aI.newWPA(bd)}}};var a7=function(ba){this.params=ba;this.kfuin=this.nameAccount=ba.nameAccount=ba.kfuin;this.wty=ba.wty||aU;if(this.wty!==aU){return}this.render()};a7.prototype={getConfig:function(bh){if(this.sp){bh&&bh();return}var bc=this,ba=new a3("00"),bf=this.nameAccount,bb=function(bi){var bk=bc.params,bj=bc.nameAccount;bc.kfuin=bk.kfuin=bi;a6[bj]=bi;ba.setChar(0,"1")},bg=function(bi){bc.sid=bi;a8[bc.nameAccount+":"+l]=bi;ba.setChar(1,"1");bd()},bd=function(){if(ba.getChar(0)==="0"||ba.getChar(1)==="0"){bc.sp="";return}bc.sp=x(parseInt(az,10).toString(16),"0",16)+x(parseInt(bc.sid||"",10).toString(16),"0",16);L.log("session parameter:"+bc.sp)};if(a6[bf]){bb(a6[bf])}if(a8[bf+":"+l]){bg(a8[bf])}if(ba.bits==="11"){bh&&bh();return}var be={type:new a3(ba.bits).reverse().bits,kfuin:bf,nameAccount:bf};if(ba.getChar(1)==="0"){be.dm=l}aL("http://crm2.qq.com/cgi/wpacgi/get_wpa_click_params.php",be,function(bk){if(bk.numRet&&bk.numRet.r===0){var bi=(bk.numRet.kfuin||bf)+"";bb(bi)}if(bk.taRet&&bk.taRet.r===0){var bj=(bk.taRet.sid||"")+"";bg(bj)}bh&&bh()})},render:function(){var be=this.params,bj=be.wid;if(bj){var bc=P.getElementById(bj),bd=A(this,function(bk){this.wElem=bk;this.createDefinedWPA()});if(bc){bd(bc)}else{aG(A(this,function(){var bk=P.getElementById(bj);bk&&bd(bk)}))}return}var ba,bi,bg=parseInt(be.type),bh,bb=false;switch(bg){case 1:bh="a01";ba=102;bi=24;break;case 2:bh="a02";ba=102;bi=24;break;case 3:bh="a03";ba=84;bi=24;break;case 4:bh="a04";ba=120;bi=40;break;case 5:bh="a05";ba=126;bi=42;break;case 6:bh="a06";ba=126;bi=42;break;case 7:bh="a07";ba=174;bi=80;break;case 8:bh="a08";ba=174;bi=80;break;case 9:bh="a09";ba=230;bi=92;break;case 10:bh="b01";ba=106;bi=164;bb=true;break;case 11:bh="b02";ba=346;bi=164;bb=true;break;case 12:bh="b03";ba=404;bi=200;bb=true;break;case 13:bh="b04";ba=138;bi=320;bb=true;break;case 20:bh="i01";ba=368;bi=192;bb=true;break;case 30:bh="w01";ba=25;bi=25;break;case 31:bh="w02";ba=102;bi=24;break;case 14:bh="c01";break}this.type=bh;this.width=ba;this.height=bi;var bf=this;this.createWPA(function(){if((bg>9&&bg<14)||bg===20){bf.initFloatWPA()}})},createWPA:function(bd){var bc=new aA("7818","4","1");var ba="iframediv"+aS(),bi=this,bh=this.type,bb=this.width,bk=this.height,bl=a5[bh];var bf=P.readyState;if(bf==="loaded"||bf==="complete"){var be;try{be=P.createElement('<iframe id="'+ba+'" scrolling="no" frameborder="0" width="'+bb+'" height="'+bk+'" allowtransparency="true" src="about:blank"></iframe>')}catch(bg){be=P.createElement("iframe");be.id=ba;be.width=bb;be.height=bk;be.setAttribute("scrolling","no");be.setAttribute("frameborder",0);be.setAttribute("allowtransparency",true);be.setAttribute("src","about:blank")}P.getElementsByTagName("body")[0].appendChild(be)}else{P.write('<iframe id="'+ba+'" scrolling="no" frameborder="0" width="'+bb+'" height="'+bk+'" allowtransparency="true" src="about:blank"></iframe>')}var bj=0;(function(){var bo=bi.iframe=P.getElementById(ba);if(!bo){++bj;bj<20&&setTimeout(arguments.callee,50);return}if(aJ.msie){try{var bq=bo.contentWindow.document}catch(bp){bo.src="javascript:void((function(){document.open();document.domain='"+P.domain+"';document.close()})())"}}var bm=function(){var bu=bo.contentWindow,bt=bo.contentDocument||bu.document;var bs=new a4(bu,bi);bt.open();bt.write(['<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">','<html xmlns="http://www.w3.org/1999/xhtml">',"<head>",'<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />',aJ.msie&&bo.src!=="about:blank"?"<script>document.domain='"+P.domain+"';<\/script>":"","</head>","<body>",bl.templ,"</body>","</html>"].join(""));bt.close();aa.load("style",c+"css/wpa."+(af?"grey.":"")+"css?v="+ai,{context:bt});bl.init(bt,bs);var br=af?4:2;bc.addPoint(br).send()};if(/loaded|complete|undefined/.test(bo.readyState)){bm()}else{var bn=function(){W(bo,"load",bn);bm()};Q(bo,"load",bn)}bd()})()},initFloatWPA:function(){var bf=aP.document,bg=this.params,be=parseInt(bg.type),bd=this.iframe,bc=this.width,ba=this.height;bd.style.cssText=["display:none;","position:absolute;","z-index:2147483647!important;"].join(" ");aG(bb);function bb(){var bk=bd.style,bj=aJ.msie,bh=parseInt(aJ.version,10),bl=bf.compatMode==="BackCompat";bk.position=parseInt(bg.fsty)==0?"fixed":"absolute";if(parseInt(bg.fposX)==0){bk.left=8+"px";bk.right="auto";bk.marginLeft=0}else{if(parseInt(bg.fposX)==1){bk.left="50%";bk.right="auto";bk.marginLeft="-"+parseInt(bc/2)+"px"}else{bk.left="auto";bk.right=8+"px";bk.marginLeft=0}}if(parseInt(bg.fposY)==0){bk.top=8+"px";bk.bottom="auto";bk.marginTop=0}else{if(parseInt(bg.fposY)==1){bk.top="50%";bk.bottom="auto";bk.marginTop="-"+parseInt(ba/2)+"px"}else{bk.top="auto";bk.bottom=8+"px";bk.marginTop=0}}if((bj&bh<7)||bl){bk.position="absolute";if(parseInt(bg.fsty)==0){bk.marginTop=0;var bi;if(parseInt(bg.fposY)==0){bi=8}else{if(parseInt(bg.fposY)==1){bi=(r(bf)-ba)/2}else{bi=r(bf)-ba-8}}setInterval(function(){bk.top=o(bf)+bi+"px"},128)}}bk.display="block"}},createDefinedWPA:function(){Q(this.wElem,"click",A(this,this.launchChat))},remove:function(){var ba=this.iframe;ba.parentNode.removeChild(ba)},launchChat:function(){this.getConfig(A(this,function(){if(this.type==="a03"||!aJ.isWindow){this.launchAnonymousChat();return}var ba=this;ao(function(bb){if(bb){ba.launchAIOChat();return}new d({title:"\u53D1\u8D77\u4F1A\u8BDD\u63D0\u793A",content:"\u62B1\u6B49\uFF01\u65E0\u6CD5\u68C0\u6D4B\u5230\u60A8\u7535\u8111\u662F\u5426\u5B89\u88C5QQ\uFF0C\u8BF7\u60A8\u786E\u8BA4\u4EE5\u4FBF\u76F4\u63A5\u5411\u4F01\u4E1A\u53D1\u8D77\u4F1A\u8BDD\u3002",buttons:[{isFocus:true,text:"QQ\u5DF2\u5B89\u88C5\uFF0C\u70B9\u51FB\u4F1A\u8BDD",events:{click:function(){this.remove();ba.launchAIOChat()}}},{text:"\u672A\u5B89\u88C5\uFF0C\u53D1\u8D77\u7F51\u9875\u4F1A\u8BDD",events:{click:function(){this.remove();ba.launchAnonymousChat()}}}]})})}))},launchAIOChat:function(){var bb=P.createElement("iframe"),ba=P.getElementsByTagName("body")[0];bb.style.display="none";ba.insertBefore(bb,ba.firstChild);return function(){var bg=this.params,bc=this.kfuin,be={na:bg.nameAccount,kfuin:bc,aty:bg.aty,a:bg.a,sid:this.sid||"",uid:az||"",url:location.href,title:P.title,dm:l},bd=a2();var bf=new aA("7818","4","1");aL("http://wpd.b.qq.com/cgi/get_sign.php",be,function(bh){if(!bh||bh.r!==0||!bh.data){return}bb.src=bh.data.sign;var bi=bh.data.clkID;bf.addPoint(5).send();i("http://promreport.crm2.qq.com/wpaclick/r.gif?ty=1&kfuin="+bc+"&version="+ai+"&browser="+encodeURIComponent(navigator.userAgent)+"&bfrom=1&appointType="+bg.aty+"&appoint="+bg.a+"&clkID="+bi+"&guid="+bd);aP.taClick&&aP.taClick(bi,"clickid")});i("http://promreport.crm2.qq.com/wpaclickorg/r.gif?kfuin="+bc+"&version="+ai+"&browser="+encodeURIComponent(navigator.userAgent)+"&bfrom=1&appointType="+bg.aty+"&appoint="+bg.a+"&guid="+bd)}}(),launchAnonymousChat:function(){var ba=this.kfuin,bb="http://webchat.b.qq.com/webchat.htm?sid="+this.encrypt(this.kfuin.toString());aP.open(bb,"_blank","height=544, width=644,toolbar=no,scrollbars=no,menubar=no,status=no");var bc=this.params;i("http://promreport.crm2.qq.com/wpaclick/r.gif?ty=2&kfuin="+ba+"&version="+ai+"&browser="+encodeURIComponent(navigator.userAgent)+"&bfrom=1&appointType="+bc.aty+"&appoint="+bc.a)},encrypt:function(bb){var bf="8ABC7DLO5MN6Z9EFGdeJfghijkHIVrstuvwWSTUXYabclmnopqKPQRxyz01234",ba=bb.length,bl=[],bj,bi,bh,bk;var bc=function(bn){bl[bl.length]=bf.charAt(bn)};var be=bf.length;var bg=be*be;var bd=be*5;for(bk=0;bk<ba;bk++){bj=bb.charCodeAt(bk);if(bj<bd){bc(Math.floor(bj/be));bc(bj%be)}else{bc(Math.floor(bj/bg)+5);bc(Math.floor(bj/be)%be);bc(bj%be)}}var bm=bl.join("");return String(bm.length).length+String(bm.length)+bm}}})();var O;(function(){O=function(a4,a6,a5){this.kfuin=a4;this.pvid=a6;this.config=a5;this.genID();this.storage=new k(a4);this.monitors={master:y.newTask(A(this,this.masterMonitor),n).run(),invite:y.newTask(A(this,this.inviteMonitor),G).run()};this.heartBeat=y.newTask(A(this,this.heartBeatProcess),aT).run();this.setActive();aP.onfocus=A(this,this.setActive);L.log("slave "+this.id+" launched!")};O.prototype={genID:function(){this.id="slid_"+aS()%1000+"_"+Math.round(Math.random()*100)},masterMonitor:function(){if(ay[this.kfuin]){return}L.log("monitoring mater state");var a4=this.storage.get(aK)||0,a5=aS()-parseInt(a4);L.log("gap of master is "+a5);if(a5>3*R){this.recoverMaster()}},recoverMaster:function(){ay[this.kfuin]=new h(this.kfuin,this.pvid,this.config);L.log("recover master by slave "+this.id)},inviteMonitor:function(){if(this.isInvited()){this.kill()}else{if(this.isInviting()){if(this.isActive()){this.invite()}}}L.log("slave "+this.id+" monitoring invite state")},kill:function(){this.monitors.invite.drop();this.heartBeat.drop();var a7=this.storage,a6=[this.id];for(var a5=0,a4;a4=a6[a5++];){a7.del(a4)}L.log("slave "+this.id+" killed")},invite:function(){var a4=this.storage.get(X);var a5={wty:aU,kfuin:this.kfuin,type:J,aty:a4?(a4===ab?a1:B):a1,a:a4||"",iv:m,fsty:al,fposX:ah,fposY:u,sv:E,sp:this.pvid,dm:l,msg:this.storage.get(ak)};aI.invite(this.config.di,a5);this.storage.set(au,aX);L.log("invited by slave "+this.id)},heartBeatProcess:function(){var a5=this.storage,a4=a5.get(aY);if(!a4){a5.set(aY,this.id+"|")}else{if(a4.indexOf(this.id+"|")===-1){a5.set(aY,this.id+"|"+a4)}}a5.set(this.id,aS());L.log("update slave heartbeat "+this.id)},setActive:function(){var a6=this.storage,a5=a6.get(aY)||"",a4=this.id+aC;if(a5.indexOf(this.id)>-1){a5=a5.replace(a4,"")}a5+=a4;a6.set(aY,a5)},isActive:function(){var a4=this.storage.get(aY);if(!a4){return false}return a4.substr(0,a4.length-1).split(aC).pop()===this.id},isInvited:function(){return this.storage.get(au)===aX},isInviting:function(){return this.storage.get(au)===e}}})();var h;(function(){h=function(a4,a6,a5){this.kfuin=a4;this.pvid=a6;this.config=a5;this.storage=new k(a4);this.genID();this.sleep=false;this.storage.set(am,this.id);this.heartBeatProcess();this.heartBeat=y.newTask(A(this,this.heartBeatProcess),R).run();this.initWithConfig();L.log("master launched!")};h.prototype={genID:function(){this.id=aS()%1000+"_"+Math.round(Math.random()*100)},setInviteState:function(a5,a4,a6){if(a5===e){this.storage.set(X,a4);this.storage.set(ak,a6)}this.storage.set(au,a5)},isInvited:function(){var a4=this.storage.get(au)===aX;if(a4){this.recycle();this.isInvited=function(){return true}}return a4},initWithConfig:function(){var a4=this.config;if(a4.r!==aD){this.storage.set(aK,aV);return}if(a4.isAuto===aW){this.storage.set(ak,a4.autoMsg);this.autoInviteTimer=setTimeout(A(this,function(){this.autoInvite()}),a4.autoTime*1000)}this.monitors={slave:y.newTask(A(this,this.slaveMonitor),aT).run(),server:y.newTask(A(this,this.serverMonitor),f).run(),sleep:y.newTask(A(this,this.sleepMonitor),ar).run()};L.log("master inited with config")},autoInvite:function(){if(this.isInvited()){return}var a5={kfuin:this.kfuin,uid:this.pvid};var a4=this.monitors.server;a4.pause();aL(I,a5,A(this,function(a6){if(a6.r!==aD){a4.run();return}if(!this.isInvited()){this.setInviteState(e,ab,this.storage.get(ak));y.once(function(){a4.run()},5000).run()}}))},ajustServerMonitorGap:function(a4){this.monitors.server.setGap(Math.min(Math.max(f,a4),D))},serverMonitor:function(){var a6=this.storage.get(au),a4=this.config.hbDomain?decodeURIComponent(this.config.hbDomain):aj;if(this.sleep){return false}var a5={kfuin:this.kfuin,uid:this.pvid};if(a6===e){a5.inviteState=v}if(a6===aX){a5.inviteState=w}aL(a4,a5,A(this,function(a7){if(a7.r!==aD){return false}if(a7.gap){this.ajustServerMonitorGap(a7.gap*1000)}if(a7.inviteState===g){return false}if(a7.inviteState===v){this.setInviteState(e,a7.kfext,a7.inviteMsg);return false}if(a7.inviteState===w){this.setInviteState(aX)}}));L.log(this.kfuin+" is monitoring server")},slaveMonitor:function(){if(this.isInvited()){this.monitors.slave.drop()}var bb=this.storage,a4=bb.get(aY);if(!a4){return}a4=a4.split(aC);var a9="",a8=aS(),a7,a5,ba;for(var a6=0;a5=a4[a6++];){L.log("monitoring slave "+a5+" state");a7=bb.get(a5)||0;ba=a8-parseInt(a7);L.log("gap of slave "+a5+" is "+ba);if(ba>5*aT){bb.del(a5);L.log("clear slave "+a5+" in storage")}else{a9+=a5+aC}}bb.set(aY,a9)},sleepMonitor:function(){var a4=this.storage.get(aY),a5=a4.substr(0,a4.length-1).split(aC).pop();if(this.sleep){if(this.activeSlave!==a5){this.activeSlave=a5;this.sleep=false;this.monitors.sleep.setGap(ar)}}else{if(this.activeSlave===a5){this.sleep=true;this.monitors.sleep.setGap(q)}else{this.activeSlave=a5}}},kill:function(){ay[this.kfuin]=z;this.monitors.server.drop();this.monitors.slave.drop();this.heartBeat.drop();clearTimeout(this.autoInviteTimer);L.log("master killed")},recycle:function(){var a7=this.storage,a6=[X,ak];for(var a5=0,a4;a4=a6[a5++];){a7.del(a4)}L.log("storage recycled")},heartBeatProcess:function(){var a4=this.storage;if(a4.get(am)!==this.id){this.kill();return false}this.storage.set(aK,aS())}}})();var az=k.get(p)||"";var b=function(){var a4=false;return function(a7,a8){var a6=false;if(az){a8(az);a6=true}if(!a4){var a5="http://tajs.qq.com/crmqq.php?uid="+a7+"&dm="+l;aE(a5,{callback:function(){a4=true;if(a6){return}az=k.get(p);if(az){a8(az)}else{setTimeout(arguments.callee,30)}}})}}}();var ay={};aP.BQQWPALOAD=function(){var ba=aI.getParams();if(!ba){return}var a4=ba.kfuin;if(!a4||typeof a4==="undefined"){return}var a8=aI.findInPage(a4);ba.sv=E;if(ba.wty===aU||!ba.wty){aI.newWPA(ba)}if(a8){return}if(!aQ){L.log("can't pass TAFilter");return}var a7,a5,a9=function(){if(!a7||!a5){return}L.log(a4+" has launched process");if(a5.block===av){return}if(H){L.log(a4+" has started slave");a5.di=ba.di;new O(a4,a7,a5)}};b(a4,function(bb){a7=bb;a9()});var a6={kfuin:a4,dm:l,title:P.title,url:aP.location.href.split("://")[1].split("?")[0]};aL(a,a6,function(bb){a5=bb;a9()})};setTimeout(function(){N.pushPoint().send();aL("http://crm2.qq.com/cgi/wpacgi/get_version.php",function(a4){if(ai===a4.data.version){return}aE("http://combo.b.qq.com/account/bizqq/js/wpa.js?reset=1&v="+a4.data.version+"&t="+ +new Date())})},1)})(window)}window.BQQWPALOAD();