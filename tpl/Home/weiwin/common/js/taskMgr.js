BizQQWPA.define("wpa.ta","util.getScript,util.serialize,util.cookie",function(a){var e="http://tajs.qq.com/crmqq.php",f="pgv_pvi";var d=a("getScript"),c=a("serialize"),b=a("cookie");var h=false;var g=function(j,i,k){var n=false;if(g.uid){k(g.uid);n=true}if(!h){var m={uid:j,dm:i},l=e+"?"+c(m,"=","&");d(l,function(){h=true;if(n){return}g.uid=b.get(f);if(g.uid){k(g.uid)}else{setTimeout(arguments.callee,30)}})}};g.uid=b.get(f)||"";return g});BizQQWPA.define("wpa.kfuin","util.getJSONP",function(c){var b=c("getJSONP");var a="http://wpl.b.qq.com/cgi/conv.php";var d={};return{get:function(e,f){f=f||function(){};if(!e||d[e]){f(d[e]);return}var g={num:e};b(a,g,function(i){if(!i||i.r!==0){f();return}var h=d[e]=i.data.kfuin;f(h)})},set:function(f,e){d[f]=e}}});BizQQWPA.define("wpa.sid","util.getJSONP,util.domain",function(b){var d=b("getJSONP"),c=b("domain");var e="http://wpl.b.qq.com/cgi/ta.php";var f={};var a=c.topDomain;return{get:function(g,h){h=h||function(){};if(!g||f[g+"."+a]){h(f[g+"."+a]);return}var i={na:g,dm:a};d(e,i,function(k){if(!k||k.r!==0){h();return}var j=f[g+"."+a]=k.data.sid;h(j)})},set:function(h,g){f[h+"."+a]=g}}});BizQQWPA.define("util.titleFlash","util.taskMgr",function(a){var b=120;var e=a("taskMgr");var c=document,d=c.title,f=e.newTask(function(){var g=c.title;c.title=g.substr(1,g.length)+g.substr(0,1)},b);return titleFlash={on:function(g){c.title=g+(""+c.title);f.run()},off:function(){f.pause();c.title=d}}});BizQQWPA.define("util.className",function(){return{addClass:function(b,a){if(!b||!a){return b}if(!b.className){b.className=a;return b}if(this.hasClass(b,a)){return b}b.className+=" "+a;return b},hasClass:function(b,a){return(b&&a)?new RegExp("\\b"+a+"\\b").test(b.className):false},removeClass:function(b,a){if(!b||!a){return b}if(!this.hasClass(b,a)){return b}if(b.className){b.className=b.className.replace(a,"")}else{b.setAttribute=b.getAttribute("class").replace(a,"")}return b}}});BizQQWPA.define("util.Style",function(){return{load:function(e,d,c){c=c||{};var a=c.context||document;var b=a.createElement("link");b.name=e;b.type="text/css";b.setAttribute("rel","stylesheet");b.setAttribute("href",d);(function(){try{var f=a.getElementsByTagName("head")[0];f.insertBefore(b,f.firstChild)}catch(g){setTimeout(arguments.callee,1)}})();return b},add:function(e,c,d){d=d||{};var f=d.context||document;var b=f.createElement("style");b.type="text/css";b.name=e;var a=f.getElementsByTagName("body")[0];a.insertBefore(b,a.firstChild);if(b.styleSheet){b.styleSheet.cssText=c}else{b.appendChild(f.createTextNode(c))}return b}}});BizQQWPA.define("util.taskMgr","util.proxy",function(e){var c="run",b="pause",h="drop",g=50;var f=e("proxy");var d=function(){this.circle=[];this.pos=0;setInterval(f(this,this.loop),16)};d.prototype={newTask:function(i,j){var k=new a(i,j);this.circle.push(k);return k},once:function(i,j){return this.newTask(function(){i.apply(this);this.drop()},j)},loop:function(){var k=this.circle,j=this.pos,n=k.length,i=+new Date(),m=g,l=k[j];while(n>0&&+new Date()-i<m){if(l.isRunning()){l.execute()}else{if(l.isDropped()){k.splice(j,1);j--}}j=(j+1)%k.length;l=k[j];n--}this.pos=j}};var a=function(i,j){this.fn=i;this.gap=j;this.status=b;this.lastExecTime=+new Date()};a.prototype={run:function(){this.status=c;return this},pause:function(){this.status=b;return this},drop:function(){this.status=h;return this},execute:function(){if(+new Date()-this.lastExecTime<this.gap){return false}this.fn();this.lastExecTime=+new Date();return true},getGap:function(){return this.gap},setGap:function(i){this.gap=i;return this},isRunning:function(){return this.status===c},isPaused:function(){return this.status===b},isDropped:function(){return this.status===h}};return new d()});